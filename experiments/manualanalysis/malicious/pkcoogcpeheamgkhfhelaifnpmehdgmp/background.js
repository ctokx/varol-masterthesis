import"./green_mode_bg.js";function o(){chrome.windows.getAll({populate:!0},(o=>{chrome.storage.local.get("windowId",(i=>{const t=i.windowId,n=o.find((o=>o.id===t));n?d(n):e()}))}))}function e(){chrome.storage.local.get(["windowId","windowSize"],(o=>{const e=o.windowSize||{width:830,height:800};chrome.windows.create({type:"popup",url:"https://chat.openai.com",focused:!0,width:e.width,height:e.height},(o=>{chrome.storage.local.set({windowId:o.id})}))}))}function d(o){o.focused?chrome.windows.update(o.id,{state:"minimized"}):chrome.windows.update(o.id,{focused:!0})}chrome.action.onClicked.addListener(o),chrome.windows.onRemoved.addListener((o=>{chrome.storage.local.get("windowId",(e=>{e.windowId===o&&chrome.storage.local.remove("windowId")}))})),chrome.windows.onBoundsChanged.addListener((o=>{chrome.storage.local.get("windowId",(e=>{e.windowId===o.id&&chrome.storage.local.set({windowSize:{width:o.width,height:o.height}})}))})),chrome.commands.onCommand.addListener((e=>{"toggle_window"===e&&o()}));