!!chrome.sidePanel?chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}):chrome.action.onClicked.addListener(e=>{chrome.tabs.query({},function(e){let t=null,r=null;for(var n of e)try{n.id&&n.url&&(n.url.startsWith("chrome-extension://"+chrome.runtime.id)?r=n.id:n.url.startsWith("http")&&(console.log(`Tab ${n.url} is currently opened:`,n.active),n.active?t=n.id:chrome.tabs.sendMessage(n.id,{action:"closeSidePanel"})))}catch(e){console.error(`Error checking tab ${n.url}:`,e)}null!==t?(chrome.tabs.sendMessage(t,{action:"switchPanelVisibility"}),null!==r&&chrome.tabs.remove(r)):null!==r?chrome.tabs.update(r,{active:!0}):chrome.tabs.create({url:chrome.runtime.getURL("sidePanel.html")})})}),chrome.runtime.onInstalled.addListener(async e=>{var t=e.reason===chrome.runtime.OnInstalledReason.INSTALL,e=e.reason===chrome.runtime.OnInstalledReason.UPDATE;if(t){try{var r=chrome.runtime.getManifest().version;chrome.storage.sync.set({installVersion:r})}catch{}chrome.tabs.create({url:"https://gemini.google.com/app"})}(t||e)&&chrome.tabs.query({},function(e){for(var t of e)try{t.id&&t.url&&t.url.startsWith("http")&&chrome.scripting.executeScript({target:{tabId:t.id},files:["sidePanelWrapper.js","sidePanel.js"]})}catch(e){console.error(`Error injecting JavaScript into tab ${t.url}:`,e)}})}),chrome.contextMenus.removeAll(()=>{chrome.contextMenus.create({id:"askChatBot",title:"Ask Gemini AI Assistant",contexts:["page"]})}),chrome.contextMenus.onClicked.addListener((e,t)=>{console.log("Did click context menu",e,t)});