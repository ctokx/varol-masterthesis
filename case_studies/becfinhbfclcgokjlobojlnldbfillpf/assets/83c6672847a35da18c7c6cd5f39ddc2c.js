import{d as _e,f as vr,t as me,r as ye,c as oe,o as Ke,g as pe,j as fe,k as tt,n as It,l as j,m as pr,e as mr,q as Re,s as Bn,v as nt,x as oi,i as mt,y as ii,w as ge,z as yt,A as yr,F as Ae,B as eo,C as Ue,D as Le,E as ri,G as Oe,H as _r,I as dt,J as nn,K as Vn,L as wr,M as Kt,N as ae,p as ft,O as si,h as ve,P as to,Q as xr,R as br,S as Er,T as li,U as Sr,V as Nr,W as Cr,X as qt}from"./71531b053591a96d81db2519a82aa248.js";function Pt(e){return!!oi()&&(Kt(e),!0)}function Ve(e){return"function"==typeof e?e():j(e)}const Mr=typeof window<"u"&&typeof document<"u",Ir=e=>typeof e<"u",Pr=Object.prototype.toString,Tr=e=>"[object Object]"===Pr.call(e),kr=()=>{};function Dr(e,t){function n(...n){return new Promise(((o,i)=>{Promise.resolve(e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})).then(o).catch(i)}))}return n}const ai=e=>e();function $r(e=ai){const t=ye(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...n)=>{t.value&&e(...n)};return{isActive:Sr(t),pause:n,resume:o,eventFilter:i}}function go(e,t=!1,n="Timeout"){return new Promise(((o,i)=>{setTimeout(t?()=>i(n):o,e)}))}function Ar(e,t,n={}){const{eventFilter:o=ai,...i}=n;return ge(e,Dr(o,t),i)}function st(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:a,resume:l,isActive:u}=$r(o);return{stop:Ar(e,t,{...i,eventFilter:r}),pause:a,resume:l,isActive:u}}function Or(e,t={}){if(!to(e))return xr(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=br((()=>({get:()=>e.value[o],set(n){var i;if(null==(i=Ve(t.replaceRef))||i)if(Array.isArray(e.value)){const t=[...e.value];t[o]=n,e.value=t}else{const t={...e.value,[o]:n};Object.setPrototypeOf(t,Object.getPrototypeOf(e.value)),e.value=t}else e.value[o]=n}})));return n}function Rn(e,t=!1){function n(n,{flush:o="sync",deep:i=!1,timeout:r,throwOnTimeout:a}={}){let l=null;const u=[new Promise((r=>{l=ge(e,(e=>{n(e)!==t&&(null==l||l(),r(e))}),{flush:o,deep:i,immediate:!0})}))];return null!=r&&u.push(go(r,a).then((()=>Ve(e))).finally((()=>null==l?void 0:l()))),Promise.race(u)}function o(o,i){if(!to(o))return n((e=>e===o),i);const{flush:r="sync",deep:a=!1,timeout:l,throwOnTimeout:u}=i??{};let s=null;const c=[new Promise((n=>{s=ge([e,o],(([e,o])=>{t!==(e===o)&&(null==s||s(),n(e))}),{flush:r,deep:a,immediate:!0})}))];return null!=l&&c.push(go(l,u).then((()=>Ve(e))).finally((()=>(null==s||s(),Ve(e))))),Promise.race(c)}function i(e){return n((e=>!!e),e)}function r(e){return o(null,e)}function a(e){return o(void 0,e)}function l(e){return n(Number.isNaN,e)}function u(e,t){return n((t=>{const n=Array.from(t);return n.includes(e)||n.includes(Ve(e))}),t)}function s(e){return c(1,e)}function c(e=1,t){let o=-1;return n((()=>(o+=1,o>=e)),t)}return Array.isArray(Ve(e))?{toMatch:n,toContains:u,changed:s,changedTimes:c,get not(){return Rn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:l,toBeUndefined:a,changed:s,changedTimes:c,get not(){return Rn(e,!t)}}}function Hn(e){return Rn(e)}function zr(e){var t;const n=Ve(e);return null!=(t=null==n?void 0:n.$el)?t:n}const ui=Mr?window:void 0;function ci(...e){let t,n,o,i;if("string"==typeof e[0]||Array.isArray(e[0])?([n,o,i]=e,t=ui):[t,n,o,i]=e,!t)return kr;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],a=()=>{r.forEach((e=>e())),r.length=0},l=(e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)),u=ge((()=>[zr(t),Ve(i)]),(([e,t])=>{if(a(),!e)return;const i=Tr(t)?{...t}:t;r.push(...n.flatMap((t=>o.map((n=>l(e,t,n,i))))))}),{immediate:!0,flush:"post"}),s=()=>{u(),a()};return Pt(s),s}function Br(e){return"function"==typeof e?e:"string"==typeof e?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function vo(...e){let t,n,o={};3===e.length?(t=e[0],n=e[1],o=e[2]):2===e.length?"object"==typeof e[1]?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=ui,eventName:r="keydown",passive:a=!1,dedupe:l=!1}=o,u=Br(t);return ci(i,r,(e=>{e.repeat&&Ve(l)||u(e)&&n(e)}),a)}function Vr(e){return JSON.parse(JSON.stringify(e))}function Cn(e,t,n,o={}){var i,r,a;const{clone:l=!1,passive:u=!1,eventName:s,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=yt(),v=n||(null==h?void 0:h.emit)||(null==(i=null==h?void 0:h.$emit)?void 0:i.bind(h))||(null==(a=null==(r=null==h?void 0:h.proxy)?void 0:r.$emit)?void 0:a.bind(null==h?void 0:h.proxy));let p=s;t||(t="modelValue"),p=p||`update:${t.toString()}`;const g=e=>l?"function"==typeof l?l(e):Vr(e):e,m=()=>Ir(e[t])?g(e[t]):d,y=e=>{f?f(e)&&v(p,e):v(p,e)};if(u){const n=m(),o=ye(n);let i=!1;return ge((()=>e[t]),(e=>{i||(i=!0,o.value=g(e),Le((()=>i=!1)))})),ge(o,(n=>{!i&&(n!==e[t]||c)&&y(n)}),{deep:c}),o}return oe({get:()=>m(),set(e){y(e)}})}var Rr={value:()=>{}};function vn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Jt(n)}function Jt(e){this._=e}function Hr(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Lr(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function po(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Rr,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}Jt.prototype=vn.prototype={constructor:Jt,on:function(e,t){var n=this._,o=Hr(e+"",n),i,r=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++r<a;)if(i=(e=o[r]).type)n[i]=po(n[i],e.name,t);else if(null==t)for(i in n)n[i]=po(n[i],e.name,null);return this}for(;++r<a;)if((i=(e=o[r]).type)&&(i=Lr(n[i],e.name)))return i},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Jt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,i=(r=this._[e]).length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};var Ln="http://www.w3.org/1999/xhtml";const mo={svg:"http://www.w3.org/2000/svg",xhtml:Ln,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pn(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),mo.hasOwnProperty(t)?{space:mo[t],local:e}:e}function Fr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ln&&t.documentElement.namespaceURI===Ln?t.createElement(e):t.createElementNS(n,e)}}function Yr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function di(e){var t=pn(e);return(t.local?Yr:Fr)(t)}function Gr(){}function no(e){return null==e?Gr:function(){return this.querySelector(e)}}function Xr(e){"function"!=typeof e&&(e=no(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,l=o[i]=new Array(a),u,s,c=0;c<a;++c)(u=r[c])&&(s=e.call(u,u.__data__,c,r))&&("__data__"in u&&(s.__data__=u.__data__),l[c]=s);return new Ne(o,this._parents)}function Ur(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Zr(){return[]}function fi(e){return null==e?Zr:function(){return this.querySelectorAll(e)}}function Wr(e){return function(){return Ur(e.apply(this,arguments))}}function Kr(e){e="function"==typeof e?Wr(e):fi(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a=t[r],l=a.length,u,s=0;s<l;++s)(u=a[s])&&(o.push(e.call(u,u.__data__,s,a)),i.push(u));return new Ne(o,i)}function hi(e){return function(){return this.matches(e)}}function gi(e){return function(t){return t.matches(e)}}var qr=Array.prototype.find;function Jr(e){return function(){return qr.call(this.children,e)}}function Qr(){return this.firstElementChild}function jr(e){return this.select(null==e?Qr:Jr("function"==typeof e?e:gi(e)))}var es=Array.prototype.filter;function ts(){return Array.from(this.children)}function ns(e){return function(){return es.call(this.children,e)}}function os(e){return this.selectAll(null==e?ts:ns("function"==typeof e?e:gi(e)))}function is(e){"function"!=typeof e&&(e=hi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,l=o[i]=[],u,s=0;s<a;++s)(u=r[s])&&e.call(u,u.__data__,s,r)&&l.push(u);return new Ne(o,this._parents)}function vi(e){return new Array(e.length)}function rs(){return new Ne(this._enter||this._groups.map(vi),this._parents)}function on(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function ss(e){return function(){return e}}function ls(e,t,n,o,i,r){for(var a=0,l,u=t.length,s=r.length;a<s;++a)(l=t[a])?(l.__data__=r[a],o[a]=l):n[a]=new on(e,r[a]);for(;a<u;++a)(l=t[a])&&(i[a]=l)}function as(e,t,n,o,i,r,a){var l,u,s=new Map,c=t.length,d=r.length,f=new Array(c),h;for(l=0;l<c;++l)(u=t[l])&&(f[l]=h=a.call(u,u.__data__,l,t)+"",s.has(h)?i[l]=u:s.set(h,u));for(l=0;l<d;++l)h=a.call(e,r[l],l,r)+"",(u=s.get(h))?(o[l]=u,u.__data__=r[l],s.delete(h)):n[l]=new on(e,r[l]);for(l=0;l<c;++l)(u=t[l])&&s.get(f[l])===u&&(i[l]=u)}function us(e){return e.__data__}function cs(e,t){if(!arguments.length)return Array.from(this,us);var n=t?as:ls,o=this._parents,i=this._groups;"function"!=typeof e&&(e=ss(e));for(var r=i.length,a=new Array(r),l=new Array(r),u=new Array(r),s=0;s<r;++s){var c=o[s],d=i[s],f=d.length,h=ds(e.call(c,c&&c.__data__,s,o)),v=h.length,p=l[s]=new Array(v),g=a[s]=new Array(v),m;n(c,d,p,g,u[s]=new Array(f),h,t);for(var y=0,w=0,x,b;y<v;++y)if(x=p[y]){for(y>=w&&(w=y+1);!(b=g[w])&&++w<v;);x._next=b||null}}return(a=new Ne(a,o))._enter=l,a._exit=u,a}function ds(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function fs(){return new Ne(this._exit||this._groups.map(vi),this._parents)}function hs(e,t,n){var o=this.enter(),i=this,r=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&((i=t(i))&&(i=i.selection())),null==n?r.remove():n(r),o&&i?o.merge(i).order():i}function gs(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),l=new Array(i),u=0;u<a;++u)for(var s=n[u],c=o[u],d=s.length,f=l[u]=new Array(d),h,v=0;v<d;++v)(h=s[v]||c[v])&&(f[v]=h);for(;u<i;++u)l[u]=n[u];return new Ne(l,this._parents)}function vs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&4^a.compareDocumentPosition(r)&&r.parentNode.insertBefore(a,r),r=a);return this}function ps(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ms);for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a=n[r],l=a.length,u=i[r]=new Array(l),s,c=0;c<l;++c)(s=a[c])&&(u[c]=s);u.sort(t)}return new Ne(i,this._parents).order()}function ms(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ys(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _s(){return Array.from(this)}function ws(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function xs(){let e=0;for(const t of this)++e;return e}function bs(){return!this.node()}function Es(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,a=i.length,l;r<a;++r)(l=i[r])&&e.call(l,l.__data__,r,i);return this}function Ss(e){return function(){this.removeAttribute(e)}}function Ns(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cs(e,t){return function(){this.setAttribute(e,t)}}function Ms(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Is(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ps(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ts(e,t){var n=pn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Ns:Ss:"function"==typeof t?n.local?Ps:Is:n.local?Ms:Cs)(n,t))}function pi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ks(e){return function(){this.style.removeProperty(e)}}function Ds(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $s(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function As(e,t,n){return arguments.length>1?this.each((null==t?ks:"function"==typeof t?$s:Ds)(e,t,n??"")):ht(this.node(),e)}function ht(e,t){return e.style.getPropertyValue(t)||pi(e).getComputedStyle(e,null).getPropertyValue(t)}function Os(e){return function(){delete this[e]}}function zs(e,t){return function(){this[e]=t}}function Bs(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Vs(e,t){return arguments.length>1?this.each((null==t?Os:"function"==typeof t?Bs:zs)(e,t)):this.node()[e]}function mi(e){return e.trim().split(/^|\s+/)}function oo(e){return e.classList||new yi(e)}function yi(e){this._node=e,this._names=mi(e.getAttribute("class")||"")}function _i(e,t){for(var n=oo(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function wi(e,t){for(var n=oo(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Rs(e){return function(){_i(this,e)}}function Hs(e){return function(){wi(this,e)}}function Ls(e,t){return function(){(t.apply(this,arguments)?_i:wi)(this,e)}}function Fs(e,t){var n=mi(e+"");if(arguments.length<2){for(var o=oo(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Ls:t?Rs:Hs)(n,t))}function Ys(){this.textContent=""}function Gs(e){return function(){this.textContent=e}}function Xs(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Us(e){return arguments.length?this.each(null==e?Ys:("function"==typeof e?Xs:Gs)(e)):this.node().textContent}function Zs(){this.innerHTML=""}function Ws(e){return function(){this.innerHTML=e}}function Ks(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qs(e){return arguments.length?this.each(null==e?Zs:("function"==typeof e?Ks:Ws)(e)):this.node().innerHTML}function Js(){this.nextSibling&&this.parentNode.appendChild(this)}function Qs(){return this.each(Js)}function js(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function el(){return this.each(js)}function tl(e){var t="function"==typeof e?e:di(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function nl(){return null}function ol(e,t){var n="function"==typeof e?e:di(e),o=null==t?nl:"function"==typeof t?t:no(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}function il(){var e=this.parentNode;e&&e.removeChild(this)}function rl(){return this.each(il)}function sl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ll(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function al(e){return this.select(e?ll:sl)}function ul(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cl(e){return function(t){e.call(this,t,this.__data__)}}function dl(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function fl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],e.type&&r.type!==e.type||r.name!==e.name?t[++o]=r:this.removeEventListener(r.type,r.listener,r.options);++o?t.length=o:delete this.__on}}}function hl(e,t,n){return function(){var o=this.__on,i,r=cl(t);if(o)for(var a=0,l=o.length;a<l;++a)if((i=o[a]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),void(i.value=t);this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function gl(e,t,n){var o=dl(e+""),i,r=o.length,a;if(!(arguments.length<2)){for(l=t?hl:fl,i=0;i<r;++i)this.each(l(o[i],t,n));return this}var l=this.node().__on;if(l)for(var u=0,s=l.length,c;u<s;++u)for(i=0,c=l[u];i<r;++i)if((a=o[i]).type===c.type&&a.name===c.name)return c.value}function xi(e,t,n){var o=pi(e),i=o.CustomEvent;"function"==typeof i?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function vl(e,t){return function(){return xi(this,e,t)}}function pl(e,t){return function(){return xi(this,e,t.apply(this,arguments))}}function ml(e,t){return this.each(("function"==typeof t?pl:vl)(e,t))}function*yl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}on.prototype={constructor:on,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},yi.prototype={add:function(e){var t;this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var bi=[null];function Ne(e,t){this._groups=e,this._parents=t}function Bt(){return new Ne([[document.documentElement]],bi)}function _l(){return this}function Ce(e){return"string"==typeof e?new Ne([[document.querySelector(e)]],[document.documentElement]):new Ne([[e]],bi)}function wl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Te(e,t){if(e=wl(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}Ne.prototype=Bt.prototype={constructor:Ne,select:Xr,selectAll:Kr,selectChild:jr,selectChildren:os,filter:is,data:cs,enter:rs,exit:fs,join:hs,merge:gs,selection:_l,order:vs,sort:ps,call:ys,nodes:_s,node:ws,size:xs,empty:bs,each:Es,attr:Ts,style:As,property:Vs,classed:Fs,text:Us,html:qs,raise:Qs,lower:el,append:tl,insert:ol,remove:rl,clone:al,datum:ul,on:gl,dispatch:ml,[Symbol.iterator]:yl};const xl={passive:!1},Tt={capture:!0,passive:!1};function Mn(e){e.stopImmediatePropagation()}function at(e){e.preventDefault(),e.stopImmediatePropagation()}function Ei(e){var t=e.document.documentElement,n=Ce(e).on("dragstart.drag",at,Tt);"onselectstart"in t?n.on("selectstart.drag",at,Tt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Si(e,t){var n=e.document.documentElement,o=Ce(e).on("dragstart.drag",null);t&&(o.on("click.drag",at,Tt),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ht=e=>()=>e;function Fn(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function bl(e){return!e.ctrlKey&&!e.button}function El(){return this.parentNode}function Sl(e,t){return t??{x:e.x,y:e.y}}function Nl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cl(){var e=bl,t=El,n=Sl,o=Nl,i={},r=vn("start","drag","end"),a=0,l,u,s,c,d=0;function f(e){e.on("mousedown.drag",h).filter(o).on("touchstart.drag",g).on("touchmove.drag",m,xl).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(n,o){if(!c&&e.call(this,n,o)){var i=w(this,t.call(this,n,o),n,o,"mouse");i&&(Ce(n.view).on("mousemove.drag",v,Tt).on("mouseup.drag",p,Tt),Ei(n.view),Mn(n),s=!1,l=n.clientX,u=n.clientY,i("start",n))}}function v(e){if(at(e),!s){var t=e.clientX-l,n=e.clientY-u;s=t*t+n*n>d}i.mouse("drag",e)}function p(e){Ce(e.view).on("mousemove.drag mouseup.drag",null),Si(e.view,s),at(e),i.mouse("end",e)}function g(n,o){if(e.call(this,n,o)){var i=n.changedTouches,r=t.call(this,n,o),a=i.length,l,u;for(l=0;l<a;++l)(u=w(this,r,n,o,i[l].identifier,i[l]))&&(Mn(n),u("start",n,i[l]))}}function m(e){var t=e.changedTouches,n=t.length,o,r;for(o=0;o<n;++o)(r=i[t[o].identifier])&&(at(e),r("drag",e,t[o]))}function y(e){var t=e.changedTouches,n=t.length,o,r;for(c&&clearTimeout(c),c=setTimeout((function(){c=null}),500),o=0;o<n;++o)(r=i[t[o].identifier])&&(Mn(e),r("end",e,t[o]))}function w(e,t,o,l,u,s){var c=r.copy(),d=Te(s||o,t),h,v,p;if(null!=(p=n.call(e,new Fn("beforestart",{sourceEvent:o,target:f,identifier:u,active:a,x:d[0],y:d[1],dx:0,dy:0,dispatch:c}),l)))return h=p.x-d[0]||0,v=p.y-d[1]||0,function n(o,r,s){var g=d,m;switch(o){case"start":i[u]=n,m=a++;break;case"end":delete i[u],--a;case"drag":d=Te(s||r,t),m=a}c.call(o,e,new Fn(o,{sourceEvent:r,subject:p,target:f,identifier:u,active:m,x:d[0]+h,y:d[1]+v,dx:d[0]-g[0],dy:d[1]-g[1],dispatch:c}),l)}}return f.filter=function(t){return arguments.length?(e="function"==typeof t?t:Ht(!!t),f):e},f.container=function(e){return arguments.length?(t="function"==typeof e?e:Ht(e),f):t},f.subject=function(e){return arguments.length?(n="function"==typeof e?e:Ht(e),f):n},f.touchable=function(e){return arguments.length?(o="function"==typeof e?e:Ht(!!e),f):o},f.on=function(){var e=r.on.apply(r,arguments);return e===r?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function io(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ni(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Vt(){}Fn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var kt=.7,rn=1/kt,ut="\\s*([+-]?\\d+)\\s*",Dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ml=/^#([0-9a-f]{3,8})$/,Il=new RegExp(`^rgb\\(${ut},${ut},${ut}\\)$`),Pl=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),Tl=new RegExp(`^rgba\\(${ut},${ut},${ut},${Dt}\\)$`),kl=new RegExp(`^rgba\\(${$e},${$e},${$e},${Dt}\\)$`),Dl=new RegExp(`^hsl\\(${Dt},${$e},${$e}\\)$`),$l=new RegExp(`^hsla\\(${Dt},${$e},${$e},${Dt}\\)$`),yo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _o(){return this.rgb().formatHex()}function Al(){return this.rgb().formatHex8()}function Ol(){return Ci(this).formatHsl()}function wo(){return this.rgb().formatRgb()}function ot(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ml.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?xo(t):3===n?new Se(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Lt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Lt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Il.exec(e))?new Se(t[1],t[2],t[3],1):(t=Pl.exec(e))?new Se(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Tl.exec(e))?Lt(t[1],t[2],t[3],t[4]):(t=kl.exec(e))?Lt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Dl.exec(e))?So(t[1],t[2]/100,t[3]/100,1):(t=$l.exec(e))?So(t[1],t[2]/100,t[3]/100,t[4]):yo.hasOwnProperty(e)?xo(yo[e]):"transparent"===e?new Se(NaN,NaN,NaN,0):null}function xo(e){return new Se(e>>16&255,e>>8&255,255&e,1)}function Lt(e,t,n,o){return o<=0&&(e=t=n=NaN),new Se(e,t,n,o)}function zl(e){return e instanceof Vt||(e=ot(e)),e?new Se((e=e.rgb()).r,e.g,e.b,e.opacity):new Se}function Yn(e,t,n,o){return 1===arguments.length?zl(e):new Se(e,t,n,o??1)}function Se(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function bo(){return`#${Qe(this.r)}${Qe(this.g)}${Qe(this.b)}`}function Bl(){return`#${Qe(this.r)}${Qe(this.g)}${Qe(this.b)}${Qe(255*(isNaN(this.opacity)?1:this.opacity))}`}function Eo(){const e=sn(this.opacity);return`${1===e?"rgb(":"rgba("}${je(this.r)}, ${je(this.g)}, ${je(this.b)}${1===e?")":`, ${e})`}`}function sn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function je(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qe(e){return((e=je(e))<16?"0":"")+e.toString(16)}function So(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Me(e,t,n,o)}function Ci(e){if(e instanceof Me)return new Me(e.h,e.s,e.l,e.opacity);if(e instanceof Vt||(e=ot(e)),!e)return new Me;if(e instanceof Me)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,l=r-i,u=(r+i)/2;return l?(a=t===r?(n-o)/l+6*(n<o):n===r?(o-t)/l+2:(t-n)/l+4,l/=u<.5?r+i:2-r-i,a*=60):l=u>0&&u<1?0:a,new Me(a,l,u,e.opacity)}function Vl(e,t,n,o){return 1===arguments.length?Ci(e):new Me(e,t,n,o??1)}function Me(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function No(e){return(e=(e||0)%360)<0?e+360:e}function Ft(e){return Math.max(0,Math.min(1,e||0))}function In(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}io(Vt,ot,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_o,formatHex:_o,formatHex8:Al,formatHsl:Ol,formatRgb:wo,toString:wo}),io(Se,Yn,Ni(Vt,{brighter(e){return e=null==e?rn:Math.pow(rn,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?kt:Math.pow(kt,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Se(je(this.r),je(this.g),je(this.b),sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bo,formatHex:bo,formatHex8:Bl,formatRgb:Eo,toString:Eo})),io(Me,Vl,Ni(Vt,{brighter(e){return e=null==e?rn:Math.pow(rn,e),new Me(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?kt:Math.pow(kt,e),new Me(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Se(In(e>=240?e-240:e+120,i,o),In(e,i,o),In(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Me(No(this.h),Ft(this.s),Ft(this.l),sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sn(this.opacity);return`${1===e?"hsl(":"hsla("}${No(this.h)}, ${100*Ft(this.s)}%, ${100*Ft(this.l)}%${1===e?")":`, ${e})`}`}}));const ro=e=>()=>e;function Rl(e,t){return function(n){return e+n*t}}function Hl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Ll(e){return 1==(e=+e)?Mi:function(t,n){return n-t?Hl(t,n,e):ro(isNaN(t)?n:t)}}function Mi(e,t){var n=t-e;return n?Rl(e,n):ro(isNaN(e)?t:e)}const ln=function e(t){var n=Ll(t);function o(e,t){var o=n((e=Yn(e)).r,(t=Yn(t)).r),i=n(e.g,t.g),r=n(e.b,t.b),a=Mi(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Fl(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),i;return function(r){for(i=0;i<n;++i)o[i]=e[i]*(1-r)+t[i]*r;return o}}function Yl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Gl(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),r=new Array(n),a;for(a=0;a<o;++a)i[a]=Nt(e[a],t[a]);for(;a<n;++a)r[a]=t[a];return function(e){for(a=0;a<o;++a)r[a]=i[a](e);return r}}function Xl(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ul(e,t){var n={},o={},i;for(i in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)i in e?n[i]=Nt(e[i],t[i]):o[i]=t[i];return function(e){for(i in n)o[i]=n[i](e);return o}}var Gn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pn=new RegExp(Gn.source,"g");function Zl(e){return function(){return e}}function Wl(e){return function(t){return e(t)+""}}function Ii(e,t){var n=Gn.lastIndex=Pn.lastIndex=0,o,i,r,a=-1,l=[],u=[];for(e+="",t+="";(o=Gn.exec(e))&&(i=Pn.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),l[a]?l[a]+=r:l[++a]=r),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:ke(o,i)})),n=Pn.lastIndex;return n<t.length&&(r=t.slice(n),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?Wl(u[0].x):Zl(t):(t=u.length,function(e){for(var n=0,o;n<t;++n)l[(o=u[n]).i]=o.x(e);return l.join("")})}function Nt(e,t){var n=typeof t,o;return null==t||"boolean"===n?ro(t):("number"===n?ke:"string"===n?(o=ot(t))?(t=o,ln):Ii:t instanceof ot?ln:t instanceof Date?Xl:Yl(t)?Fl:Array.isArray(t)?Gl:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Ul:ke)(e,t)}var Co=180/Math.PI,Xn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Yt;function Pi(e,t,n,o,i,r){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Co,skewX:Math.atan(u)*Co,scaleX:a,scaleY:l}}function Kl(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xn:Pi(t.a,t.b,t.c,t.d,t.e,t.f)}function ql(e){return null!=e&&(Yt||(Yt=document.createElementNS("http://www.w3.org/2000/svg","g")),Yt.setAttribute("transform",e),e=Yt.transform.baseVal.consolidate())?Pi((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Xn}function Ti(e,t,n,o){function i(e){return e.length?e.pop()+" ":""}function r(e,o,i,r,a,l){if(e!==i||o!==r){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:ke(e,i)},{i:u-2,x:ke(o,r)})}else(i||r)&&a.push("translate("+i+t+r+n)}function a(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(i(n)+"rotate(",null,o)-2,x:ke(e,t)})):t&&n.push(i(n)+"rotate("+t+o)}function l(e,t,n,r){e!==t?r.push({i:n.push(i(n)+"skewX(",null,o)-2,x:ke(e,t)}):t&&n.push(i(n)+"skewX("+t+o)}function u(e,t,n,o,r,a){if(e!==n||t!==o){var l=r.push(i(r)+"scale(",null,",",null,")");a.push({i:l-4,x:ke(e,n)},{i:l-2,x:ke(t,o)})}else(1!==n||1!==o)&&r.push(i(r)+"scale("+n+","+o+")")}return function(t,n){var o=[],i=[];return t=e(t),n=e(n),r(t.translateX,t.translateY,n.translateX,n.translateY,o,i),a(t.rotate,n.rotate,o,i),l(t.skewX,n.skewX,o,i),u(t.scaleX,t.scaleY,n.scaleX,n.scaleY,o,i),t=n=null,function(e){for(var t=-1,n=i.length,r;++t<n;)o[(r=i[t]).i]=r.x(e);return o.join("")}}}var Jl=Ti(Kl,"px, ","px)","deg)"),Ql=Ti(ql,", ",")",")"),jl=1e-12;function Mo(e){return((e=Math.exp(e))+1/e)/2}function ea(e){return((e=Math.exp(e))-1/e)/2}function ta(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qt=function e(t,n,o){function i(e,i){var r=e[0],a=e[1],l=e[2],u=i[0],s=i[1],c=i[2],d=u-r,f=s-a,h=d*d+f*f,v,p;if(h<jl)p=Math.log(c/l)/t,v=function(e){return[r+e*d,a+e*f,l*Math.exp(t*e*p)]};else{var g=Math.sqrt(h),m=(c*c-l*l+o*h)/(2*l*n*g),y=(c*c-l*l-o*h)/(2*c*n*g),w=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);p=(x-w)/t,v=function(e){var o=e*p,i=Mo(w),u=l/(n*g)*(i*ta(t*o+w)-ea(w));return[r+u*d,a+u*f,l*i/Mo(t*o+w)]}}return v.duration=1e3*p*t/Math.SQRT2,v}return i.rho=function(t){var n=Math.max(.001,+t),o=n*n,i;return e(n,o,o*o)},i}(Math.SQRT2,2,4);var gt=0,bt=0,wt=0,ki=1e3,an,Et,un=0,it=0,mn=0,$t="object"==typeof performance&&performance.now?performance:Date,Di="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function so(){return it||(Di(na),it=$t.now()+mn)}function na(){it=0}function cn(){this._call=this._time=this._next=null}function $i(e,t,n){var o=new cn;return o.restart(e,t,n),o}function oa(){so(),++gt;for(var e=an,t;e;)(t=it-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gt}function Io(){it=(un=$t.now())+mn,gt=bt=0;try{oa()}finally{gt=0,ra(),it=0}}function ia(){var e=$t.now(),t=e-un;t>ki&&(mn-=t,un=e)}function ra(){for(var e,t=an,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:an=n);Et=e,Un(o)}function Un(e){var t;gt||(bt&&(bt=clearTimeout(bt)),e-it>24?(e<1/0&&(bt=setTimeout(Io,e-$t.now()-mn)),wt&&(wt=clearInterval(wt))):(wt||(un=$t.now(),wt=setInterval(ia,ki)),gt=1,Di(Io)))}function Po(e,t,n){var o=new cn;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}cn.prototype=$i.prototype={constructor:cn,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?so():+n)+(null==t?0:+t),!this._next&&Et!==this&&(Et?Et._next=this:an=this,Et=this),this._call=e,this._time=n,Un()},stop:function(){this._call&&(this._call=null,this._time=1/0,Un())}};var sa=vn("start","end","cancel","interrupt"),la=[],Ai=0,To=1,Zn=2,jt=3,ko=4,Wn=5,en=6;function yn(e,t,n,o,i,r){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};aa(e,n,{name:t,index:o,group:i,on:sa,tween:la,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Ai})}function lo(e,t){var n=Ie(e,t);if(n.state>Ai)throw new Error("too late; already scheduled");return n}function ze(e,t){var n=Ie(e,t);if(n.state>jt)throw new Error("too late; already running");return n}function Ie(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function aa(e,t,n){var o=e.__transition,i;function r(e){n.state=To,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(r){var s,c,d,f;if(n.state!==To)return u();for(s in o)if((f=o[s]).name===n.name){if(f.state===jt)return Po(a);f.state===ko?(f.state=en,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[s]):+s<t&&(f.state=en,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[s])}if(Po((function(){n.state===jt&&(n.state=ko,n.timer.restart(l,n.delay,n.time),l(r))})),n.state=Zn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zn){for(n.state=jt,i=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(f=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=f);i.length=c+1}}function l(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=Wn,1),r=-1,a=i.length;++r<a;)i[r].call(e,o);n.state===Wn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var i in n.state=en,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=$i(r,0,n.time)}function tn(e,t){var n=e.__transition,o,i,r=!0,a;if(n){for(a in t=null==t?null:t+"",n)(o=n[a]).name===t?(i=o.state>Zn&&o.state<Wn,o.state=en,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]):r=!1;r&&delete e.__transition}}function ua(e){return this.each((function(){tn(this,e)}))}function ca(e,t){var n,o;return function(){var i=ze(this,e),r=i.tween;if(r!==n)for(var a=0,l=(o=n=r).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}i.tween=o}}function da(e,t,n){var o,i;if("function"!=typeof n)throw new Error;return function(){var r=ze(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var l={name:t,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===t){i[u]=l;break}u===s&&i.push(l)}r.tween=i}}function fa(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ie(this.node(),n).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((null==t?ca:da)(n,e,t))}function ao(e,t,n){var o=e._id;return e.each((function(){var e=ze(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Ie(e,o).value[t]}}function Oi(e,t){var n;return("number"==typeof t?ke:t instanceof ot?ln:(n=ot(t))?(t=n,ln):Ii)(e,t)}function ha(e){return function(){this.removeAttribute(e)}}function ga(e){return function(){this.removeAttributeNS(e.space,e.local)}}function va(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function pa(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function ma(e,t,n){var o,i,r;return function(){var a,l=n(this),u;return null==l?void this.removeAttribute(e):(a=this.getAttribute(e))===(u=l+"")?null:a===o&&u===i?r:(i=u,r=t(o=a,l))}}function ya(e,t,n){var o,i,r;return function(){var a,l=n(this),u;return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(u=l+"")?null:a===o&&u===i?r:(i=u,r=t(o=a,l))}}function _a(e,t){var n=pn(e),o="transform"===n?Ql:Oi;return this.attrTween(e,"function"==typeof t?(n.local?ya:ma)(n,o,ao(this,"attr."+e,t)):null==t?(n.local?ga:ha)(n):(n.local?pa:va)(n,o,t))}function wa(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xa(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ba(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&xa(e,i)),n}return i._value=t,i}function Ea(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&wa(e,i)),n}return i._value=t,i}function Sa(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=pn(e);return this.tween(n,(o.local?ba:Ea)(o,t))}function Na(e,t){return function(){lo(this,e).delay=+t.apply(this,arguments)}}function Ca(e,t){return t=+t,function(){lo(this,e).delay=t}}function Ma(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Na:Ca)(t,e)):Ie(this.node(),t).delay}function Ia(e,t){return function(){ze(this,e).duration=+t.apply(this,arguments)}}function Pa(e,t){return t=+t,function(){ze(this,e).duration=t}}function Ta(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Ia:Pa)(t,e)):Ie(this.node(),t).duration}function ka(e,t){if("function"!=typeof t)throw new Error;return function(){ze(this,e).ease=t}}function Da(e){var t=this._id;return arguments.length?this.each(ka(t,e)):Ie(this.node(),t).ease}function $a(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;ze(this,e).ease=n}}function Aa(e){if("function"!=typeof e)throw new Error;return this.each($a(this._id,e))}function Oa(e){"function"!=typeof e&&(e=hi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,l=o[i]=[],u,s=0;s<a;++s)(u=r[s])&&e.call(u,u.__data__,s,r)&&l.push(u);return new Fe(o,this._parents,this._name,this._id)}function za(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),l=0;l<r;++l)for(var u=t[l],s=n[l],c=u.length,d=a[l]=new Array(c),f,h=0;h<c;++h)(f=u[h]||s[h])&&(d[h]=f);for(;l<o;++l)a[l]=t[l];return new Fe(a,this._parents,this._name,this._id)}function Ba(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function Va(e,t,n){var o,i,r=Ba(t)?lo:ze;return function(){var a=r(this,e),l=a.on;l!==o&&(i=(o=l).copy()).on(t,n),a.on=i}}function Ra(e,t){var n=this._id;return arguments.length<2?Ie(this.node(),n).on.on(e):this.each(Va(n,e,t))}function Ha(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function La(){return this.on("end.remove",Ha(this._id))}function Fa(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=no(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var l=o[a],u=l.length,s=r[a]=new Array(u),c,d,f=0;f<u;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),s[f]=d,yn(s[f],t,n,f,s,Ie(c,n)));return new Fe(r,this._parents,t,n)}function Ya(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=fi(e));for(var o=this._groups,i=o.length,r=[],a=[],l=0;l<i;++l)for(var u=o[l],s=u.length,c,d=0;d<s;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,v=Ie(c,n),p=0,g=f.length;p<g;++p)(h=f[p])&&yn(h,t,n,p,f,v);r.push(f),a.push(c)}return new Fe(r,a,t,n)}var Ga=Bt.prototype.constructor;function Xa(){return new Ga(this._groups,this._parents)}function Ua(e,t){var n,o,i;return function(){var r=ht(this,e),a=(this.style.removeProperty(e),ht(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}function zi(e){return function(){this.style.removeProperty(e)}}function Za(e,t,n){var o,i=n+"",r;return function(){var a=ht(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}function Wa(e,t,n){var o,i,r;return function(){var a=ht(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=ht(this,e)),a===u?null:a===o&&u===i?r:(i=u,r=t(o=a,l))}}function Ka(e,t){var n,o,i,r="style."+t,a="end."+r,l;return function(){var u=ze(this,e),s=u.on,c=null==u.value[r]?l||(l=zi(t)):void 0;(s!==n||i!==c)&&(o=(n=s).copy()).on(a,i=c),u.on=o}}function qa(e,t,n){var o="transform"==(e+="")?Jl:Oi;return null==t?this.styleTween(e,Ua(e,o)).on("end.style."+e,zi(e)):"function"==typeof t?this.styleTween(e,Wa(e,o,ao(this,"style."+e,t))).each(Ka(this._id,e)):this.styleTween(e,Za(e,o,t),n).on("end.style."+e,null)}function Ja(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Qa(e,t,n){var o,i;function r(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&Ja(e,r,n)),o}return r._value=t,r}function ja(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,Qa(e,t,n??""))}function eu(e){return function(){this.textContent=e}}function tu(e){return function(){var t=e(this);this.textContent=t??""}}function nu(e){return this.tween("text","function"==typeof e?tu(ao(this,"text",e)):eu(null==e?"":e+""))}function ou(e){return function(t){this.textContent=e.call(this,t)}}function iu(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&ou(o)),t}return o._value=e,o}function ru(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,iu(e))}function su(){for(var e=this._name,t=this._id,n=Bi(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],l=a.length,u,s=0;s<l;++s)if(u=a[s]){var c=Ie(u,t);yn(u,e,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Fe(o,this._parents,e,n)}function lu(){var e,t,n=this,o=n._id,i=n.size();return new Promise((function(r,a){var l={value:a},u={value:function(){0===--i&&r()}};n.each((function(){var n=ze(this,o),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===i&&r()}))}var au=0;function Fe(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Bi(){return++au}var Be=Bt.prototype;function uu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Fe.prototype={constructor:Fe,select:Fa,selectAll:Ya,selectChild:Be.selectChild,selectChildren:Be.selectChildren,filter:Oa,merge:za,selection:Xa,transition:su,call:Be.call,nodes:Be.nodes,node:Be.node,size:Be.size,empty:Be.empty,each:Be.each,on:Ra,attr:_a,attrTween:Sa,style:qa,styleTween:ja,text:nu,textTween:ru,remove:La,tween:fa,delay:Ma,duration:Ta,ease:Da,easeVarying:Aa,end:lu,[Symbol.iterator]:Be[Symbol.iterator]};var cu={time:null,delay:0,duration:250,ease:uu};function du(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function fu(e){var t,n;e instanceof Fe?(t=e._id,e=e._name):(t=Bi(),(n=cu).time=so(),e=null==e?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],l=a.length,u,s=0;s<l;++s)(u=a[s])&&yn(u,e,t,s,a,n||du(u,t));return new Fe(o,this._parents,e,t)}Bt.prototype.interrupt=ua,Bt.prototype.transition=fu;const Gt=e=>()=>e;function hu(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function He(e,t,n){this.k=e,this.x=t,this.y=n}He.prototype={constructor:He,scale:function(e){return 1===e?this:new He(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new He(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vt=new He(1,0,0);function Tn(e){e.stopImmediatePropagation()}function xt(e){e.preventDefault(),e.stopImmediatePropagation()}function gu(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function vu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Do(){return this.__zoom||vt}function pu(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function mu(){return navigator.maxTouchPoints||"ontouchstart"in this}function yu(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function _u(){var e=gu,t=vu,n=yu,o=pu,i=mu,r=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Qt,s=vn("start","zoom","end"),c,d,f,h=500,v=150,p=0,g=10;function m(e){e.property("__zoom",Do).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",k).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(r[0],Math.min(r[1],t)))===e.k?e:new He(t,e.x,e.y)}function w(e,t,n){var o=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return o===e.x&&i===e.y?e:new He(e.k,o,i)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,n,o,i){e.on("start.zoom",(function(){_(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).event(i).end()})).tween("zoom",(function(){var e=this,r=arguments,a=_(e,r).event(i),l=t.apply(e,r),s=null==o?x(l):"function"==typeof o?o.apply(e,r):o,c=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),d=e.__zoom,f="function"==typeof n?n.apply(e,r):n,h=u(d.invert(s).concat(c/d.k),f.invert(s).concat(c/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=c/t[2];e=new He(n,s[0]-t[0]*n,s[1]-t[1]*n)}a.zoom(null,e)}}))}function _(e,t,n){return!n&&e.__zooming||new E(e,t)}function E(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=t.apply(e,n),this.taps=0}function S(t,...i){if(e.apply(this,arguments)){var l=_(this,i).event(t),u=this.__zoom,s=Math.max(r[0],Math.min(r[1],u.k*Math.pow(2,o.apply(this,arguments)))),c=Te(t);if(l.wheel)(l.mouse[0][0]!==c[0]||l.mouse[0][1]!==c[1])&&(l.mouse[1]=u.invert(l.mouse[0]=c)),clearTimeout(l.wheel);else{if(u.k===s)return;l.mouse=[c,u.invert(c)],tn(this),l.start()}xt(t),l.wheel=setTimeout(d,v),l.zoom("mouse",n(w(y(u,s),l.mouse[0],l.mouse[1]),l.extent,a))}function d(){l.wheel=null,l.end()}}function N(t,...o){if(!f&&e.apply(this,arguments)){var i=t.currentTarget,r=_(this,o,!0).event(t),l=Ce(t.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",h,!0),u=Te(t,i),s=t.clientX,c=t.clientY;Ei(t.view),Tn(t),r.mouse=[u,this.__zoom.invert(u)],tn(this),r.start()}function d(e){if(xt(e),!r.moved){var t=e.clientX-s,o=e.clientY-c;r.moved=t*t+o*o>p}r.event(e).zoom("mouse",n(w(r.that.__zoom,r.mouse[0]=Te(e,i),r.mouse[1]),r.extent,a))}function h(e){l.on("mousemove.zoom mouseup.zoom",null),Si(e.view,r.moved),xt(e),r.event(e).end()}}function M(o,...i){if(e.apply(this,arguments)){var r=this.__zoom,u=Te(o.changedTouches?o.changedTouches[0]:o,this),s=r.invert(u),c=r.k*(o.shiftKey?.5:2),d=n(w(y(r,c),u,s),t.apply(this,i),a);xt(o),l>0?Ce(this).transition().duration(l).call(b,d,u,o):Ce(this).call(m.transform,d,u,o)}}function k(t,...n){if(e.apply(this,arguments)){var o=t.touches,i=o.length,r=_(this,n,t.changedTouches.length===i).event(t),a,l,u,s;for(Tn(t),l=0;l<i;++l)s=[s=Te(u=o[l],this),this.__zoom.invert(s),u.identifier],r.touch0?!r.touch1&&r.touch0[2]!==s[2]&&(r.touch1=s,r.taps=0):(r.touch0=s,a=!0,r.taps=1+!!c);c&&(c=clearTimeout(c)),a&&(r.taps<2&&(d=s[0],c=setTimeout((function(){c=null}),h)),tn(this),r.start())}}function C(e,...t){if(this.__zooming){var o=_(this,t).event(e),i=e.changedTouches,r=i.length,l,u,s,c;for(xt(e),l=0;l<r;++l)s=Te(u=i[l],this),o.touch0&&o.touch0[2]===u.identifier?o.touch0[0]=s:o.touch1&&o.touch1[2]===u.identifier&&(o.touch1[0]=s);if(u=o.that.__zoom,o.touch1){var d=o.touch0[0],f=o.touch0[1],h=o.touch1[0],v=o.touch1[1],p=(p=h[0]-d[0])*p+(p=h[1]-d[1])*p,g=(g=v[0]-f[0])*g+(g=v[1]-f[1])*g;u=y(u,Math.sqrt(p/g)),s=[(d[0]+h[0])/2,(d[1]+h[1])/2],c=[(f[0]+v[0])/2,(f[1]+v[1])/2]}else{if(!o.touch0)return;s=o.touch0[0],c=o.touch0[1]}o.zoom("touch",n(w(u,s,c),o.extent,a))}}function I(e,...t){if(this.__zooming){var n=_(this,t).event(e),o=e.changedTouches,i=o.length,r,a;for(Tn(e),f&&clearTimeout(f),f=setTimeout((function(){f=null}),h),r=0;r<i;++r)a=o[r],n.touch0&&n.touch0[2]===a.identifier?delete n.touch0:n.touch1&&n.touch1[2]===a.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),2===n.taps&&(a=Te(a,this),Math.hypot(d[0]-a[0],d[1]-a[1])<g)){var l=Ce(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return m.transform=function(e,t,n,o){var i=e.selection?e.selection():e;i.property("__zoom",Do),e!==i?b(e,t,n,o):i.interrupt().each((function(){_(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,o){m.scaleTo(e,(function(){var e,n;return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},m.scaleTo=function(e,o,i,r){m.transform(e,(function(){var e=t.apply(this,arguments),r=this.__zoom,l=null==i?x(e):"function"==typeof i?i.apply(this,arguments):i,u=r.invert(l),s="function"==typeof o?o.apply(this,arguments):o;return n(w(y(r,s),l,u),e,a)}),i,r)},m.translateBy=function(e,o,i,r){m.transform(e,(function(){return n(this.__zoom.translate("function"==typeof o?o.apply(this,arguments):o,"function"==typeof i?i.apply(this,arguments):i),t.apply(this,arguments),a)}),null,r)},m.translateTo=function(e,o,i,r,l){m.transform(e,(function(){var e=t.apply(this,arguments),l=this.__zoom,u=null==r?x(e):"function"==typeof r?r.apply(this,arguments):r;return n(vt.translate(u[0],u[1]).scale(l.k).translate("function"==typeof o?-o.apply(this,arguments):-o,"function"==typeof i?-i.apply(this,arguments):-i),e,a)}),r,l)},E.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Ce(this.that).datum();s.call(e,this.that,new hu(e,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:s}),t)}},m.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:Gt(+e),m):o},m.filter=function(t){return arguments.length?(e="function"==typeof t?t:Gt(!!t),m):e},m.touchable=function(e){return arguments.length?(i="function"==typeof e?e:Gt(!!e),m):i},m.extent=function(e){return arguments.length?(t="function"==typeof e?e:Gt([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):t},m.scaleExtent=function(e){return arguments.length?(r[0]=+e[0],r[1]=+e[1],m):[r[0],r[1]]},m.translateExtent=function(e){return arguments.length?(a[0][0]=+e[0][0],a[1][0]=+e[1][0],a[0][1]=+e[0][1],a[1][1]=+e[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(e){return arguments.length?(n=e,m):n},m.duration=function(e){return arguments.length?(l=+e,m):l},m.interpolate=function(e){return arguments.length?(u=e,m):u},m.on=function(){var e=s.on.apply(s,arguments);return e===s?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}He.prototype;var W=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(W||{}),uo=(e=>(e.Partial="partial",e.Full="full",e))(uo||{}),qe=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(qe||{}),Ze=(e=>(e.Strict="strict",e.Loose="loose",e))(Ze||{}),Kn=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Kn||{}),Ct=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Ct||{});const wu=["INPUT","SELECT","TEXTAREA"],xu=typeof document<"u"?document:null;function qn(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target,i="function"==typeof(null==o?void 0:o.hasAttribute)&&o.hasAttribute("contenteditable"),r="function"==typeof(null==o?void 0:o.closest)?o.closest(".nokey"):null;return wu.includes(null==o?void 0:o.nodeName)||i||!!r}function bu(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function $o(e,t,n,o){const i=t.replace("+","\n").replace("\n\n","\n+").split("\n").map((e=>e.trim().toLowerCase()));if(1===i.length)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const r=i.every(((e,t)=>n.has(e)&&Array.from(n.values())[t]===i[t]));return o&&n.delete(e.toLowerCase()),r}function Eu(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=Su(n.code,e);return Array.isArray(e)?e.some((e=>$o(n[o],e,t,"keyup"===n.type))):$o(n[o],e,t,"keyup"===n.type)}}function Su(e,t){return t.includes(e)?"code":"key"}function Mt(e,t){const n=oe((()=>ae(null==t?void 0:t.target)??xu)),o=nn(!0===ae(e));let i=!1;const r=new Set;let a=u(ae(e));function l(){i=!1,r.clear(),o.value=!0===ae(e)}function u(e){return null===e?(l(),()=>!1):"boolean"==typeof e?(l(),o.value=e,()=>!1):Array.isArray(e)||"string"==typeof e?Eu(e,r):e}return ge((()=>ae(e)),((e,t)=>{"boolean"==typeof t&&"boolean"!=typeof e&&l(),a=u(e)}),{immediate:!0}),ci(["blur","contextmenu"],l),vo(((...e)=>a(...e)),(e=>{var n,r;const a=ae(null==t?void 0:t.actInsideInputWithModifier)??!0,l=ae(null==t?void 0:t.preventDefault)??!1;if(i=bu(e),(!i||i&&!a)&&qn(e))return;const u=(null==(r=null==(n=e.composedPath)?void 0:n.call(e))?void 0:r[0])||e.target,s="BUTTON"===(null==u?void 0:u.nodeName)||"A"===(null==u?void 0:u.nodeName);!l&&(i||!s)&&e.preventDefault(),o.value=!0}),{eventName:"keydown",target:n}),vo(((...e)=>a(...e)),(e=>{const n=ae(null==t?void 0:t.actInsideInputWithModifier)??!0;if(o.value){if((!i||i&&!n)&&qn(e))return;i=!1,o.value=!1}}),{eventName:"keyup",target:n}),o}const Vi="vue-flow__node-desc",Ri="vue-flow__edge-desc",Nu="vue-flow__aria-live",Hi=["Enter"," ","Escape"],ct={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function dn(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function fn(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function _n(e){return{width:e.offsetWidth,height:e.offsetHeight}}function rt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Li(e,t){return{x:rt(e.x,t[0][0],t[1][0]),y:rt(e.y,t[0][1],t[1][1])}}function Ao(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function We(e){return e&&"object"==typeof e&&"id"in e&&"source"in e&&"target"in e}function et(e){return e&&"object"==typeof e&&"id"in e&&"position"in e&&!We(e)}function St(e){return et(e)&&"computedPosition"in e}function Xt(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Cu(e){return Xt(e.width)&&Xt(e.height)&&Xt(e.x)&&Xt(e.y)}function Mu(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:qt({width:0,height:0}),computedPosition:qt({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:xe(e.data)?e.data:{},events:qt(xe(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Fi(e,t,n){var o,i;const r={id:e.id.toString(),type:e.type??(null==t?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:null==(o=e.sourceHandle)?void 0:o.toString(),targetHandle:null==(i=e.targetHandle)?void 0:i.toString(),updatable:e.updatable??(null==n?void 0:n.updatable),selectable:e.selectable??(null==n?void 0:n.selectable),focusable:e.focusable??(null==n?void 0:n.focusable),data:xe(e.data)?e.data:{},events:qt(xe(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(null==n?void 0:n.interactionWidth),...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function Yi(e,t,n,o){const i="string"==typeof e?e:e.id,r=new Set,a="source"===o?"target":"source";for(const l of n)l[a]===i&&r.add(l[o]);return t.filter((e=>r.has(e.id)))}function Iu(...e){if(3===e.length){const[t,n,o]=e;return Yi(t,n,o,"target")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>We(e)&&e.source===o)).map((e=>n.find((t=>et(t)&&t.id===e.target))))}function Pu(...e){if(3===e.length){const[t,n,o]=e;return Yi(t,n,o,"source")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>We(e)&&e.target===o)).map((e=>n.find((t=>et(t)&&t.id===e.source))))}function Gi({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function Tu(e,t){return t.some((t=>We(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))}function At({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Ot({x:e,y:t},{x:n,y:o,zoom:i},r=!1,a=[1,1]){const l={x:(e-n)/i,y:(t-o)/i};return r?wn(l,a):l}function ku(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Xi({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Du({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Ui(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=ku(t,Xi({...o.computedPosition,...o.dimensions}))}return Du(t)}function Zi(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r={...Ot(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const l of e){const{dimensions:e,selectable:t=!0,hidden:n=!1}=l,u=e.width??l.width??null,s=e.height??l.height??null;if(i&&!t||n)continue;const c=fn(r,dn(l)),d=undefined,f=undefined,h=undefined;(null===u||null===s||o&&c>0||c>=(u??0)*(s??0)||l.dragging)&&a.push(l)}return a}function Wi(e,t){const n=new Set;if("string"==typeof e)n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter((e=>n.has(e.source)||n.has(e.target)))}function lt(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=Number.parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Rt(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function $u(e,t,n){if("string"==typeof e||"number"==typeof e){const o=lt(e,n),i=lt(e,t);return{top:o,right:i,bottom:o,left:i,x:2*i,y:2*o}}if("object"==typeof e){const o=lt(e.top??e.y??0,n),i=lt(e.bottom??e.y??0,n),r=lt(e.left??e.x??0,t),a=lt(e.right??e.x??0,t);return{top:o,right:a,bottom:i,left:r,x:r+a,y:o+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Au(e,t,n,o,i,r){const{x:a,y:l}=At(e,{x:t,y:n,zoom:o}),{x:u,y:s}=At({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=i-u,d=r-s;return{left:Math.floor(a),top:Math.floor(l),right:Math.floor(c),bottom:Math.floor(d)}}function Oo(e,t,n,o,i,r=.1){const a=$u(r,t,n),l=(t-a.x)/e.width,u=(n-a.y)/e.height,s=undefined,c=rt(Math.min(l,u),o,i),d=undefined,f=undefined,h=t/2-(e.x+e.width/2)*c,v=n/2-(e.y+e.height/2)*c,p=Au(e,h,v,c,t,n),g=Math.min(p.left-a.left,0),m=Math.min(p.top-a.top,0),y=undefined,w=undefined;return{x:h-g+Math.min(p.right-a.right,0),y:v-m+Math.min(p.bottom-a.bottom,0),zoom:c}}function Ou(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Ki(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return!!n&&(!!n.selected||Ki(n,t))}function zt(e,t){return typeof e>"u"?"":"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}function zo(e){const t=e.ctrlKey&&hn()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t}function Bo(e,t,n){return e<t?rt(Math.abs(e-t),1,t)/t:e>n?-rt(Math.abs(e-n),1,t)/t:0}function qi(e,t,n=15,o=40){const i=undefined,r=undefined;return[Bo(e.x,o,t.width-o)*n,Bo(e.y,o,t.height-o)*n]}function kn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if("function"==typeof t.style?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if("string"==typeof i.width){const e=Number(i.width.replace("px",""));i.width=`${e+n}px`}else i.width+=n;if(o>0)if("string"==typeof i.height){const e=Number(i.height.replace("px",""));i.height=`${e+o}px`}else i.height+=o;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,"string"==typeof i.width){const e=Number(i.width.replace("px",""));i.width=`${e+n}px`}else i.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,"string"==typeof i.height){const e=Number(i.height.replace("px",""));i.height=`${e+n}px`}else i.height+=n;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),"function"==typeof t.style?t.style=e=>{const n=undefined;return{...(0,t.style)(e),...i}}:t.style={...t.style,...i}}}}function Vo(e,t){var n,o;const i=e.filter((e=>"add"===e.type||"remove"===e.type));for(const a of i)if("add"===a.type)-1===t.findIndex((e=>e.id===a.item.id))&&t.push(a.item);else if("remove"===a.type){const e=t.findIndex((e=>e.id===a.id));-1!==e&&t.splice(e,1)}const r=t.map((e=>e.id));for(const a of t)for(const i of e)if(i.id===a.id)switch(i.type){case"select":a.selected=i.selected;break;case"position":if(St(a)&&(typeof i.position<"u"&&(a.position=i.position),typeof i.dragging<"u"&&(a.dragging=i.dragging),a.expandParent&&a.parentNode)){const e=t[r.indexOf(a.parentNode)];e&&St(e)&&kn(a,e)}break;case"dimensions":if(St(a)&&(typeof i.dimensions<"u"&&(a.dimensions=i.dimensions),typeof i.updateStyle<"u"&&i.updateStyle&&(a.style={...a.style||{},width:`${null==(n=i.dimensions)?void 0:n.width}px`,height:`${null==(o=i.dimensions)?void 0:o.height}px`}),typeof i.resizing<"u"&&(a.resizing=i.resizing),a.expandParent&&a.parentNode)){const e=t[r.indexOf(a.parentNode)];e&&St(e)&&(e.dimensions.width&&e.dimensions.height?kn(a,e):Le((()=>{kn(a,e)})))}}return t}function Ge(e,t){return{id:e,type:"select",selected:t}}function Ro(e){return{item:e,type:"add"}}function Ho(e){return{id:e,type:"remove"}}function Lo(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function Xe(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const e=t.has(i);(void 0!==r.selected||e)&&r.selected!==e&&(n&&(r.selected=e),o.push(Ge(r.id,e)))}return o}const Fo=()=>{};function B(e){const t=new Set;let n=Fo,o=()=>!1;const i=()=>t.size>0||o(),r=undefined,a=undefined,l=undefined,u=undefined,s=e=>{t.delete(e)};return{on:e=>{t.add(e);const n=()=>s(e);return Pt(n),{off:n}},off:s,trigger:o=>{const r=[n];return i()?r.push(...t):e&&r.push(e),Promise.allSettled(r.map((e=>e(o))))},hasListeners:i,listeners:t,setEmitter:e=>{n=e},removeEmitter:()=>{n=Fo},setHasEmitListeners:e=>{o=e},removeHasEmitListeners:()=>{o=()=>!1}}}function Yo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function zu(e,t,n,o){var i,r;const a=new Map;for(const[l,u]of e)(u.selected||u.id===o)&&(!u.parentNode||!Ki(u,e))&&(u.draggable||t&&typeof u.draggable>"u")&&e.get(l)&&a.set(l,{id:u.id,position:u.position||{x:0,y:0},distance:{x:n.x-(null==(i=u.computedPosition)?void 0:i.x)||0,y:n.y-(null==(r=u.computedPosition)?void 0:r.y)||0},from:{x:u.computedPosition.x,y:u.computedPosition.y},extent:u.extent,parentNode:u.parentNode,dimensions:{...u.dimensions},expandParent:u.expandParent});return Array.from(a.values())}function Dn({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const e=n(i.id);e&&o.push(e)}return[e?o.find((t=>t.id===e)):o[0],o]}function Ji(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Bu(e,t,n){const[o,i,r,a]="string"!=typeof e?Ji(e.padding):[0,0,0,0];return!!(n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u")&&[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]}function Vu(e,t,n,o){let i=e.extent||n;if("parent"!==i&&(Array.isArray(i)||"parent"!==(null==i?void 0:i.range))||e.expandParent){if(Array.isArray(i)){const e=(null==o?void 0:o.computedPosition.x)||0,t=(null==o?void 0:o.computedPosition.y)||0;i=[[i[0][0]+e,i[0][1]+t],[i[1][0]+e,i[1][1]+t]]}else if("parent"!==i&&null!=i&&i.range&&Array.isArray(i.range)){const[e,t,n,r]=Ji(i.padding),a=(null==o?void 0:o.computedPosition.x)||0,l=(null==o?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+a+r,i.range[0][1]+l+e],[i.range[1][0]+a-t,i.range[1][1]+l-n]]}}else if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const t=Bu(i,e,o);t&&(i=t)}else t(new Ee(be.NODE_EXTENT_INVALID,e.id)),i=n;return"parent"===i?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function Ru({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function co(e,t,n,o,i){const r=undefined,a=Li(t,Ru(e.dimensions,Vu(e,n,o,i)));return{position:{x:a.x-((null==i?void 0:i.computedPosition.x)||0),y:a.y-((null==i?void 0:i.computedPosition.y)||0)},computedPosition:a}}function pt(e,t,n=W.Left,o=!1){const i=((null==t?void 0:t.x)??0)+e.computedPosition.x,r=((null==t?void 0:t.y)??0)+e.computedPosition.y,{width:a,height:l}=t??Yu(e);if(o)return{x:i+a/2,y:r+l/2};switch((null==t?void 0:t.position)??n){case W.Top:return{x:i+a/2,y:r};case W.Right:return{x:i+a,y:r+l/2};case W.Bottom:return{x:i+a/2,y:r+l};case W.Left:return{x:i,y:r+l/2}}}function Go(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function Hu({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:a,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=Xi({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:l/u.zoom}),d=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),f=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(d*f)>0}function Lu(e,t,n=!1){const o="number"==typeof e.zIndex;let i=o?e.zIndex:0;const r=t(e.source),a=t(e.target);return r&&a?(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,a.computedPosition.z||0)),i):0}var be=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(be||{});const Xo={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid\nNode: ${e}`,NODE_NOT_FOUND:e=>`Node not found\nNode: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent\nNode: ${e}\nParent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing\nType: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent\nNode: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target\nEdge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing\nEdge: ${e} \nSource: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing\nEdge: ${e} \nTarget: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing\nType: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed\nEdge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found\nEdge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Ee extends Error{constructor(e,...t){var n;super(null==(n=Xo[e])?void 0:n.call(Xo,...t)),this.name="VueFlowError",this.code=e,this.args=t}}function fo(e){return"clientX"in e}function Fu(e){return"sourceEvent"in e}function De(e,t){const n=undefined;let o,i;return fo(e)?(o=e.clientX,i=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,i=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(o=0,i=0),{x:o-((null==t?void 0:t.left)??0),y:i-((null==t?void 0:t.top)??0)}}const hn=()=>{var e;return typeof navigator<"u"&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0};function Yu(e){var t,n;return{width:(null==(t=e.dimensions)?void 0:t.width)??e.width??0,height:(null==(n=e.dimensions)?void 0:n.height)??e.height??0}}function wn(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const Gu=()=>!0;function $n(e){null==e||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Xu(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const r of t.values())fn(i,dn(r))>0&&o.push(r);return o}const Uu=250;function Zu(e,t,n,o){var i,r;let a=[],l=Number.POSITIVE_INFINITY;const u=Xu(e,n,t+Uu);for(const s of u){const n=[...(null==(i=s.handleBounds)?void 0:i.source)??[],...(null==(r=s.handleBounds)?void 0:r.target)??[]];for(const i of n){if(o.nodeId===i.nodeId&&o.type===i.type&&o.id===i.id)continue;const{x:n,y:r}=pt(s,i,i.position,!0),u=Math.sqrt((n-e.x)**2+(r-e.y)**2);u>t||(u<l?(a=[{...i,x:n,y:r}],l=u):u===l&&a.push({...i,x:n,y:r}))}}if(!a.length)return null;if(a.length>1){const e="source"===o.type?"target":"source";return a.find((t=>t.type===e))??a[0]}return a[0]}function Uo(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:a,lib:l,flowId:u,isValidConnection:s=Gu},c,d,f,h){const v="target"===r,p=t?a.querySelector(`.${l}-flow__handle[data-id="${u}-${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`):null,{x:g,y:m}=De(e),y=a.elementFromPoint(g,m),w=null!=y&&y.classList.contains(`${l}-flow__handle`)?y:p,x={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const e=Qi(void 0,w),t=w.getAttribute("data-nodeid"),r=w.getAttribute("data-handleid"),a=w.classList.contains("connectable"),l=w.classList.contains("connectableend");if(!t||!e)return x;const u={source:v?t:o,sourceHandle:v?r:i,target:v?o:t,targetHandle:v?i:r};x.connection=u;const p=a&&l&&(n===Ze.Strict?v&&"source"===e||!v&&"target"===e:t!==o||r!==i);x.isValid=p&&s(u,{nodes:d,edges:c,sourceNode:f(u.source),targetNode:f(u.target)}),x.toHandle=ji(t,e,r,h,n,!0)}return x}function Qi(e,t){return e||(null!=t&&t.classList.contains("target")?"target":null!=t&&t.classList.contains("source")?"source":null)}function Wu(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Ku(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function ji(e,t,n,o,i,r=!1){var a,l,u;const s=o.get(e);if(!s)return null;const c=i===Ze.Strict?null==(a=s.handleBounds)?void 0:a[t]:[...(null==(l=s.handleBounds)?void 0:l.source)??[],...(null==(u=s.handleBounds)?void 0:u.target)??[]],d=(n?null==c?void 0:c.find((e=>e.id===n)):null==c?void 0:c[0])??null;return d&&r?{...d,...pt(s,d,d.position,!0)}:d}const Jn={[W.Left]:W.Right,[W.Right]:W.Left,[W.Top]:W.Bottom,[W.Bottom]:W.Top},qu=["production","prod"];function Rt(e,...t){er()&&console.warn(`[Vue Flow]: ${e}`,...t)}function er(){return!qu.includes("production")}function Zo(e,t,n,o,i){const r=t.querySelectorAll(`.vue-flow__handle.${e}`);return null!=r&&r.length?Array.from(r).map((t=>{const r=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:i,position:t.getAttribute("data-handlepos"),x:(r.left-n.left)/o,y:(r.top-n.top)/o,..._n(t)}})):null}function Qn(e,t,n,o,i,r=!1,a){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),Le((()=>{a.blur()}))):n([e])}function xe(e){return typeof j(e)<"u"}function Ju(e,t,n,o){if(!e||!e.source||!e.target)return n(new Ee(be.EDGE_INVALID,(null==e?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return i=We(e)?e:{...e,id:Gi(e)},i=Fi(i,void 0,o),!Tu(i,t)&&i}function Qu(e,t,n,o,i){if(!t.source||!t.target)return i(new Ee(be.EDGE_INVALID,e.id)),!1;if(!n)return i(new Ee(be.EDGE_NOT_FOUND,e.id)),!1;const{id:r,...a}=e;return{...a,id:o?Gi(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Wo(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const a=e[r];if(!et(a)){n(new Ee(be.NODE_INVALID,null==a?void 0:a.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const l=Mu(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),i[r]=l}for(const r of i){const e=t(r.parentNode)||i.find((e=>e.id===r.parentNode));r.parentNode&&!e&&n(new Ee(be.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),e&&(e.isParent=!0))}return i}function Ko(e,t,n,o,i,r){let a=i;const l=o.get(a)||new Map;o.set(a,l.set(n,t)),a=`${i}-${e}`;const u=o.get(a)||new Map;if(o.set(a,u.set(n,t)),r){a=`${i}-${e}-${r}`;const l=o.get(a)||new Map;o.set(a,l.set(n,t))}}function An(e,t,n){e.clear();for(const o of n){const{source:t,target:n,sourceHandle:i=null,targetHandle:r=null}=o,a={edgeId:o.id,source:t,target:n,sourceHandle:i,targetHandle:r},l=`${t}-${i}--${n}-${r}`,u=undefined;Ko("source",a,`${n}-${r}--${t}-${i}`,e,t,i),Ko("target",a,l,e,n,r)}}function qo(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function On(e,t,n,o,i,r,a,l){const u=[];for(const s of e){const e=We(s)?s:Ju(s,l,i,r);if(!e)continue;const c=n(e.source),d=n(e.target);if(!c||!d){i(new Ee(be.EDGE_SOURCE_TARGET_MISSING,e.id,e.source,e.target));continue}if(!c){i(new Ee(be.EDGE_SOURCE_MISSING,e.id,e.source));continue}if(!d){i(new Ee(be.EDGE_TARGET_MISSING,e.id,e.target));continue}if(t&&!t(e,{edges:l,nodes:a,sourceNode:c,targetNode:d})){i(new Ee(be.EDGE_INVALID,e.id));continue}const f=o(e.id);u.push({...Fi(e,f,r),sourceNode:c,targetNode:d})}return u}const Jo=Symbol("vueFlow"),tr=Symbol("nodeId"),nr=Symbol("nodeRef"),ju=Symbol("edgeId"),ec=Symbol("edgeRef"),xn=Symbol("slots");function or(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodeLookup:r,nodeExtent:a,nodeDragThreshold:l,viewport:u,autoPanOnNodeDrag:s,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:v,nodesSelectionActive:p,selectNodesOnDrag:g,removeSelectedElements:m,addSelectedNodes:y,updateNodePositions:w,emits:x}=we(),{onStart:b,onDrag:_,onStop:E,onClick:S,el:N,disabled:M,id:k,selectable:C,dragHandle:I}=e,P=nn(!1);let T=[],B,A=null,D={x:void 0,y:void 0},O={x:0,y:0},$=null,z=!1,V=!1,L=0,R=!1;const H=oc(),Y=({x:e,y:t})=>{D={x:e,y:t};let i=!1;if(T=T.map((r=>{const l={x:e-r.distance.x,y:t-r.distance.y},{computedPosition:u}=co(r,n.value?wn(l,o.value):l,x.error,a.value,r.parentNode?h(r.parentNode):void 0);return i=i||r.position.x!==u.x||r.position.y!==u.y,r.position=u,r})),V=V||i,i&&(w(T,!0,!0),P.value=!0,$)){const[e,t]=Dn({id:k,dragItems:T,findNode:h});_({event:$,node:e,nodes:t})}},G=()=>{if(!A)return;const[e,t]=qi(O,A,c.value);if(0!==e||0!==t){const n={x:(D.x??0)-e/u.value.zoom,y:(D.y??0)-t/u.value.zoom};f({x:e,y:t})&&Y(n)}L=requestAnimationFrame(G)},W=(e,t)=>{z=!0;const n=h(k);!g.value&&!v.value&&n&&(n.selected||m()),n&&ae(C)&&g.value&&Qn(n,v.value,y,m,p,!1,t);const o=H(e.sourceEvent);if(D=o,T=zu(r.value,d.value,o,k),T.length){const[t,n]=Dn({id:k,dragItems:T,findNode:h});b({event:e.sourceEvent,node:t,nodes:n})}},j=(e,n)=>{var o;"touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||(V=!1,0===l.value&&W(e,n),D=H(e.sourceEvent),A=(null==(o=t.value)?void 0:o.getBoundingClientRect())||null,O=De(e.sourceEvent,A))},F=(e,t)=>{const n=H(e.sourceEvent);if(!R&&z&&s.value&&(R=!0,G()),!z){const o=n.xSnapped-(D.x??0),i=n.ySnapped-(D.y??0);Math.sqrt(o*o+i*i)>l.value&&W(e,t)}(D.x!==n.xSnapped||D.y!==n.ySnapped)&&T.length&&z&&($=e.sourceEvent,O=De(e.sourceEvent,A),Y(n))},X=e=>{let t=!1;if(!z&&!P.value&&!v.value){const n=e.sourceEvent,o=H(n),i=o.xSnapped-(D.x??0),r=o.ySnapped-(D.y??0),a=Math.sqrt(i*i+r*r);0!==a&&a<=l.value&&(null==S||S(n),t=!0)}if(T.length&&!t){V&&(w(T,!1,!1),V=!1);const[t,n]=Dn({id:k,dragItems:T,findNode:h});E({event:e.sourceEvent,node:t,nodes:n})}T=[],P.value=!1,R=!1,z=!1,D={x:void 0,y:void 0},cancelAnimationFrame(L)};return ge([()=>ae(M),N],(([e,t],n,o)=>{if(t){const n=Ce(t);e||(B=Cl().on("start",(e=>j(e,t))).on("drag",(e=>F(e,t))).on("end",(e=>X(e))).filter((e=>{const n=e.target,o=ae(I);return!e.button&&(!i.value||!Yo(n,`.${i.value}`,t)&&(!o||Yo(n,o,t)))})),n.call(B)),o((()=>{n.on(".drag",null),B&&(B.on("start",null),B.on("drag",null),B.on("end",null))}))}})),P}function tc(){return{doubleClick:B(),click:B(),mouseEnter:B(),mouseMove:B(),mouseLeave:B(),contextMenu:B(),updateStart:B(),update:B(),updateEnd:B()}}function nc(e,t){const n=tc();return n.doubleClick.on((n=>{var o,i;t.edgeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)})),n.click.on((n=>{var o,i;t.edgeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)})),n.mouseEnter.on((n=>{var o,i;t.edgeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)})),n.mouseMove.on((n=>{var o,i;t.edgeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)})),n.mouseLeave.on((n=>{var o,i;t.edgeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)})),n.contextMenu.on((n=>{var o,i;t.edgeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)})),n.updateStart.on((n=>{var o,i;t.edgeUpdateStart(n),null==(i=null==(o=e.events)?void 0:o.updateStart)||i.call(o,n)})),n.update.on((n=>{var o,i;t.edgeUpdate(n),null==(i=null==(o=e.events)?void 0:o.update)||i.call(o,n)})),n.updateEnd.on((n=>{var o,i;t.edgeUpdateEnd(n),null==(i=null==(o=e.events)?void 0:o.updateEnd)||i.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function oc(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=we();return i=>{var r;const a=(null==(r=o.value)?void 0:r.getBoundingClientRect())??{left:0,top:0},l=Fu(i)?i.sourceEvent:i,{x:u,y:s}=De(l,a),c=Ot({x:u,y:s},e.value),{x:d,y:f}=n.value?wn(c,t.value):c;return{xSnapped:d,ySnapped:f,...c}}}function Ut(){return!0}function ir({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:a}){const{id:l,vueFlowRef:u,connectionMode:s,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:v,autoPanSpeed:p,findNode:g,panBy:m,startConnection:y,updateConnection:w,endConnection:x,emits:b,viewport:_,edges:E,nodes:S,isValidConnection:N,nodeLookup:M}=we();let k=null,C=!1,I=null;function P(d){var f;const h="target"===ae(n),P=fo(d),T=Ao(d.target),B=d.currentTarget;if(B&&(P&&0===d.button||!P)){let n=function(n){G=De(n,R),O=Zu(Ot(G,_.value,!1,[1,1]),c.value,M.value,X),j||(F(),j=!0);const o=Uo(n,{handle:O,connectionMode:s.value,fromNodeId:ae(t),fromHandleId:ae(e),fromType:h?"target":"source",isValidConnection:D,doc:T,lib:"vue",flowId:l,nodeLookup:M.value},E.value,S.value,g,M.value);I=o.handleDomNode,k=o.connection,C=Ku(!!O,o.isValid);const i={...K,isValid:C,to:o.toHandle&&C?At({x:o.toHandle.x,y:o.toHandle.y},_.value):G,toHandle:o.toHandle,toPosition:C&&o.toHandle?o.toHandle.position:Jn[X.position],toNode:o.toHandle?M.value.get(o.toHandle.nodeId):null};if(C&&O&&null!=K&&K.toHandle&&i.toHandle&&K.toHandle.type===i.toHandle.type&&K.toHandle.nodeId===i.toHandle.nodeId&&K.toHandle.id===i.toHandle.id&&K.to.x===i.to.x&&K.to.y===i.to.y)return;const r=O??o.toHandle;if(w(r&&C?At({x:r.x,y:r.y},_.value):G,o.toHandle,Wu(!!r,C)),K=i,!O&&!C&&!I)return $n(Y);k&&k.source!==k.target&&I&&($n(Y),Y=I,I.classList.add("connecting","vue-flow__handle-connecting"),I.classList.toggle("valid",!!C),I.classList.toggle("vue-flow__handle-valid",!!C))},P=function(e){"touches"in e&&e.touches.length>0||((O||I)&&k&&C&&(r?r(e,k):b.connect(k)),b.connectEnd(e),i&&(null==a||a(e)),$n(Y),cancelAnimationFrame($),x(e),j=!1,C=!1,k=null,I=null,T.removeEventListener("mousemove",n),T.removeEventListener("mouseup",P),T.removeEventListener("touchmove",n),T.removeEventListener("touchend",P))};const A=g(ae(t));let D=ae(o)||N.value||Ut;!D&&A&&(D=(h?A.isValidSourcePos:A.isValidTargetPos)||Ut);let O,$=0;const{x:z,y:V}=De(d),L=Qi(ae(i),B),R=null==(f=u.value)?void 0:f.getBoundingClientRect();if(!R||!L)return;const H=ji(ae(t),L,ae(e),M.value,s.value);if(!H)return;let Y,G=De(d,R),j=!1;const F=()=>{if(!v.value)return;const[e,t]=qi(G,R,p.value);m({x:e,y:t}),$=requestAnimationFrame(F)},X={...H,nodeId:ae(t),type:L,position:H.position},U=M.value.get(ae(t)),Z={inProgress:!0,isValid:null,from:pt(U,X,W.Left,!0),fromHandle:X,fromPosition:X.position,fromNode:U,to:G,toHandle:null,toPosition:Jn[X.position],toNode:null};y({nodeId:ae(t),id:ae(e),type:L,position:(null==B?void 0:B.getAttribute("data-handlepos"))||W.Top,...G},{x:z-R.left,y:V-R.top}),b.connectStart({event:d,nodeId:ae(t),handleId:ae(e),handleType:L});let K=Z;T.addEventListener("mousemove",n),T.addEventListener("mouseup",P),T.addEventListener("touchmove",n),T.addEventListener("touchend",P)}}function T(i){var r,a;if(!d.value)return;const u="target"===ae(n);if(!f.value)return b.clickConnectStart({event:i,nodeId:ae(t),handleId:ae(e)}),void y({nodeId:ae(t),type:ae(n),id:ae(e),position:W.Top,...De(i)},void 0,!0);let c=ae(o)||N.value||Ut;const v=g(ae(t));if(!c&&v&&(c=(u?v.isValidSourcePos:v.isValidTargetPos)||Ut),v&&!1===(typeof v.connectable>"u"?h.value:v.connectable))return;const p=Ao(i.target),m=Uo(i,{handle:{nodeId:ae(t),id:ae(e),type:ae(n),position:W.Top,...De(i)},connectionMode:s.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:c,doc:p,lib:"vue",flowId:l,nodeLookup:M.value},E.value,S.value,g,M.value),w=(null==(r=m.connection)?void 0:r.source)===(null==(a=m.connection)?void 0:a.target);m.isValid&&m.connection&&!w&&b.connect(m.connection),b.clickConnectEnd(i),x(i,!0)}return{handlePointerDown:P,handleClick:T}}function ic(){return mt(tr,"")}function rr(e){const t=e??ic()??"",n=mt(nr,ye(null)),{findNode:o,edges:i,emits:r}=we(),a=o(t);return a||r.error(new Ee(be.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:oe((()=>o(a.parentNode))),connectedEdges:oe((()=>Wi([a],i.value)))}}function rc(){return{doubleClick:B(),click:B(),mouseEnter:B(),mouseMove:B(),mouseLeave:B(),contextMenu:B(),dragStart:B(),drag:B(),dragStop:B()}}function sc(e,t){const n=rc();return n.doubleClick.on((n=>{var o,i;t.nodeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)})),n.click.on((n=>{var o,i;t.nodeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)})),n.mouseEnter.on((n=>{var o,i;t.nodeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)})),n.mouseMove.on((n=>{var o,i;t.nodeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)})),n.mouseLeave.on((n=>{var o,i;t.nodeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)})),n.contextMenu.on((n=>{var o,i;t.nodeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)})),n.dragStart.on((n=>{var o,i;t.nodeDragStart(n),null==(i=null==(o=e.events)?void 0:o.dragStart)||i.call(o,n)})),n.drag.on((n=>{var o,i;t.nodeDrag(n),null==(i=null==(o=e.events)?void 0:o.drag)||i.call(o,n)})),n.dragStop.on((n=>{var o,i;t.nodeDragStop(n),null==(i=null==(o=e.events)?void 0:o.dragStop)||i.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function sr(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:a,emits:l}=we();return(u,s=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,f=s?4:1,h=u.x*c*f,v=u.y*d*f,p=[];for(const n of e.value)if(n.draggable||a&&typeof n.draggable>"u"){const e={x:n.computedPosition.x+h,y:n.computedPosition.y+v},{computedPosition:i}=co(n,e,l.error,t.value,n.parentNode?o(n.parentNode):void 0);p.push({id:n.id,position:i,from:n.position,distance:{x:u.x,y:u.y},dimensions:n.dimensions})}n(p,!0,!1)}}const Zt=.1,lc=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function Ye(){return Rt("Viewport not initialized yet."),Promise.resolve(!1)}const ac={zoomIn:Ye,zoomOut:Ye,zoomTo:Ye,fitView:Ye,setCenter:Ye,fitBounds:Ye,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Ye,setTransform:Ye,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function uc(e){function t(t,n){return new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate("linear"===(null==n?void 0:n.interpolate)?Nt:Qt).scaleBy(zn(e.d3Selection,null==n?void 0:n.duration,null==n?void 0:n.ease,(()=>{o(!0)})),t):o(!1)}))}function n(t,n,o,i){return new Promise((r=>{var a;const{x:l,y:u}=Li({x:-t,y:-n},e.translateExtent),s=vt.translate(-l,-u).scale(o);e.d3Selection&&e.d3Zoom?null==(a=e.d3Zoom)||a.interpolate("linear"===(null==i?void 0:i.interpolate)?Nt:Qt).transform(zn(e.d3Selection,null==i?void 0:i.duration,null==i?void 0:i.ease,(()=>{r(!0)})),s):r(!1)}))}return oe((()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:e=>t(1.2,e),zoomOut:e=>t(1/1.2,e),zoomTo:(t,n)=>new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate("linear"===(null==n?void 0:n.interpolate)?Nt:Qt).scaleTo(zn(e.d3Selection,null==n?void 0:n.duration,null==n?void 0:n.ease,(()=>{o(!0)})),t):o(!1)})),setViewport:(e,t)=>n(e.x,e.y,e.zoom,t),setTransform:(e,t)=>n(e.x,e.y,e.zoom,t),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(t={padding:Zt,includeHiddenNodes:!1,duration:0})=>{var o,i;const r=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&((null==t?void 0:t.includeHiddenNodes)||!n.hidden)&&(null==(o=t.nodes)||!o.length||null!=(i=t.nodes)&&i.length&&t.nodes.includes(n.id))&&r.push(n);if(!r.length)return Promise.resolve(!1);const a=Ui(r),{x:l,y:u,zoom:s}=Oo(a,e.dimensions.width,e.dimensions.height,t.minZoom??e.minZoom,t.maxZoom??e.maxZoom,t.padding??Zt);return n(l,u,s,t)},setCenter:(t,o,i)=>{const r=typeof(null==i?void 0:i.zoom)<"u"?i.zoom:e.maxZoom,a=undefined,l=undefined;return n(e.dimensions.width/2-t*r,e.dimensions.height/2-o*r,r,i)},fitBounds:(t,o={padding:Zt})=>{const{x:i,y:r,zoom:a}=Oo(t,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,o.padding??Zt);return n(i,r,a,o)},project:t=>Ot(t,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect(),i=undefined;return Ot({x:t.x-n,y:t.y-o},e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect(),i=undefined;return At({x:t.x+n,y:t.y+o},e.viewport)}return{x:0,y:0}}}:ac))}function zn(e,t=0,n=lc,o=()=>{}){const i="number"==typeof t&&t>0;return i||o(),i?e.transition().duration(t).ease(n).on("end",o):e}function cc(e,t,n){const o=ii(!0);return o.run((()=>{const i=undefined,r=()=>{o.run((()=>{let t,o,i=!!n.nodes.value.length;t=st([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setNodes(e),o||i||!e.length?null==o||o.resume():i=!0)})),o=st([n.nodes,()=>n.nodes.value.length],(([n])=>{var o;null!=(o=e.nodes)&&o.value&&Array.isArray(e.nodes.value)&&(null==t||t.pause(),e.nodes.value=[...n],Le((()=>{null==t||t.resume()})))}),{immediate:i}),Kt((()=>{null==t||t.stop(),null==o||o.stop()}))}))},a=()=>{o.run((()=>{let t,o,i=!!n.edges.value.length;t=st([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setEdges(e),o||i||!e.length?null==o||o.resume():i=!0)})),o=st([n.edges,()=>n.edges.value.length],(([n])=>{var o;null!=(o=e.edges)&&o.value&&Array.isArray(e.edges.value)&&(null==t||t.pause(),e.edges.value=[...n],Le((()=>{null==t||t.resume()})))}),{immediate:i}),Kt((()=>{null==t||t.stop(),null==o||o.stop()}))}))},l=()=>{o.run((()=>{ge((()=>t.maxZoom),(()=>{t.maxZoom&&xe(t.maxZoom)&&n.setMaxZoom(t.maxZoom)}),{immediate:!0})}))},u=()=>{o.run((()=>{ge((()=>t.minZoom),(()=>{t.minZoom&&xe(t.minZoom)&&n.setMinZoom(t.minZoom)}),{immediate:!0})}))},s=()=>{o.run((()=>{ge((()=>t.translateExtent),(()=>{t.translateExtent&&xe(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)}),{immediate:!0})}))},c=()=>{o.run((()=>{ge((()=>t.nodeExtent),(()=>{t.nodeExtent&&xe(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)}),{immediate:!0})}))},d=()=>{o.run((()=>{ge((()=>t.applyDefault),(()=>{xe(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),{immediate:!0})}))},f=()=>{o.run((()=>{const e=async e=>{let o=e;"function"==typeof t.autoConnect&&(o=await t.autoConnect(e)),!1!==o&&n.addEdges([o])};ge((()=>t.autoConnect),(()=>{xe(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),{immediate:!0}),ge(n.autoConnect,((t,o,i)=>{t?n.onConnect(e):n.hooks.value.connect.off(e),i((()=>{n.hooks.value.connect.off(e)}))}),{immediate:!0})}))},h=()=>{const e=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const i of Object.keys(t)){const r=i;if(!e.includes(r)){const e=me((()=>t[r])),i=n[r];to(i)&&o.run((()=>{ge(e,(e=>{xe(e)&&(i.value=e)}),{immediate:!0})}))}}};(()=>{o.run((()=>{let t,o,i=!(!n.nodes.value.length&&!n.edges.value.length);t=st([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setElements(e),o||i||!e.length?null==o||o.resume():i=!0)})),o=st([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],(([n,o])=>{var i;null!=(i=e.modelValue)&&i.value&&Array.isArray(e.modelValue.value)&&(null==t||t.pause(),e.modelValue.value=[...n,...o],Le((()=>{null==t||t.resume()})))}),{immediate:i}),Kt((()=>{null==t||t.stop(),null==o||o.stop()}))}))})(),r(),a(),u(),l(),s(),c(),d(),f(),h()})),()=>o.stop()}function dc(){return{edgesChange:B(),nodesChange:B(),nodeDoubleClick:B(),nodeClick:B(),nodeMouseEnter:B(),nodeMouseMove:B(),nodeMouseLeave:B(),nodeContextMenu:B(),nodeDragStart:B(),nodeDrag:B(),nodeDragStop:B(),nodesInitialized:B(),miniMapNodeClick:B(),miniMapNodeDoubleClick:B(),miniMapNodeMouseEnter:B(),miniMapNodeMouseMove:B(),miniMapNodeMouseLeave:B(),connect:B(),connectStart:B(),connectEnd:B(),clickConnectStart:B(),clickConnectEnd:B(),paneReady:B(),init:B(),move:B(),moveStart:B(),moveEnd:B(),selectionDragStart:B(),selectionDrag:B(),selectionDragStop:B(),selectionContextMenu:B(),selectionStart:B(),selectionEnd:B(),viewportChangeStart:B(),viewportChange:B(),viewportChangeEnd:B(),paneScroll:B(),paneClick:B(),paneContextMenu:B(),paneMouseEnter:B(),paneMouseMove:B(),paneMouseLeave:B(),edgeContextMenu:B(),edgeMouseEnter:B(),edgeMouseMove:B(),edgeMouseLeave:B(),edgeDoubleClick:B(),edgeClick:B(),edgeUpdateStart:B(),edgeUpdate:B(),edgeUpdateEnd:B(),updateNodeInternals:B(),error:B((e=>Rt(e.message)))}}function fc(e,t){const n=yt();function o(e){var t;const o=hc(e);return!!(null==(t=null==n?void 0:n.vnode.props)?void 0:t[o])}yr((()=>{for(const[n,i]of Object.entries(t.value)){const t=t=>{e(n,t)};i.setEmitter(t),Pt(i.removeEmitter),i.setHasEmitListeners((()=>o(n))),Pt(i.removeHasEmitListeners)}}))}function hc(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,((e,t)=>t.toUpperCase()))}${n.length?`:${n.join(":")}`:""}`}function lr(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:uo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Ct.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:qe.Bezier,style:{}},connectionMode:Ze.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:hn()?"Meta":"Control",zoomActivationKeyCode:hn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:dc(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const gc=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function vc(e,t,n){const o=uc(e),i=t=>{const n=t??[];e.hooks.updateNodeInternals.trigger(n)},r=undefined,a=undefined,l=t=>Wi(t,e.edges),u=undefined,s=e=>{if(e)return t.value.get(e)},c=e=>{if(e)return n.value.get(e)},d=undefined,f=undefined,h=(o,i)=>{const r=new Set,a=new Set;for(const e of o)et(e)?r.add(e.id):We(e)&&a.add(e.id);const l=Xe(t.value,r,!0),u=Xe(n.value,a);if(e.multiSelectionActive){for(const e of r)l.push(Ge(e,i));for(const e of a)u.push(Ge(e,i))}l.length&&e.hooks.nodesChange.trigger(l),u.length&&e.hooks.edgesChange.trigger(u)},v=undefined,p=undefined,g=undefined,m=undefined,y=undefined,w=undefined,x=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},b=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},_=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},E=undefined,S=undefined,N=undefined,M=t=>{const n=t instanceof Function?t(e.nodes):t;!e.initialized&&!n.length||(e.nodes=Wo(n,s,e.hooks.error.trigger))},k=t=>{const o=t instanceof Function?t(e.edges):t;if(!e.initialized&&!o.length)return;const i=On(o,e.isValidConnection,s,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);An(e.connectionLookup,n.value,i),e.edges=i},C=t=>{const n=t instanceof Function?t([...e.nodes,...e.edges]):t;!e.initialized&&!n.length||(M(n.filter(et)),k(n.filter(We)))},I=undefined,P=undefined,T=undefined,B=undefined,A=(t,o,i=!0)=>{const r=c(t.id);if(!r)return!1;const a=e.edges.indexOf(r),l=Qu(t,o,r,i,e.hooks.error.trigger);if(l){const[t]=On([l],e.isValidConnection,s,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map(((e,n)=>n===a?t:e)),An(e.connectionLookup,n.value,[t]),t}return!1},D=(e,t,n={replace:!1})=>{const o=c(e);if(!o)return;const i="function"==typeof t?t(o):t;o.data=n.replace?i:{...o.data,...i}},O=undefined,$=undefined,z=(t,n,o={replace:!1})=>{const i=s(t);if(!i)return;const r="function"==typeof n?n(i):n;o.replace?e.nodes.splice(e.nodes.indexOf(i),1,r):Object.assign(i,r)},V=(e,t,n={replace:!1})=>{const o=s(e);if(!o)return;const i="function"==typeof t?t(o):t;o.data=n.replace?i:{...o.data,...i}},L=undefined,R=undefined,H=undefined,Y=e=>{const t=Cu(e),n=t?null:St(e)?e:s(e.id);return t||n?[t?e:dn(n),n,t]:[null,null,t]},G=undefined,W=undefined,j=undefined,F=t=>{const n=t instanceof Function?t(e):t,o=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];xe(n.defaultEdgeOptions)&&(e.defaultEdgeOptions=n.defaultEdgeOptions);const i=n.modelValue||n.nodes||n.edges?[]:void 0;i&&(n.modelValue&&i.push(...n.modelValue),n.nodes&&i.push(...n.nodes),n.edges&&i.push(...n.edges),C(i));const r=()=>{xe(n.maxZoom)&&b(n.maxZoom),xe(n.minZoom)&&x(n.minZoom),xe(n.translateExtent)&&_(n.translateExtent)};for(const a of Object.keys(n)){const t=a,i=n[t];![...gc,...o].includes(t)&&xe(i)&&(e[t]=i)}Hn((()=>e.d3Zoom)).not.toBeNull().then(r),e.initialized||(e.initialized=!0)};return{updateNodePositions:(t,n,o)=>{var i,r;const a=[];for(const e of t){const t={id:e.id,type:"position",dragging:o,from:e.from};if(n&&(t.position=e.position,e.parentNode)){const n=s(e.parentNode);t.position={x:t.position.x-((null==(i=null==n?void 0:n.computedPosition)?void 0:i.x)??0),y:t.position.y-((null==(r=null==n?void 0:n.computedPosition)?void 0:r.y)??0)}}a.push(t)}null!=a&&a.length&&e.hooks.nodesChange.trigger(a)},updateNodeDimensions:t=>{if(!e.vueFlowRef)return;const n=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!n)return;const i=window.getComputedStyle(n),{m22:r}=new window.DOMMatrixReadOnly(i.transform),a=[];for(const e of t){const t=e,n=s(t.id);if(n){const e=_n(t.nodeElement);if(e.width&&e.height&&(n.dimensions.width!==e.width||n.dimensions.height!==e.height||t.forceUpdate)){const o=t.nodeElement.getBoundingClientRect();n.dimensions=e,n.handleBounds.source=Zo("source",t.nodeElement,o,r,n.id),n.handleBounds.target=Zo("target",t.nodeElement,o,r,n.id),a.push({id:n.id,type:"dimensions",dimensions:e})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then((()=>{e.fitViewOnInitDone=!0})),a.length&&e.hooks.nodesChange.trigger(a)},setElements:C,setNodes:M,setEdges:k,addNodes:t=>{let n=t instanceof Function?t(e.nodes):t;n=Array.isArray(n)?n:[n];const o=Wo(n,s,e.hooks.error.trigger),i=[];for(const e of o)i.push(Ro(e));i.length&&e.hooks.nodesChange.trigger(i)},addEdges:t=>{let n=t instanceof Function?t(e.edges):t;n=Array.isArray(n)?n:[n];const o=On(n,e.isValidConnection,s,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),i=[];for(const e of o)i.push(Ro(e));i.length&&e.hooks.edgesChange.trigger(i)},removeNodes:(t,n=!0,o=!1)=>{const i=t instanceof Function?t(e.nodes):t,r=Array.isArray(i)?i:[i],a=[],u=[];function c(e){const t=l(e);for(const n of t)(!xe(n.deletable)||n.deletable)&&u.push(Lo(n.id,n.source,n.target,n.sourceHandle,n.targetHandle))}function d(t){const o=[];for(const n of e.nodes)n.parentNode===t&&o.push(n);if(o.length){for(const e of o)a.push(Ho(e.id));n&&c(o);for(const e of o)d(e.id)}}for(const e of r){const t="string"==typeof e?s(e):e;t&&(xe(t.deletable)&&!t.deletable||(a.push(Ho(t.id)),n&&c([t]),o&&d(t.id)))}u.length&&e.hooks.edgesChange.trigger(u),a.length&&e.hooks.nodesChange.trigger(a)},removeEdges:t=>{const n=t instanceof Function?t(e.edges):t,o=Array.isArray(n)?n:[n],i=[];for(const e of o){const t="string"==typeof e?c(e):e;t&&(xe(t.deletable)&&!t.deletable||i.push(Lo("string"==typeof e?e:e.id,t.source,t.target,t.sourceHandle,t.targetHandle)))}e.hooks.edgesChange.trigger(i)},findNode:s,findEdge:c,updateEdge:A,updateEdgeData:D,updateNode:z,updateNodeData:V,applyEdgeChanges:t=>{const o=Vo(t,e.edges);return An(e.connectionLookup,n.value,o),o},applyNodeChanges:t=>Vo(t,e.nodes),addSelectedElements:e=>{h(e,!0)},addSelectedNodes:o=>{if(e.multiSelectionActive){const t=o.map((e=>Ge(e.id,!0)));e.hooks.nodesChange.trigger(t)}else e.hooks.nodesChange.trigger(Xe(t.value,new Set(o.map((e=>e.id))),!0)),e.hooks.edgesChange.trigger(Xe(n.value))},addSelectedEdges:o=>{if(e.multiSelectionActive){const t=o.map((e=>Ge(e.id,!0)));e.hooks.edgesChange.trigger(t)}else e.hooks.edgesChange.trigger(Xe(n.value,new Set(o.map((e=>e.id))))),e.hooks.nodesChange.trigger(Xe(t.value,new Set,!0))},setMinZoom:x,setMaxZoom:b,setTranslateExtent:_,setNodeExtent:t=>{e.nodeExtent=t,i()},setPaneClickDistance:t=>{var n;null==(n=e.d3Zoom)||n.clickDistance(t)},removeSelectedElements:t=>{if(!t||!t.length)return h([],!1);const n=t.reduce(((e,t)=>{const n=Ge(t.id,!1);return et(t)?e.nodes.push(n):e.edges.push(n),e}),{nodes:[],edges:[]});n.nodes.length&&e.hooks.nodesChange.trigger(n.nodes),n.edges.length&&e.hooks.edgesChange.trigger(n.edges)},removeSelectedNodes:t=>{const n=(t||e.nodes).map((e=>(e.selected=!1,Ge(e.id,!1))));e.hooks.nodesChange.trigger(n)},removeSelectedEdges:t=>{const n=(t||e.edges).map((e=>(e.selected=!1,Ge(e.id,!1))));e.hooks.edgesChange.trigger(n)},startConnection:(t,n,o=!1)=>{o?e.connectionClickStartHandle=t:e.connectionStartHandle=t,e.connectionEndHandle=null,e.connectionStatus=null,n&&(e.connectionPosition=n)},updateConnection:(t,n=null,o=null)=>{e.connectionStartHandle&&(e.connectionPosition=t,e.connectionEndHandle=n,e.connectionStatus=o)},endConnection:(t,n)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,n?e.connectionClickStartHandle=null:e.connectionStartHandle=null},setInteractive:t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},setState:F,getIntersectingNodes:(t,n=!0,o=e.nodes)=>{const[i,r,a]=Y(t);if(!i)return[];const l=[];for(const u of o||e.nodes){if(!(a||u.id!==r.id&&u.computedPosition))continue;const e=dn(u),t=fn(e,i);(n&&t>0||t>=e.width*e.height||t>=Number(i.width)*Number(i.height))&&l.push(u)}return l},getIncomers:t=>Pu(t,e.nodes,e.edges),getOutgoers:t=>Iu(t,e.nodes,e.edges),getConnectedEdges:l,getHandleConnections:({id:t,type:n,nodeId:o})=>{var i;const r=t?`-${n}-${t}`:`-${n}`;return Array.from((null==(i=e.connectionLookup.get(`${o}${r}`))?void 0:i.values())??[])},isNodeIntersecting:(e,t,n=!0)=>{const[o]=Y(e);if(!o)return!1;const i=fn(o,t);return n&&i>0||i>=Number(o.width)*Number(o.height)},panBy:t=>{const{viewport:n,dimensions:o,d3Zoom:i,d3Selection:r,translateExtent:a}=e;if(!i||!r||!t.x&&!t.y)return!1;const l=vt.translate(n.x+t.x,n.y+t.y).scale(n.zoom),u=[[0,0],[o.width,o.height]],s=i.constrain()(l,u,a),c=e.viewport.x!==s.x||e.viewport.y!==s.y||e.viewport.zoom!==s.k;return i.transform(r,s),c},fitView:e=>o.value.fitView(e),zoomIn:e=>o.value.zoomIn(e),zoomOut:e=>o.value.zoomOut(e),zoomTo:(e,t)=>o.value.zoomTo(e,t),setViewport:(e,t)=>o.value.setViewport(e,t),setTransform:(e,t)=>o.value.setTransform(e,t),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(e,t,n)=>o.value.setCenter(e,t,n),fitBounds:(e,t)=>o.value.fitBounds(e,t),project:e=>o.value.project(e),screenToFlowCoordinate:e=>o.value.screenToFlowCoordinate(e),flowToScreenCoordinate:e=>o.value.flowToScreenCoordinate(e),toObject:()=>{const t=[],n=[];for(const o of e.nodes){const{computedPosition:e,handleBounds:n,selected:i,dimensions:r,isParent:a,resizing:l,dragging:u,events:s,...c}=o;t.push(c)}for(const o of e.edges){const{selected:e,sourceNode:t,targetNode:i,events:r,...a}=o;n.push(a)}return JSON.parse(JSON.stringify({nodes:t,edges:n,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:t=>new Promise((n=>{const{nodes:i,edges:r,position:a,zoom:l,viewport:u}=t;if(i&&M(i),r&&k(r),null!=u&&u.x&&null!=u&&u.y||a){const t=(null==u?void 0:u.x)||a[0],i=(null==u?void 0:u.y)||a[1],r=(null==u?void 0:u.zoom)||l||e.viewport.zoom;return Hn((()=>o.value.viewportInitialized)).toBe(!0).then((()=>{o.value.setViewport({x:t,y:i,zoom:r}).then((()=>{n(!0)}))}))}n(!0)})),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const t=lr();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const n=vt.translate(t.defaultViewport.x??0,t.defaultViewport.y??0).scale(rt(t.defaultViewport.zoom??1,t.minZoom,t.maxZoom)),o=e.viewportRef.getBoundingClientRect(),i=[[0,0],[o.width,o.height]],r=e.d3Zoom.constrain()(n,i,t.translateExtent);e.d3Zoom.transform(e.d3Selection,r)}F(t)},$destroy:()=>{}}}const pc=["data-id","data-handleid","data-nodeid","data-handlepos"],mc={name:"Handle",compatConfig:{MODE:3}},gn=_e({...mc,props:{id:{default:null},type:{},position:{default:()=>W.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=vr(e,["position","connectable","connectableStart","connectableEnd","id"]),o=me((()=>n.type??"source")),i=me((()=>n.isValidConnection??null)),{id:r,connectionStartHandle:a,connectionClickStartHandle:l,connectionEndHandle:u,vueFlowRef:s,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=we(),{id:h,node:v,nodeEl:p,connectedEdges:g}=rr(),m=ye(),y=me((()=>!(typeof e.connectableStart<"u")||e.connectableStart)),w=me((()=>!(typeof e.connectableEnd<"u")||e.connectableEnd)),x=me((()=>{var t,n,i,r,l,s;return(null==(t=a.value)?void 0:t.nodeId)===h&&(null==(n=a.value)?void 0:n.id)===e.id&&(null==(i=a.value)?void 0:i.type)===o.value||(null==(r=u.value)?void 0:r.nodeId)===h&&(null==(l=u.value)?void 0:l.id)===e.id&&(null==(s=u.value)?void 0:s.type)===o.value})),b=me((()=>{var t,n,i;return(null==(t=l.value)?void 0:t.nodeId)===h&&(null==(n=l.value)?void 0:n.id)===e.id&&(null==(i=l.value)?void 0:i.type)===o.value})),{handlePointerDown:_,handleClick:E}=ir({nodeId:h,handleId:e.id,isValidConnection:i,type:o}),S=oe((()=>"string"==typeof e.connectable&&"single"===e.connectable?!g.value.some((t=>{const n=t[`${o.value}Handle`];return t[o.value]===h&&(!n||n===e.id)})):"number"==typeof e.connectable?g.value.filter((t=>{const n=t[`${o.value}Handle`];return t[o.value]===h&&(!n||n===e.id)})).length<e.connectable:"function"==typeof e.connectable?e.connectable(v,g.value):xe(e.connectable)?e.connectable:c.value));function N(e){const t=fo(e);S.value&&y.value&&(t&&0===e.button||!t)&&_(e)}function M(e){!h||!l.value&&!y.value||S.value&&E(e)}return Ke((()=>{var t;if(!v.dimensions.width||!v.dimensions.height)return;const n=null==(t=v.handleBounds[o.value])?void 0:t.find((t=>t.id===e.id));if(!s.value||n)return;const i=s.value.querySelector(".vue-flow__transformationpane");if(!(p.value&&m.value&&i&&e.id))return;const r=p.value.getBoundingClientRect(),a=m.value.getBoundingClientRect(),l=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(l.transform),c={id:e.id,position:e.position,x:(a.left-r.left)/u,y:(a.top-r.top)/u,type:o.value,nodeId:h,..._n(m.value)};v.handleBounds[o.value]=[...v.handleBounds[o.value]??[],c]})),t({handleClick:E,handlePointerDown:_,onClick:M,onPointerDown:N}),(t,n)=>(fe(),pe("div",{ref_key:"handle",ref:m,"data-id":`${j(r)}-${j(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":j(h),"data-handlepos":t.position,class:It(["vue-flow__handle",[`vue-flow__handle-${t.position}`,`vue-flow__handle-${e.id}`,j(d),j(f),o.value,{connectable:S.value,connecting:b.value,connectablestart:y.value,connectableend:w.value,connectionindicator:S.value&&(y.value&&!x.value||w.value&&x.value)}]]),onMousedown:N,onTouchstartPassive:N,onClick:M},[tt(t.$slots,"default",{id:t.id})],42,pc))}}),bn=function({sourcePosition:e=W.Bottom,targetPosition:t=W.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r,data:a}){const l=a.label??n;return[ve(gn,{type:"target",position:t,connectable:o,isValidConnection:i}),"string"!=typeof l&&l?ve(l):ve(Ae,[l]),ve(gn,{type:"source",position:e,connectable:o,isValidConnection:r})]};bn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"],bn.inheritAttrs=!1,bn.compatConfig={MODE:3};const yc=bn,En=function({targetPosition:e=W.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const r=i.label??t;return[ve(gn,{type:"target",position:e,connectable:n,isValidConnection:o}),"string"!=typeof r&&r?ve(r):ve(Ae,[r])]};En.props=["targetPosition","label","isValidTargetPos","connectable","data"],En.inheritAttrs=!1,En.compatConfig={MODE:3};const _c=En,Sn=function({sourcePosition:e=W.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const r=i.label??t;return["string"!=typeof r&&r?ve(r):ve(Ae,[r]),ve(gn,{type:"source",position:e,connectable:n,isValidConnection:o})]};Sn.props=["sourcePosition","label","isValidSourcePos","connectable","data"],Sn.inheritAttrs=!1,Sn.compatConfig={MODE:3};const wc=Sn,xc=["transform"],bc=["width","height","x","y","rx","ry"],Ec=["y"],Sc={name:"EdgeText",compatConfig:{MODE:3}},Nc=_e({...Sc,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ye({x:0,y:0,width:0,height:0}),n=ye(null),o=oe((()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`));function i(){if(!n.value)return;const e=n.value.getBBox();(e.width!==t.value.width||e.height!==t.value.height)&&(t.value=e)}return Ke(i),ge([()=>e.x,()=>e.y,n,()=>e.label],i),(e,i)=>(fe(),pe("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(fe(),pe("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:Ue(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,bc)):Oe("",!0),nt("text",li(e.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[tt(e.$slots,"default",{},(()=>["string"!=typeof e.label?(fe(),dt(Nr(e.label),{key:0})):(fe(),pe(Ae,{key:1},[Cr(Vn(e.label),1)],64))]))],16,Ec)],8,xc))}}),Cc=["id","d","marker-end","marker-start"],Mc=["d","stroke-width"],Ic={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Nn=_e({...Ic,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ye(null),o=ye(null),i=ye(null),r=Er();return t({pathEl:n,interactionEl:o,labelEl:i}),(e,t)=>(fe(),pe(Ae,null,[nt("path",li(j(r),{id:e.id,ref_key:"pathEl",ref:n,d:e.path,class:"vue-flow__edge-path","marker-end":e.markerEnd,"marker-start":e.markerStart}),null,16,Cc),e.interactionWidth?(fe(),pe("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Mc)):Oe("",!0),e.label&&e.labelX&&e.labelY?(fe(),dt(Nc,{key:1,ref_key:"labelEl",ref:i,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Oe("",!0)],64))}});function ar({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,a=Math.abs(o-t)/2,l=undefined;return[r,o<t?o+a:o-a,i,a]}function ur({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:a,targetControlY:l}){const u=.125*e+.375*i+.375*a+.125*n,s=.125*t+.375*r+.375*l+.125*o,c=undefined,d=undefined;return[u,s,Math.abs(u-e),Math.abs(s-t)]}function Wt(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Qo({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let a,l;switch(e){case W.Left:a=t-Wt(t-o,r),l=n;break;case W.Right:a=t+Wt(o-t,r),l=n;break;case W.Top:a=t,l=n-Wt(n-i,r);break;case W.Bottom:a=t,l=n+Wt(i-n,r)}return[a,l]}function cr(e){const{sourceX:t,sourceY:n,sourcePosition:o=W.Bottom,targetX:i,targetY:r,targetPosition:a=W.Top,curvature:l=.25}=e,[u,s]=Qo({pos:o,x1:t,y1:n,x2:i,y2:r,c:l}),[c,d]=Qo({pos:a,x1:i,y1:r,x2:t,y2:n,c:l}),[f,h,v,p]=ur({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:u,sourceControlY:s,targetControlX:c,targetControlY:d});return[`M${t},${n} C${u},${s} ${c},${d} ${i},${r}`,f,h,v,p]}function jo({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,a;switch(e){case W.Left:case W.Right:r=.5*(t+o),a=n;break;case W.Top:case W.Bottom:r=t,a=.5*(n+i)}return[r,a]}function dr(e){const{sourceX:t,sourceY:n,sourcePosition:o=W.Bottom,targetX:i,targetY:r,targetPosition:a=W.Top}=e,[l,u]=jo({pos:o,x1:t,y1:n,x2:i,y2:r}),[s,c]=jo({pos:a,x1:i,y1:r,x2:t,y2:n}),[d,f,h,v]=ur({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${t},${n} C${l},${u} ${s},${c} ${i},${r}`,d,f,h,v]}const ei={[W.Left]:{x:-1,y:0},[W.Right]:{x:1,y:0},[W.Top]:{x:0,y:-1},[W.Bottom]:{x:0,y:1}};function Pc({source:e,sourcePosition:t=W.Bottom,target:n}){return t===W.Left||t===W.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function ti(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Tc({source:e,sourcePosition:t=W.Bottom,target:n,targetPosition:o=W.Top,center:i,offset:r}){const a=ei[t],l=ei[o],u={x:e.x+a.x*r,y:e.y+a.y*r},s={x:n.x+l.x*r,y:n.y+l.y*r},c=Pc({source:u,sourcePosition:t,target:s}),d=0!==c.x?"x":"y",f=c[d];let h,v,p;const g={x:0,y:0},m={x:0,y:0},[y,w,x,b]=ar({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){v=i.x??y,p=i.y??w;const e=[{x:v,y:u.y},{x:v,y:s.y}],t=[{x:u.x,y:p},{x:s.x,y:p}];h=a[d]===f?"x"===d?e:t:"x"===d?t:e}else{const i=[{x:u.x,y:s.y}],c=[{x:s.x,y:u.y}];if(h="x"===d?a.x===f?c:i:a.y===f?i:c,t===o){const t=Math.abs(e[d]-n[d]);if(t<=r){const o=Math.min(r-1,r-t);a[d]===f?g[d]=(u[d]>e[d]?-1:1)*o:m[d]=(s[d]>n[d]?-1:1)*o}}if(t!==o){const e="x"===d?"y":"x",t=a[d]===l[e],n=u[e]>s[e],o=u[e]<s[e];(1===a[d]&&(!t&&n||t&&o)||1!==a[d]&&(!t&&o||t&&n))&&(h="x"===d?i:c)}const y={x:u.x+g.x,y:u.y+g.y},w={x:s.x+m.x,y:s.y+m.y},x=undefined,b=undefined;Math.max(Math.abs(y.x-h[0].x),Math.abs(w.x-h[0].x))>=Math.max(Math.abs(y.y-h[0].y),Math.abs(w.y-h[0].y))?(v=(y.x+w.x)/2,p=h[0].y):(v=h[0].x,p=(y.y+w.y)/2)}return[[e,{x:u.x+g.x,y:u.y+g.y},...h,{x:s.x+m.x,y:s.y+m.y},n],v,p,x,b]}function kc(e,t,n,o){const i=Math.min(ti(e,t)/2,ti(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return`L${r} ${a}`;if(e.y===a){const t=undefined,o=undefined;return`L ${r+i*(e.x<n.x?-1:1)},${a}Q ${r},${a} ${r},${a+i*(e.y<n.y?1:-1)}`}const l=e.x<n.x?1:-1,u=undefined;return`L ${r},${a+i*(e.y<n.y?-1:1)}Q ${r},${a} ${r+i*l},${a}`}function jn(e){const{sourceX:t,sourceY:n,sourcePosition:o=W.Bottom,targetX:i,targetY:r,targetPosition:a=W.Top,borderRadius:l=5,centerX:u,centerY:s,offset:c=20}=e,[d,f,h,v,p]=Tc({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:a,center:{x:u,y:s},offset:c});return[d.reduce(((e,t,n)=>{let o;return o=n>0&&n<d.length-1?kc(d[n-1],t,d[n+1],l):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),""),f,h,v,p]}function Dc(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,a,l,u]=ar({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,a,l,u]}const $c=_e({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=Dc(e);return ve(Nn,{path:n,labelX:o,labelY:i,...t,...e})}}),Ac=$c,Oc=_e({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=jn({...e,sourcePosition:e.sourcePosition??W.Bottom,targetPosition:e.targetPosition??W.Top});return ve(Nn,{path:n,labelX:o,labelY:i,...t,...e})}}),fr=Oc,zc=_e({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup:(e,{attrs:t})=>()=>ve(fr,{...e,...t,borderRadius:0})}),Bc=zc,Vc=_e({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=cr({...e,sourcePosition:e.sourcePosition??W.Bottom,targetPosition:e.targetPosition??W.Top});return ve(Nn,{path:n,labelX:o,labelY:i,...t,...e})}}),Rc=Vc,Hc=_e({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=dr({...e,sourcePosition:e.sourcePosition??W.Bottom,targetPosition:e.targetPosition??W.Top});return ve(Nn,{path:n,labelX:o,labelY:i,...t,...e})}}),Lc=Hc,Fc={input:wc,default:yc,output:_c},Yc={default:Rc,straight:Ac,step:Bc,smoothstep:fr,simplebezier:Lc};function Gc(e,t,n){const o=oe((()=>e=>t.value.get(e))),i=oe((()=>e=>n.value.get(e))),r=oe((()=>{const t={...Yc,...e.edgeTypes},n=Object.keys(t);for(const o of e.edges)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),a=oe((()=>{const t={...Fc,...e.nodeTypes},n=Object.keys(t);for(const o of e.nodes)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),l=oe((()=>e.onlyRenderVisibleElements?Zi(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes)),u=oe((()=>{if(e.onlyRenderVisibleElements){const n=[];for(const o of e.edges){const i=t.value.get(o.source),r=t.value.get(o.target);Hu({sourcePos:i.computedPosition||{x:0,y:0},targetPos:r.computedPosition||{x:0,y:0},sourceWidth:i.dimensions.width,sourceHeight:i.dimensions.height,targetWidth:r.dimensions.width,targetHeight:r.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&n.push(o)}return n}return e.edges})),s=oe((()=>[...l.value,...u.value])),c=oe((()=>{const t=[];for(const n of e.nodes)n.selected&&t.push(n);return t})),d=oe((()=>{const t=[];for(const n of e.edges)n.selected&&t.push(n);return t})),f=oe((()=>[...c.value,...d.value])),h=oe((()=>{const t=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&void 0!==n.handleBounds&&t.push(n);return t})),v=oe((()=>l.value.length>0&&h.value.length===l.value.length));return{getNode:o,getEdge:i,getElements:s,getEdgeTypes:r,getNodeTypes:a,getEdges:u,getNodes:l,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:v}}class Je{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var e;const t=null==(e=yt())?void 0:e.appContext.app,n=(null==t?void 0:t.config.globalProperties.$vueFlowStorage)??Je.instance;return Je.instance=n??new Je,t&&(t.config.globalProperties.$vueFlowStorage=Je.instance),Je.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const n=lr(),o=wr(n),i={};for(const[d,f]of Object.entries(o.hooks)){const e=undefined;i[`on${d.charAt(0).toUpperCase()+d.slice(1)}`]=f.on}const r={};for(const[d,f]of Object.entries(o.hooks))r[d]=f.trigger;const a=oe((()=>{const e=new Map;for(const t of o.nodes)e.set(t.id,t);return e})),l=oe((()=>{const e=new Map;for(const t of o.edges)e.set(t.id,t);return e})),u=Gc(o,a,l),s=vc(o,a,l);s.setState({...o,...t});const c={...i,...u,...s,...Or(o),nodeLookup:a,edgeLookup:l,emits:r,id:e,vueFlowVersion:"1.47.0",$destroy:()=>{this.remove(e)}};return this.set(e,c),c}getId(){return"vue-flow-"+this.currentId++}}function we(e){const t=Je.getInstance(),n=oi(),o="object"==typeof e,i=o?e:{id:e},r=i.id,a=r??(null==n?void 0:n.vueFlowId);let l;if(n){const e=mt(Jo,null);typeof e<"u"&&null!==e&&(!a||e.id===a)&&(l=e)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const e=r??t.getId(),o=t.create(e,i);l=o,(n??ii(!0)).run((()=>{ge(o.applyDefault,((e,t,n)=>{const i=e=>{o.applyNodeChanges(e)},r=e=>{o.applyEdgeChanges(e)};e?(o.onNodesChange(i),o.onEdgesChange(r)):(o.hooks.value.nodesChange.off(i),o.hooks.value.edgesChange.off(r)),n((()=>{o.hooks.value.nodesChange.off(i),o.hooks.value.edgesChange.off(r)}))}),{immediate:!0}),Pt((()=>{if(l){const e=t.get(l.id);e?e.$destroy():Rt(`No store instance found for id ${l.id} in storage.`)}}))}))}else o&&l.setState(i);if(n&&(ft(Jo,l),n.vueFlowId=l.id),o){const e=yt();"VueFlow"!==(null==e?void 0:e.type.name)&&l.emits.error(new Ee(be.USEVUEFLOW_OPTIONS))}return l}function Xc(e){const{emits:t,dimensions:n}=we();let o;Ke((()=>{const i=()=>{var o,i;if(!e.value||!((null==(i=(o=e.value).checkVisibility)?void 0:i.call(o))??1))return;const r=_n(e.value);(0===r.width||0===r.height)&&t.error(new Ee(be.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:r.width||500,height:r.height||500}};i(),window.addEventListener("resize",i),e.value&&(o=new ResizeObserver((()=>i())),o.observe(e.value)),ri((()=>{window.removeEventListener("resize",i),o&&e.value&&o.unobserve(e.value)}))}))}const Uc={name:"UserSelection",compatConfig:{MODE:3}},Zc=_e({...Uc,props:{userSelectionRect:{}},setup:e=>(e,t)=>(fe(),pe("div",{class:"vue-flow__selection vue-flow__container",style:Ue({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}),Wc=["tabIndex"],Kc={name:"NodesSelection",compatConfig:{MODE:3}},qc=_e({...Kc,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:r,userSelectionActive:a}=we(),l=sr(),u=ye(null),s=or({el:u,onStart(e){t.selectionDragStart(e),t.nodeDragStart(e)},onDrag(e){t.selectionDrag(e),t.nodeDrag(e)},onStop(e){t.selectionDragStop(e),t.nodeDragStop(e)}});Ke((()=>{var e;r.value||null==(e=u.value)||e.focus({preventScroll:!0})}));const c=oe((()=>Ui(o.value))),d=oe((()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`})));function f(e){t.selectionContextMenu({event:e,nodes:o.value})}function h(e){r||ct[e.key]&&(e.preventDefault(),l({x:ct[e.key].x,y:ct[e.key].y},e.shiftKey))}return(e,t)=>!j(a)&&c.value.width&&c.value.height?(fe(),pe("div",{key:0,class:It(["vue-flow__nodesselection vue-flow__container",j(i)]),style:Ue({transform:`translate(${j(n).x}px,${j(n).y}px) scale(${j(n).zoom})`})},[nt("div",{ref_key:"el",ref:u,class:It([{dragging:j(s)},"vue-flow__nodesselection-rect"]),style:Ue(d.value),tabIndex:j(r)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,Wc)],6)):Oe("",!0)}});function Jc(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Qc={name:"Pane",compatConfig:{MODE:3}},jc=_e({...Qc,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:r,removeSelectedElements:a,userSelectionRect:l,elementsSelectable:u,nodesSelectionActive:s,getSelectedEdges:c,getSelectedNodes:d,removeNodes:f,removeEdges:h,selectionMode:v,deleteKeyCode:p,multiSelectionKeyCode:g,multiSelectionActive:m,edgeLookup:y,nodeLookup:w,connectionLookup:x,defaultEdgeOptions:b,connectionStartHandle:_}=we(),E=ye(null),S=ye(new Set),N=ye(new Set),M=ye(),k=me((()=>u.value&&(e.isSelecting||r.value))),C=me((()=>null!==_.value));let I=!1,P=!1;const T=Mt(p,{actInsideInputWithModifier:!1}),B=Mt(g);function A(e,t){return n=>{n.target===t&&(null==e||e(n))}}function D(e){I||C.value?I=!1:(i.paneClick(e),a(),s.value=!1)}function O(e){e.preventDefault(),e.stopPropagation(),i.paneContextMenu(e)}function $(e){i.paneScroll(e)}function z(n){var o,r,s;if(M.value=null==(o=t.value)?void 0:o.getBoundingClientRect(),!u.value||!e.isSelecting||0!==n.button||n.target!==E.value||!M.value)return;null==(s=null==(r=n.target)?void 0:r.setPointerCapture)||s.call(r,n.pointerId);const{x:c,y:d}=Jc(n,M.value);P=!0,I=!1,a(),l.value={width:0,height:0,startX:c,startY:d,x:c,y:d},i.selectionStart(n)}function V(e){var t;if(!M.value||!l.value)return;I=!0;const{x:a,y:u}=De(e,M.value),{startX:c=0,startY:d=0}=l.value,f={startX:c,startY:d,x:a<c?a:c,y:u<d?u:d,width:Math.abs(a-c),height:Math.abs(u-d)},h=S.value,p=N.value;S.value=new Set(Zi(n.value,f,o.value,v.value===uo.Partial,!0).map((e=>e.id))),N.value=new Set;const g=(null==(t=b.value)?void 0:t.selectable)??!0;for(const n of S.value){const e=x.value.get(n);if(e)for(const{edgeId:t}of e.values()){const e=y.value.get(t);e&&(e.selectable??g)&&N.value.add(t)}}if(!qo(h,S.value)){const e=Xe(w.value,S.value,!0);i.nodesChange(e)}if(!qo(p,N.value)){const e=Xe(y.value,N.value);i.edgesChange(e)}l.value=f,r.value=!0,s.value=!1}function L(t){var n;0!==t.button||!P||(null==(n=t.target)||n.releasePointerCapture(t.pointerId),!r.value&&l.value&&t.target===E.value&&D(t),r.value=!1,l.value=null,s.value=S.value.size>0,i.selectionEnd(t),e.selectionKeyPressed&&(I=!1),P=!1)}return ge(T,(e=>{e&&(f(d.value),h(c.value),s.value=!1)})),ge(B,(e=>{m.value=e})),(e,t)=>(fe(),pe("div",{ref_key:"container",ref:E,class:It(["vue-flow__pane vue-flow__container",{selection:e.isSelecting}]),onClick:t[0]||(t[0]=e=>k.value?void 0:A(D,E.value)(e)),onContextmenu:t[1]||(t[1]=e=>A(O,E.value)(e)),onWheelPassive:t[2]||(t[2]=e=>A($,E.value)(e)),onPointerenter:t[3]||(t[3]=e=>k.value?void 0:j(i).paneMouseEnter(e)),onPointerdown:t[4]||(t[4]=e=>k.value?z(e):j(i).paneMouseMove(e)),onPointermove:t[5]||(t[5]=e=>k.value?V(e):j(i).paneMouseMove(e)),onPointerup:t[6]||(t[6]=e=>k.value?L(e):void 0),onPointerleave:t[7]||(t[7]=e=>j(i).paneMouseLeave(e))},[tt(e.$slots,"default"),j(r)&&j(l)?(fe(),dt(Zc,{key:0,"user-selection-rect":j(l)},null,8,["user-selection-rect"])):Oe("",!0),j(s)&&j(d).length?(fe(),dt(qc,{key:1})):Oe("",!0)],34))}}),ed={name:"Transform",compatConfig:{MODE:3}},td=_e({...ed,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=we(),i=oe((()=>!!n.value&&!o.value)),r=oe((()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`));return(e,t)=>(fe(),pe("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ue({transform:r.value,opacity:i.value?0:void 0})},[tt(e.$slots,"default")],4))}}),nd={name:"Viewport",compatConfig:{MODE:3}},od=_e({...nd,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:r,selectionKeyCode:a,panActivationKeyCode:l,panOnScroll:u,panOnScrollMode:s,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:v,preventScrolling:p,noWheelClassName:g,noPanClassName:m,emits:y,connectionStartHandle:w,userSelectionActive:x,paneDragging:b,d3Zoom:_,d3Selection:E,d3ZoomHandler:S,viewport:N,viewportRef:M,paneClickDistance:k}=we();Xc(M);const C=nn(!1),I=nn(!1);let P=null,T=!1,B=0,A={x:0,y:0,zoom:0};const D=Mt(l),O=Mt(a),$=Mt(r),z=me((()=>(!O.value||O.value&&!0===a.value)&&(D.value||d.value))),V=me((()=>D.value||u.value)),L=me((()=>O.value||!0===a.value&&!0!==z.value)),R=me((()=>null!==w.value));function H(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)}function Y(e,t){return e.x!==t.x&&!Number.isNaN(t.x)||e.y!==t.y&&!Number.isNaN(t.y)||e.zoom!==t.k&&!Number.isNaN(t.k)}function G(e){return{x:e.x,y:e.y,zoom:e.k}}function W(e,t){return e.target.closest(`.${t}`)}return Ke((()=>{if(!M.value)return void Rt("Viewport element is missing");const e=M.value,r=e.getBoundingClientRect(),l=_u().clickDistance(k.value).scaleExtent([t.value,n.value]).translateExtent(i.value),w=Ce(e).call(l),O=w.on("wheel.zoom"),L=vt.translate(o.value.x??0,o.value.y??0).scale(rt(o.value.zoom??1,t.value,n.value)),j=[[0,0],[r.width,r.height]],F=l.constrain()(L,j,i.value);l.transform(w,F),l.wheelDelta(zo),_.value=l,E.value=w,S.value=O,N.value={x:F.x,y:F.y,zoom:F.k},l.on("start",(e=>{var t;if(!e.sourceEvent)return null;B=e.sourceEvent.button,C.value=!0;const n=G(e.transform);"mousedown"===(null==(t=e.sourceEvent)?void 0:t.type)&&(b.value=!0),A=n,y.viewportChangeStart(n),y.moveStart({event:e,flowTransform:n})})),l.on("end",(e=>{if(!e.sourceEvent)return null;if(C.value=!1,b.value=!1,H(z.value,B??0)&&!T&&y.paneContextMenu(e.sourceEvent),T=!1,Y(A,e.transform)){const t=G(e.transform);A=t,y.viewportChangeEnd(t),y.moveEnd({event:e,flowTransform:t})}})),l.filter((e=>{var t;const n=$.value||v.value,o=h.value&&e.ctrlKey,i=e.button,r="wheel"===e.type;if(1===i&&"mousedown"===e.type&&(W(e,"vue-flow__node")||W(e,"vue-flow__edge")))return!0;if(!z.value&&!n&&!V.value&&!f.value&&!h.value||x.value||R.value&&!r||!f.value&&"dblclick"===e.type||W(e,g.value)&&r||W(e,m.value)&&(!r||V.value&&r&&!$.value)||!h.value&&e.ctrlKey&&r||!n&&!V.value&&!o&&r)return!1;if(!h&&"touchstart"===e.type&&(null==(t=e.touches)?void 0:t.length)>1)return e.preventDefault(),!1;if(!z.value&&("mousedown"===e.type||"touchstart"===e.type)||!0===a.value&&Array.isArray(d.value)&&d.value.includes(0)&&0===i||Array.isArray(d.value)&&!d.value.includes(i)&&("mousedown"===e.type||"touchstart"===e.type))return!1;const l=Array.isArray(d.value)&&d.value.includes(i)||!0===a.value&&Array.isArray(d.value)&&!d.value.includes(0)||!i||i<=1;return(!e.ctrlKey||D.value||r)&&l})),ge([x,z],(()=>{x.value&&!C.value?l.on("zoom",null):x.value||l.on("zoom",(e=>{N.value={x:e.transform.x,y:e.transform.y,zoom:e.transform.k};const t=G(e.transform);T=H(z.value,B??0),y.viewportChange(t),y.move({event:e,flowTransform:t})}))}),{immediate:!0}),ge([x,V,s,$,h,p,g],(()=>{!V.value||$.value||x.value?typeof O<"u"&&w.on("wheel.zoom",(function(e,t){const n=!p.value&&"wheel"===e.type&&!e.ctrlKey,o=$.value||v.value,i=h.value&&e.ctrlKey;if(!o&&!u.value&&!i&&"wheel"===e.type||n||W(e,g.value))return null;e.preventDefault(),O.call(this,e,t)}),{passive:!1}):w.on("wheel.zoom",(e=>{if(W(e,g.value))return!1;const t=$.value||v.value,n=h.value&&e.ctrlKey;if(p.value&&!V.value&&!t&&!n)return!1;e.preventDefault(),e.stopImmediatePropagation();const o=w.property("__zoom").k||1,i=hn();if(!D.value&&e.ctrlKey&&h.value&&i){const t=Te(e),n=undefined,i=o*2**zo(e);return void l.scaleTo(w,i,t,e)}const r=1===e.deltaMode?20:1;let a=s.value===Ct.Vertical?0:e.deltaX*r,u=s.value===Ct.Horizontal?0:e.deltaY*r;!i&&e.shiftKey&&s.value!==Ct.Vertical&&!a&&u&&(a=u,u=0),l.translateBy(w,-a/o*c.value,-u/o*c.value);const d=G(w.property("__zoom"));P&&clearTimeout(P),I.value?(y.move({event:e,flowTransform:d}),y.viewportChange(d),P=setTimeout((()=>{y.moveEnd({event:e,flowTransform:d}),y.viewportChangeEnd(d),I.value=!1}),150)):(I.value=!0,y.moveStart({event:e,flowTransform:d}),y.viewportChangeStart(d))}),{passive:!1})}),{immediate:!0})})),(e,t)=>(fe(),pe("div",{ref_key:"viewportRef",ref:M,class:"vue-flow__viewport vue-flow__container"},[Re(jc,{"is-selecting":L.value,"selection-key-pressed":j(O),class:It({connecting:R.value,dragging:j(b),draggable:!0===j(d)||Array.isArray(j(d))&&j(d).includes(0)})},{default:Bn((()=>[Re(td,null,{default:Bn((()=>[tt(e.$slots,"default")])),_:3})])),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),id=["id"],rd=["id"],sd=["id"],ld={name:"A11yDescriptions",compatConfig:{MODE:3}},ad=_e({...ld,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=we();return(e,i)=>(fe(),pe(Ae,null,[nt("div",{id:`${j(Vi)}-${j(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Vn(j(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,id),nt("div",{id:`${j(Ri)}-${j(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,rd),j(n)?Oe("",!0):(fe(),pe("div",{key:0,id:`${j(Nu)}-${j(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Vn(j(o)),9,sd))],64))}});function ud(){const e=we();ge((()=>e.viewportHelper.value.viewportInitialized),(t=>{t&&setTimeout((()=>{e.emits.init(e),e.emits.paneReady(e)}),1)}))}function cd(e,t,n){return n===W.Left?e-t:n===W.Right?e+t:e}function dd(e,t,n){return n===W.Top?e-t:n===W.Bottom?e+t:e}const ho=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=W.Top,type:i}){return ve("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:cd(t,e,o),cy:dd(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};ho.props=["radius","centerX","centerY","position","type"],ho.compatConfig={MODE:3};const ni=ho,fd=_e({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:u,removeSelectedEdges:s,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:v,elementsSelectable:p,edgesUpdatable:g,edgesFocusable:m,hooks:y}=we(),w=oe((()=>c(e.id))),{emit:x,on:b}=nc(w.value,r),_=mt(xn),E=yt(),S=ye(!1),N=ye(!1),M=ye(""),k=ye(null),C=ye("source"),I=ye(null),P=me((()=>typeof w.value.selectable>"u"?p.value:w.value.selectable)),T=me((()=>typeof w.value.updatable>"u"?g.value:w.value.updatable)),B=me((()=>typeof w.value.focusable>"u"?m.value:w.value.focusable));ft(ju,e.id),ft(ec,I);const A=oe((()=>w.value.class instanceof Function?w.value.class(w.value):w.value.class)),D=oe((()=>w.value.style instanceof Function?w.value.style(w.value):w.value.style)),O=oe((()=>{const e=w.value.type||"default",t=null==_?void 0:_[`edge-${e}`];if(t)return t;let n=w.value.template??u.value[e];if("string"==typeof n&&E){const t=Object.keys(E.appContext.components);t&&t.includes(e)&&(n=si(e,!1))}return n&&"string"!=typeof n?n:(r.error(new Ee(be.EDGE_TYPE_MISSING,n)),!1)})),{handlePointerDown:$}=ir({nodeId:M,handleId:k,type:C,isValidConnection:f,edgeUpdaterType:C,onEdgeUpdate:L,onEdgeUpdateEnd:R});return()=>{const n=d(w.value.source),a=d(w.value.target),s="pathOptions"in w.value?w.value.pathOptions:{};if(!n&&!a)return r.error(new Ee(be.EDGE_SOURCE_TARGET_MISSING,w.value.id,w.value.source,w.value.target)),null;if(!n)return r.error(new Ee(be.EDGE_SOURCE_MISSING,w.value.id,w.value.source)),null;if(!a)return r.error(new Ee(be.EDGE_TARGET_MISSING,w.value.id,w.value.target)),null;if(!w.value||w.value.hidden||n.hidden||a.hidden)return null;let c;c=o.value===Ze.Strict?n.handleBounds.source:[...n.handleBounds.source||[],...n.handleBounds.target||[]];const f=Go(c,w.value.sourceHandle);let h;h=o.value===Ze.Strict?a.handleBounds.target:[...a.handleBounds.target||[],...a.handleBounds.source||[]];const v=Go(h,w.value.targetHandle),p=(null==f?void 0:f.position)||W.Bottom,g=(null==v?void 0:v.position)||W.Top,{x:m,y:x}=pt(n,f,p),{x:_,y:E}=pt(a,v,g);return w.value.sourceX=m,w.value.sourceY=x,w.value.targetX=_,w.value.targetY=E,ve("g",{ref:I,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${!1===O.value?"default":w.value.type||"default"}`,l.value,A.value,{updating:S.value,selected:w.value.selected,animated:w.value.animated,inactive:!P.value&&!y.value.edgeClick.hasListeners()}],tabIndex:B.value?0:void 0,"aria-label":null===w.value.ariaLabel?void 0:w.value.ariaLabel??`Edge from ${w.value.source} to ${w.value.target}`,"aria-describedby":B.value?`${Ri}-${t}`:void 0,"aria-roledescription":"edge",role:B.value?"group":"img",...w.value.domAttributes,onClick:Y,onContextmenu:G,onDblclick:j,onMouseenter:F,onMousemove:X,onMouseleave:U,onKeyDown:B.value?q:void 0},[N.value?null:ve(!1===O.value?u.value.default:O.value,{id:e.id,sourceNode:n,targetNode:a,source:w.value.source,target:w.value.target,type:w.value.type,updatable:T.value,selected:w.value.selected,animated:w.value.animated,label:w.value.label,labelStyle:w.value.labelStyle,labelShowBg:w.value.labelShowBg,labelBgStyle:w.value.labelBgStyle,labelBgPadding:w.value.labelBgPadding,labelBgBorderRadius:w.value.labelBgBorderRadius,data:w.value.data,events:{...w.value.events,...b},style:D.value,markerStart:`url('#${zt(w.value.markerStart,t)}')`,markerEnd:`url('#${zt(w.value.markerEnd,t)}')`,sourcePosition:p,targetPosition:g,sourceX:m,sourceY:x,targetX:_,targetY:E,sourceHandleId:w.value.sourceHandle,targetHandleId:w.value.targetHandle,interactionWidth:w.value.interactionWidth,...s}),["source"===T.value||!0===T.value?[ve("g",{onMousedown:Z,onMouseenter:z,onMouseout:V},ve(ni,{position:p,centerX:m,centerY:x,radius:i.value,type:"source","data-type":"source"}))]:null,"target"===T.value||!0===T.value?[ve("g",{onMousedown:K,onMouseenter:z,onMouseout:V},ve(ni,{position:g,centerX:_,centerY:E,radius:i.value,type:"target","data-type":"target"}))]:null]])};function z(){S.value=!0}function V(){S.value=!1}function L(e,t){x.update({event:e,edge:w.value,connection:t})}function R(e){x.updateEnd({event:e,edge:w.value}),N.value=!1}function H(e,t){0===e.button&&(N.value=!0,M.value=t?w.value.target:w.value.source,k.value=(t?w.value.targetHandle:w.value.sourceHandle)??null,C.value=t?"target":"source",x.updateStart({event:e,edge:w.value}),$(e))}function Y(e){var t;const o={event:e,edge:w.value};P.value&&(a.value=!1,w.value.selected&&h.value?(s([w.value]),null==(t=I.value)||t.blur()):n([w.value])),x.click(o)}function G(e){x.contextMenu({event:e,edge:w.value})}function j(e){x.doubleClick({event:e,edge:w.value})}function F(e){x.mouseEnter({event:e,edge:w.value})}function X(e){x.mouseMove({event:e,edge:w.value})}function U(e){x.mouseLeave({event:e,edge:w.value})}function Z(e){H(e,!0)}function K(e){H(e,!1)}function q(t){var o;!v.value&&Hi.includes(t.key)&&P.value&&("Escape"===t.key?(null==(o=I.value)||o.blur(),s([c(e.id)])):n([c(e.id)]))}}}),hd=fd,gd=_e({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:r,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:u,connectionStatus:s,viewport:c,findNode:d}=we(),f=null==(e=mt(xn))?void 0:e["connection-line"],h=oe((()=>{var e;return d(null==(e=o.value)?void 0:e.nodeId)})),v=oe((()=>{var e;return d(null==(e=i.value)?void 0:e.nodeId)??null})),p=oe((()=>({x:(r.value.x-c.value.x)/c.value.zoom,y:(r.value.y-c.value.y)/c.value.zoom}))),g=oe((()=>u.value.markerStart?`url(#${zt(u.value.markerStart,t)})`:"")),m=oe((()=>u.value.markerEnd?`url(#${zt(u.value.markerEnd,t)})`:""));return()=>{var e,t,r;if(!h.value||!o.value)return null;const c=o.value.id,d=o.value.type,y=h.value.handleBounds;let w=(null==y?void 0:y[d])??[];if(n.value===Ze.Loose){const e=(null==y?void 0:y["source"===d?"target":"source"])??[];w=[...w,...e]}if(!w)return null;const x=(c?w.find((e=>e.id===c)):w[0])??null,b=(null==x?void 0:x.position)??W.Top,{x:_,y:E}=pt(h.value,x,b);let S=null;v.value&&(S=n.value===Ze.Strict?(null==(e=v.value.handleBounds["source"===d?"target":"source"])?void 0:e.find((e=>{var t;return e.id===(null==(t=i.value)?void 0:t.id)})))||null:(null==(t=[...v.value.handleBounds.source??[],...v.value.handleBounds.target??[]])?void 0:t.find((e=>{var t;return e.id===(null==(t=i.value)?void 0:t.id)})))||null);const N=(null==(r=i.value)?void 0:r.position)??(b?Jn[b]:null);if(!b||!N)return null;const M=a.value??u.value.type??qe.Bezier;let k="";const C={sourceX:_,sourceY:E,sourcePosition:b,targetX:p.value.x,targetY:p.value.y,targetPosition:N};return M===qe.Bezier?[k]=cr(C):M===qe.Step?[k]=jn({...C,borderRadius:0}):M===qe.SmoothStep?[k]=jn(C):M===qe.SimpleBezier?[k]=dr(C):k=`M${_},${E} ${p.value.x},${p.value.y}`,ve("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},ve("g",{class:"vue-flow__connection"},f?ve(f,{sourceX:_,sourceY:E,sourcePosition:b,targetX:p.value.x,targetY:p.value.y,targetPosition:N,sourceNode:h.value,sourceHandle:x,targetNode:v.value,targetHandle:S,markerEnd:m.value,markerStart:g.value,connectionStatus:s.value}):ve("path",{d:k,class:[u.value.class,s.value,"vue-flow__connection-path"],style:{...l.value,...u.value.style},"marker-end":m.value,"marker-start":g.value})))}}}),vd=gd,pd=["id","markerWidth","markerHeight","markerUnits","orient"],md={name:"MarkerType",compatConfig:{MODE:3}},yd=_e({...md,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup:e=>(e,t)=>(fe(),pe("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===j(Kn).ArrowClosed?(fe(),pe("polyline",{key:0,style:Ue({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Oe("",!0),e.type===j(Kn).Arrow?(fe(),pe("polyline",{key:1,style:Ue({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Oe("",!0)],8,pd))}),_d={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},wd={name:"MarkerDefinitions",compatConfig:{MODE:3}},xd=_e({...wd,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=we(),r=oe((()=>{const e=new Set,r=[],a=n=>{if(n){const o=zt(n,t);e.has(o)||("object"==typeof n?r.push({...n,id:o,color:n.color||i.value}):r.push({id:o,color:i.value,type:n}),e.add(o))}};for(const t of[o.value.markerEnd,o.value.markerStart])a(t);for(const t of n.value)for(const e of[t.markerStart,t.markerEnd])a(e);return r.sort(((e,t)=>e.id.localeCompare(t.id)))}));return(e,t)=>(fe(),pe("svg",_d,[nt("defs",null,[(fe(!0),pe(Ae,null,eo(r.value,(e=>(fe(),dt(yd,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"])))),128))])]))}}),bd={name:"Edges",compatConfig:{MODE:3}},Ed=_e({...bd,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=we();return(e,i)=>(fe(),pe(Ae,null,[Re(xd),(fe(!0),pe(Ae,null,eo(j(n),(e=>(fe(),pe("svg",{key:e.id,class:"vue-flow__edges vue-flow__container",style:Ue({zIndex:j(Lu)(e,j(t),j(o))})},[Re(j(hd),{id:e.id},null,8,["id"])],4)))),128)),Re(j(vd))],64))}}),Sd=_e({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:r,emits:a,removeSelectedNodes:l,addSelectedNodes:u,updateNodeDimensions:s,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:v,ariaLiveMessage:p,snapToGrid:g,snapGrid:m,nodeDragThreshold:y,nodesDraggable:w,elementsSelectable:x,nodesConnectable:b,nodesFocusable:_,hooks:E}=we(),S=ye(null);ft(nr,S),ft(tr,e.id);const N=mt(xn),M=yt(),k=sr(),{node:C,parentNode:I}=rr(e.id),{emit:P,on:T}=sc(C,a),B=me((()=>typeof C.draggable>"u"?w.value:C.draggable)),A=me((()=>typeof C.selectable>"u"?x.value:C.selectable)),D=me((()=>typeof C.connectable>"u"?b.value:C.connectable)),O=me((()=>typeof C.focusable>"u"?_.value:C.focusable)),$=oe((()=>A.value||B.value||E.value.nodeClick.hasListeners()||E.value.nodeDoubleClick.hasListeners()||E.value.nodeMouseEnter.hasListeners()||E.value.nodeMouseMove.hasListeners()||E.value.nodeMouseLeave.hasListeners())),z=me((()=>!!C.dimensions.width&&!!C.dimensions.height)),V=oe((()=>{const e=C.type||"default",t=null==N?void 0:N[`node-${e}`];if(t)return t;let n=C.template||d.value[e];if("string"==typeof n&&M){const t=Object.keys(M.appContext.components);t&&t.includes(e)&&(n=si(e,!1))}return n&&"string"!=typeof n?n:(a.error(new Ee(be.NODE_TYPE_MISSING,n)),!1)})),L=or({id:e.id,el:S,disabled:()=>!B.value,selectable:A,dragHandle:()=>C.dragHandle,onStart(e){P.dragStart(e)},onDrag(e){P.drag(e)},onStop(e){P.dragStop(e)},onClick(e){K(e)}}),R=oe((()=>C.class instanceof Function?C.class(C):C.class)),H=oe((()=>{const e=(C.style instanceof Function?C.style(C):C.style)||{},t=C.width instanceof Function?C.width(C):C.width,n=C.height instanceof Function?C.height(C):C.height;return!e.width&&t&&(e.width="string"==typeof t?t:`${t}px`),!e.height&&n&&(e.height="string"==typeof n?n:`${n}px`),e})),Y=me((()=>Number(C.zIndex??H.value.zIndex??0)));return c((t=>{(t.includes(e.id)||!t.length)&&W()})),Ke((()=>{ge((()=>C.hidden),((t=!1,n,o)=>{!t&&S.value&&(e.resizeObserver.observe(S.value),o((()=>{S.value&&e.resizeObserver.unobserve(S.value)})))}),{immediate:!0,flush:"post"})})),ge([()=>C.type,()=>C.sourcePosition,()=>C.targetPosition],(()=>{Le((()=>{s([{id:e.id,nodeElement:S.value,forceUpdate:!0}])}))})),ge([()=>C.position.x,()=>C.position.y,()=>{var e;return null==(e=I.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=I.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=I.value)?void 0:e.computedPosition.z},Y,()=>C.selected,()=>C.dimensions.height,()=>C.dimensions.width,()=>{var e;return null==(e=I.value)?void 0:e.dimensions.height},()=>{var e;return null==(e=I.value)?void 0:e.dimensions.width}],(([e,t,n,o,i,r])=>{const a={x:e,y:t,z:r+(h.value&&C.selected?1e3:0)};C.computedPosition=typeof n<"u"&&typeof o<"u"?Ou({x:n,y:o,z:i},a):a}),{flush:"post",immediate:!0}),ge([()=>C.extent,f],(([e,t],[n,o])=>{(e!==n||t!==o)&&G()})),"parent"===C.extent||"object"==typeof C.extent&&"range"in C.extent&&"parent"===C.extent.range?Hn((()=>z)).toBe(!0).then(G):G(),()=>C.hidden?null:ve("div",{ref:S,"data-id":C.id,class:["vue-flow__node",`vue-flow__node-${!1===V.value?"default":C.type||"default"}`,{[n.value]:B.value,dragging:null==L?void 0:L.value,draggable:B.value,selected:C.selected,selectable:A.value,parent:C.isParent},R.value],style:{visibility:z.value?"visible":"hidden",zIndex:C.computedPosition.z??Y.value,transform:`translate(${C.computedPosition.x}px,${C.computedPosition.y}px)`,pointerEvents:$.value?"all":"none",...H.value},tabIndex:O.value?0:void 0,role:O.value?"group":void 0,"aria-describedby":v.value?void 0:`${Vi}-${t}`,"aria-label":C.ariaLabel,"aria-roledescription":"node",...C.domAttributes,onMouseenter:j,onMousemove:F,onMouseleave:X,onContextmenu:U,onClick:K,onDblclick:Z,onKeydown:q},[ve(!1===V.value?d.value.default:V.value,{id:C.id,type:C.type,data:C.data,events:{...C.events,...T},selected:C.selected,resizing:C.resizing,dragging:L.value,connectable:D.value,position:C.computedPosition,dimensions:C.dimensions,isValidTargetPos:C.isValidTargetPos,isValidSourcePos:C.isValidSourcePos,parent:C.parentNode,parentNodeId:C.parentNode,zIndex:C.computedPosition.z??Y.value,targetPosition:C.targetPosition,sourcePosition:C.sourcePosition,label:C.label,dragHandle:C.dragHandle,onUpdateNodeInternals:W})]);function G(){const e=C.computedPosition,{computedPosition:t,position:n}=co(C,g.value?wn(e,m.value):e,a.error,f.value,I.value);(C.computedPosition.x!==t.x||C.computedPosition.y!==t.y)&&(C.computedPosition={...C.computedPosition,...t}),(C.position.x!==n.x||C.position.y!==n.y)&&(C.position=n)}function W(){S.value&&s([{id:e.id,nodeElement:S.value,forceUpdate:!0}])}function j(e){null!=L&&L.value||P.mouseEnter({event:e,node:C})}function F(e){null!=L&&L.value||P.mouseMove({event:e,node:C})}function X(e){null!=L&&L.value||P.mouseLeave({event:e,node:C})}function U(e){return P.contextMenu({event:e,node:C})}function Z(e){return P.doubleClick({event:e,node:C})}function K(e){A.value&&(!o.value||!B.value||y.value>0)&&Qn(C,r.value,u,l,i,!1,S.value),P.click({event:e,node:C})}function q(e){if(!qn(e)&&!v.value)if(Hi.includes(e.key)&&A.value){const t="Escape"===e.key;Qn(C,r.value,u,l,i,t,S.value)}else B.value&&C.selected&&ct[e.key]&&(e.preventDefault(),p.value=`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~C.position.x}, y: ${~~C.position.y}`,k({x:ct[e.key].x,y:ct[e.key].y},e.shiftKey))}}}),Nd=Sd;function Cd(e={includeHiddenNodes:!1}){const{nodes:t}=we();return oe((()=>{if(0===t.value.length)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(void 0===(null==n?void 0:n.handleBounds)||0===n.dimensions.width||0===n.dimensions.height))return!1;return!0}))}const Md={class:"vue-flow__nodes vue-flow__container"},Id={name:"Nodes",compatConfig:{MODE:3}},Pd=_e({...Id,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=we(),i=Cd(),r=ye();return ge(i,(e=>{e&&Le((()=>{o.nodesInitialized(t.value)}))}),{immediate:!0}),Ke((()=>{r.value=new ResizeObserver((e=>{const t=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));Le((()=>n(t)))}))})),ri((()=>{var e;return null==(e=r.value)?void 0:e.disconnect()})),(e,n)=>(fe(),pe("div",Md,[r.value?(fe(!0),pe(Ae,{key:0},eo(j(t),((e,t,n,o)=>{const i=[e.id];if(o&&o.key===e.id&&_r(o,i))return o;const a=(fe(),dt(j(Nd),{id:e.id,key:e.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return a.memo=i,a}),n,0),128)):Oe("",!0)]))}});function Td(){const{emits:e}=we();Ke((()=>{if(er()){const t=document.querySelector(".vue-flow__pane");t&&"1"!==window.getComputedStyle(t).zIndex&&e.error(new Ee(be.MISSING_STYLES))}}))}const kd=nt("div",{class:"vue-flow__edge-labels"},null,-1),Dd={name:"VueFlow",compatConfig:{MODE:3}},Ad=_e({...Dd,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=pr(),r=Cn(o,"modelValue",n),a=Cn(o,"nodes",n),l=Cn(o,"edges",n),u=we(o),s=cc({modelValue:r,nodes:a,edges:l},o,u);return fc(n,u.hooks),ud(),Td(),ft(xn,i),mr(s),t(u),(e,t)=>(fe(),pe("div",{ref:j(u).vueFlowRef,class:"vue-flow"},[Re(od,null,{default:Bn((()=>[Re(Ed),kd,Re(Pd),tt(e.$slots,"zoom-pane")])),_:3}),tt(e.$slots,"default"),Re(ad)],512))}});export{W as P,gn as _,Ad as a};