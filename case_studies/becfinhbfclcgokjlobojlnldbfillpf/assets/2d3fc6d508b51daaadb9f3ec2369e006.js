import{O as f,g as c,j as d,v as t,q as l,s as b,bJ as U,bB as j,F as _,K as o,G as u,bM as h,n as m,I as w,B as y,W as v,ak as B}from"./71531b053591a96d81db2519a82aa248.js";import{H as M}from"./0f34bc84b746331fb6e6d1a17e2be5f1.js";import{M as I,A as L,a as F,_ as O,C as z}from"./f1cb0a108b35713614332c7c219352b8.js";import"./17e6f969c69a33c57a5b808c30e97817.js";import{A as C}from"./f2694457f4424ded7029976ed34eac38.js";import"./d541e75e0d3013fe2efd3bb1a31c4a6b.js";import"./3f2064fa9a9acc842de50ad820610f4b.js";import"./7e56edcc34c4dfd4bce3410bed0529e6.js";import"./aca89d4ca34e8fbbc6f322cb34935489.js";import"./c12fd3596e1e986fac56d091ec67c779.js";import"./0db5daaf91bdd56249e9ae30e1c0fad3.js";import"./4bf0dc39263bec45ac08f22b6445195f.js";import"./bd5159ed1face2f59751ceb1d07e31f3.js";import"./9f935c62533cde17533373075512c98b.js";import"./22aa1f89111f8237764a195a86dc6791.js";import"./1c66977a9e497032052fc88de8dc0025.js";import"./2eb62d616ebc70b625c1907fb9b56bcb.js";import"./167eb5fb14130edc55e0208b299eb738.js";import"./e43206e4b2ef10bccecb7d9deb74b927.js";import"./39c3d8a964c661ab72f6d2e5dcdb0e9a.js";import"./0a9beade9558a5b904150914951edb50.js";import"./7694ab0a99e001fc6c4a0dff919c3a14.js";import"./c2c13b7def76f5768e17bc73b900b28e.js";import"./9cb1ced478fdea687c5b1bf07fa2b7a3.js";import"./83c6672847a35da18c7c6cd5f39ddc2c.js";import"./8f849a317394192d6541e23f7f7dff92.js";import"./8fd9dd871ac56148ba64599be5846cf8.js";import"./d90a1dadfd9d56c6157b026a43a3acf9.js";import"./be62c323ef7199eed02717bc155004ba.js";import"./dcbabf58cd14346bf8b00e4313a9ce1e.js";const K={extends:L,components:{ModelSelector:I},data:()=>({agent:{},publishStatus:"private",isPublishDropdownOpen:!1,botId:null,knowledge:[],personalization:"",isEditingName:!1,isCreateMode:!1,showUploadModal:!1,showFilesModal:!1,showCodeUploadModal:!1,showAddSkillModal:!1,userFiles:[],selectedFiles:[],fileSearchPage:1,hasMoreFiles:!0,isLoadingFiles:!1}),async mounted(){const t=new URLSearchParams(window.location.search);this.botId=t.get("bot"),this.botId?await this.loadBotData(this.botId):(this.isCreateMode=!0,this.selected_agent={name:"New Agent",description:"",icon:"fa-solid fa-robot",model:"GPT-4o Mini",skill_ids:[],status:"Draft",personalization:""}),this.selected_agent,document.addEventListener("click",this.handleClickOutsidePublishDropdown),this.$nextTick((()=>{const t=this.$refs.personalizationTextarea;t&&this.personalization&&(t.style.height="auto",t.style.height=t.scrollHeight+"px")}))},beforeUnmount(){document.removeEventListener("click",this.handleClickOutsidePublishDropdown)},methods:{async loadBotData(t){try{const a=await F.get(t);a&&(this.agent=a,this.selected_agent=a,this.personalization=a.personalization||"",this.knowledge=a.files||[])}catch(a){console.error("Error loading bot data:",a)}},isSkillSelected(t){return!(!this.selected_agent||!this.selected_agent.skill_ids)&&Object.values(this.selected_agent.skill_ids).includes(t)},toggleSkill(t){this.selected_agent&&(this.selected_agent.skill_ids||(this.selected_agent.skill_ids=[]),this.isSkillSelected(t)?this.selected_agent.skill_ids=this.selected_agent.skill_ids.filter((a=>a!==t)):this.selected_agent.skill_ids.push(t))},updatePersonalization(){this.selected_agent.personalization=this.personalization},async publishAgent(){try{if(!this.botId&&this.isCreateMode)return void(await this.createNewAgent());if(!this.agent||!this.botId)return;this.updatePersonalization();const t={_listkey:this.botId,title:this.selected_agent.title,detail:this.selected_agent.detail,base_model_id:this.selected_agent.base_model_id,skill_ids:this.selected_agent.skill_ids,personalization:this.selected_agent.personalization,icon:this.selected_agent.icon,share_type:this.publishStatus,file_ids:this.knowledge.map((t=>t._listkey))};console.log(t,"updateData"),await F.update(this.botId,t.title,t.detail,t.personalization,t.icon,t.base_model_id,t.share_type,t.skill_ids,t.file_ids),"Market Place"===this.publishStatus&&this.navigateTo("agent_publish_details",{id:this.botId})}catch(t){console.error("Error publishing agent:",t),this.notify&&this.notify.error?this.notify.error(this.__("Failed to update agent. Please try again.")):alert("Failed to update agent. Please try again.")}},async createNewAgent(){try{this.updatePersonalization();const t={title:this.selected_agent.title,base_model_id:this.selected_agent.base_model_id,detail:this.selected_agent.detail,personalization:this.selected_agent.personalization,icon:this.selected_agent.icon,share_type:"Market Place",skill_ids:this.selected_agent.skill_ids||[],file_ids:this.knowledge.map((t=>t._listkey))||[]},a=await F.set(t.title,t.base_model_id,t.detail,t.personalization,t.icon,t.share_type,t.skill_ids,t.file_ids);console.log(a,"result"),a&&a._listkey&&"Market Place"===this.publishStatus&&this.navigateTo("agent_publish_details",{id:a._listkey})}catch(t){console.error("Error creating agent:",t),this.notify&&this.notify.error?this.notify.error(this.__("Failed to create agent. Please try again.")):alert("Failed to create agent. Please try again.")}},toggleNameEdit(){this.isEditingName=!this.isEditingName,this.isEditingName&&this.$nextTick((()=>{const t=document.getElementById("agent-name-input");t&&t.focus()}))},updateAgentName(t){this.selected_agent&&(this.selected_agent.title=t.target.value)},handleNameKeyPress(t){"Enter"===t.key&&this.toggleNameEdit()},toggleUploadModal(){this.showUploadModal=!this.showUploadModal},toggleFilesModal(){this.showFilesModal=!this.showFilesModal,this.showFilesModal&&0===this.userFiles.length&&this.loadUserFiles()},async loadUserFiles(t=!1){if(!this.isLoadingFiles){this.isLoadingFiles=!0;try{let{data:a}=await this.Files.search("",this.fileSearchPage);console.log(a,"files fetched"),a&&0!==a.length?(this.userFiles=t?[...this.userFiles,...a]:a,this.fileSearchPage++):this.hasMoreFiles=!1}catch(a){console.error("Error loading files:",a)}finally{this.isLoadingFiles=!1}}},loadMoreFiles(){this.hasMoreFiles&&!this.isLoadingFiles&&this.loadUserFiles(!0)},toggleFileSelection(t){console.log(t,"fileeeee");const a=this.selectedFiles.findIndex((a=>a._listkey===t._listkey));a>=0?this.selectedFiles.splice(a,1):this.selectedFiles.push(t)},isFileSelected(t){return console.log(t,"fileId1"),this.selectedFiles.some((a=>a._listkey===t))},saveSelectedFiles(){console.log(this.selectedFiles,"selectedFiles"),this.knowledge=[...new Set([...this.knowledge,...this.selectedFiles])],console.log(this.knowledge,"after update knowledge"),this.selectedFiles=[],this.toggleFilesModal()},handleFileUpload(t){const a=t.target.files[0];a&&(this.uploadFile(a),this.notify.success(this.__("We will process and will let you know when it is ready soon.")),this.toggleUploadModal())},async uploadFile(t){try{const a=await this.Files.set(t,null,null);a&&a.id}catch(a){console.error("Error uploading file:",a),this.notify&&this.notify.error&&this.notify.error(this.__("Failed to upload file. Please try again."))}},removeKnowledgeFile(t){this.knowledge=this.knowledge.filter((a=>a!==t.id))},getFileName:t=>(console.log(t,"for filenameeee"),t.title||t._listkey||t.id||"Untitled"),async uploadCode(){this.showCodeUploadModal=!this.showCodeUploadModal},handleCodeFileUpload(t){t.target.files[0]&&(this.showCodeUploadModal=!1)},toggleAddSkillModal(){this.showAddSkillModal=!this.showAddSkillModal},togglePublishDropdown(t){t.stopPropagation(),this.isPublishDropdownOpen=!this.isPublishDropdownOpen},selectPublishStatus(t){this.publishStatus=t,this.isPublishDropdownOpen=!1},handleClickOutsidePublishDropdown(t){const a=this.$refs.publishDropdownContainer;a&&!a.contains(t.target)&&(this.isPublishDropdownOpen=!1)},publishToMarketplace(){this.publishStatus="Market Place",this.publishAgent()}}},G={id:"aitopia-container",class:"full-screen ait-block ait-overflow-y-hidden"},V={class:"ait-w-full ait-bg-[var(--ait-option-card-bg-color)] ait-border-b ait-border-neutral-200 dark:ait-border-neutral-700 ait-px-4 ait-py-2.5 ait-flex ait-items-center ait-justify-between"},H={class:"ait-flex ait-items-center ait-gap-4"},q={class:"ait-flex ait-items-center ait-gap-3"},R={class:"ait-h-8 ait-w-8 ait-bg-neutral-800 ait-rounded-full ait-flex ait-items-center ait-justify-center ait-text-white"},W={class:"ait-flex ait-items-center ait-gap-1.5"},Y=["placeholder"],Z={class:"ait-text-base ait-font-medium"},J={class:"ait-flex ait-items-center ait-gap-4"},Q={key:0,class:"ait-text-sm ait-text-neutral-600 dark:ait-text-neutral-400"},X={class:"ait-relative",ref:"publishDropdownContainer"},$={class:"ait-text-sm ait-font-medium"},tt={key:0,class:"ait-absolute ait-right-0 ait-mt-2 ait-w-40 ait-rounded-md ait-shadow-lg ait-bg-white dark:ait-bg-neutral-800 ait-ring-1 ait-ring-black ait-ring-opacity-5 ait-z-50"},et={class:"ait-py-1"},it={class:"ait-flex ait-items-center ait-gap-2"},at={class:"ait-text-sm ait-font-medium"},st={class:"ait-text-sm ait-font-medium"},ot={class:"ait-text-sm ait-font-medium"},lt={class:"ait-w-full"},rt={class:"ait-container ait-align-top ait-container-md ait-w-full ait-max-w-full"},nt={class:"ait-grid lg:ait-grid-cols-12 ait-grid-cols-2 ait-gap-4 ait-h-[var(--ait-height-94)] ait-h-dvh lg:ait-h-[94vh]"},dt={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-overflow-y-auto ait-flex ait-flex-col"},ct={class:"ait-flex ait-flex-col ait-gap-4 ait-h-full"},ut={class:"ait-flex ait-flex-col ait-gap-2 ait-h-full ait-flex-grow"},ht={class:"ait-flex ait-items-center ait-gap-2"},pt={class:"ait-text-lg ait-font-medium"},gt={class:"ait-text-sm ait-text-neutral-600 dark:ait-text-neutral-400"},ft=["placeholder"],bt={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-overflow-y-auto"},_t={class:"ait-flex ait-flex-col ait-gap-2"},mt={class:"ait-flex ait-items-center ait-justify-between ait-mb-2"},vt={class:"ait-text-lg ait-font-medium"},xt={class:"ait-flex ait-items-center ait-gap-1.5 ait-rounded-md ait-px-2.5 ait-py-1 ait-cursor-pointer ait-transition-colors"},kt={class:"ait-flex ait-flex-col ait-gap-3.5"},wt={class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer ait-py-1 ait-px-1.5 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-rounded-md ait-transition-colors ait-group"},yt={class:"ait-text-sm ait-font-medium"},Ft={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-3"},Ct={class:"ait-text-xs ait-font-medium ait-text-neutral-500 dark:ait-text-neutral-400"},Mt={class:"ait-flex ait-items-start ait-gap-2.5 ait-p-1.5 ait-rounded-md hover:ait-bg-neutral-50 dark:hover:ait-bg-neutral-800 ait-transition-colors"},St={class:"ait-flex ait-flex-col"},Pt={class:"ait-flex ait-items-center ait-gap-1.5"},At={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded-full ait-bg-purple-100 dark:ait-bg-purple-900"},Ut={class:"ait-text-sm"},jt={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-2 ait-mt-1"},zt={class:"ait-text-xs ait-font-medium ait-text-neutral-500 dark:ait-text-neutral-400"},Dt={class:"ait-flex ait-items-center ait-justify-between ait-group ait-px-1.5 ait-py-1 ait-rounded-md hover:ait-bg-neutral-50 dark:hover:ait-bg-neutral-800 ait-transition-colors"},Et=["onClick"],Nt={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded"},Tt=["checked"],Bt={class:"ait-text-sm ait-font-medium"},It={class:"ait-flex ait-items-center ait-gap-1 ait-opacity-0 group-hover:ait-opacity-100 ait-transition-opacity"},Lt={class:"ait-flex ait-justify-center ait-mt-2"},Ot={class:"ait-font-medium"},Kt={class:"ait-flex ait-flex-col ait-gap-3.5 ait-mt-2"},Gt={class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer ait-py-1 ait-px-1.5 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-rounded-md ait-transition-colors ait-group"},Vt={class:"ait-text-sm ait-font-medium"},Ht={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-3"},qt={class:"ait-mt-4 ait-space-y-2"},Rt={key:0,class:"ait-text-center ait-text-sm ait-text-neutral-500 ait-py-3"},Wt={class:"ait-flex ait-items-center ait-gap-2"},Yt={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded ait-bg-blue-100 dark:ait-bg-blue-900"},Zt={class:"ait-text-sm ait-font-medium ait-truncate ait-max-w-[150px]"},Jt=["onClick"],Qt={class:"ait-flex ait-items-center ait-justify-center ait-mt-1"},Xt={class:"ait-font-medium"},$t={class:"ait-font-medium"},te={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-pt-0 ait-overflow-hidden"},ee={key:0,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},ie={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-md ait-mx-4"},ae={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},se={class:"ait-text-xl ait-font-semibold"},oe={class:"ait-p-5 ait-space-y-6"},le={class:"ait-mb-2"},re={class:"ait-text-xs ait-text-neutral-500 ait-mb-4"},ne={class:"ait-cursor-pointer ait-text-white ait-px-6 ait-py-3 ait-rounded-lg ait-bg-[var(--ait-link-color)] hover:ait-opacity-80 ait-transition-colors"},de={class:"ait-text-xs ait-text-neutral-500 ait-mt-4"},ce={key:1,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},ue={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-2xl ait-mx-4"},he={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},pe={class:"ait-text-xl ait-font-semibold"},ge={class:"ait-p-5"},fe={class:"ait-h-96 ait-overflow-y-auto ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-md ait-p-2"},be={key:0,class:"ait-flex ait-items-center ait-justify-center ait-h-full"},_e={key:1,class:"ait-flex ait-flex-col ait-items-center ait-justify-center ait-h-full"},me={class:"ait-text-neutral-500"},ve={key:2,class:"ait-space-y-2"},xe=["onClick"],ke={class:"ait-flex ait-shrink-0 ait-items-center ait-justify-center ait-h-10 ait-w-10 ait-rounded-md ait-bg-blue-100 dark:ait-bg-blue-800"},we={class:"ait-flex ait-flex-col"},ye={class:"ait-text-sm ait-font-medium ait-truncate ait-max-w-[300px]"},Fe={class:"ait-text-xs ait-text-neutral-500"},Ce=["onClick"],Me={key:0,class:"ait-flex ait-justify-center ait-py-2"},Se=["disabled"],Pe={key:0},Ae={key:1},Ue={class:"ait-flex ait-items-center ait-justify-end ait-gap-3 ait-p-5 ait-border-t ait-border-[var(--ait-border-color)]"},je=["disabled"],ze={key:2,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},De={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-md ait-mx-4"},Ee={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},Ne={class:"ait-text-xl ait-font-semibold"},Te={class:"ait-p-5 ait-space-y-6"},Be={class:"ait-mb-2"},Ie={class:"ait-text-xs ait-text-neutral-500 ait-mb-4"},Le={class:"ait-cursor-pointer ait-text-white ait-px-6 ait-py-3 ait-rounded-lg ait-bg-[var(--ait-link-color)] hover:ait-opacity-80 ait-transition-colors"},Oe={class:"ait-text-xs ait-text-neutral-500 ait-mt-4"},Ke={key:3,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},Ge={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-2xl ait-mx-4 ait-max-h-[90vh] ait-overflow-y-auto"},Ve={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},He={class:"ait-flex ait-items-center ait-gap-3"},qe={class:"ait-text-[var(--ait-text-color-secondary)]"},Re={class:"ait-text-xl ait-font-semibold"},We={class:"ait-flex ait-items-center ait-gap-3"},Ye={class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},Ze={class:"ait-p-5 ait-space-y-6"},Je={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},Qe=["placeholder"],Xe={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},$e=["placeholder"],ti={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},ei={class:"ait-flex ait-items-center ait-justify-between ait-p-3 ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700"},ii={class:"ait-flex ait-items-center ait-justify-between ait-mb-2"},ai={class:"ait-text-sm ait-font-medium ait-flex ait-items-center ait-gap-2"},si={class:"ait-text-sm ait-text-[var(--ait-link-color)]"},oi={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},li={class:"ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-lg ait-overflow-hidden"},ri={class:"ait-grid ait-grid-cols-3 ait-bg-neutral-100 dark:ait-bg-neutral-700 ait-p-2 ait-font-medium ait-text-sm"},ni={class:"ait-flex ait-items-center ait-justify-end ait-gap-3 ait-p-5 ait-border-t ait-border-[var(--ait-border-color)]"};function di(a,e,i,s,r,n){var p,g,x;const k=f("font-awesome-icon"),F=f("HoverPopover"),C=f("ModelSelector"),M=f("FullScreenChatSectionForAgents"),S=f("HistorySideBar"),P=f("MakeAReviewModal");return d(),c(_,null,[e[38]||(e[38]=t("link",{href:"https://fonts.googleapis.com/css2?family=Changa:wght@200..800&display=swap",rel:"stylesheet"},null,-1)),t("div",G,[t("div",V,[t("div",H,[l(F,{"popover-text":a.__("Go back")},{default:b((()=>[t("button",{class:"ait-p-1.5 ait-rounded-md hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-transition-colors",onClick:e[0]||(e[0]=t=>this.navigateTo("agents"))},[l(k,{icon:"fa-solid fa-arrow-left",class:"ait-w-5 ait-h-5 ait-text-neutral-600 dark:ait-text-neutral-400"})])])),_:1},8,["popover-text"]),t("div",q,[t("div",R,[l(k,{icon:(null==(p=a.selected_agent)?void 0:p.icon)||"fa-solid fa-robot",class:"ait-w-4 ait-h-4"},null,8,["icon"])]),t("div",W,[r.isEditingName?U((d(),c("input",{key:0,id:"agent-name-input",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>a.selected_agent.title=t),onBlur:e[2]||(e[2]=(...t)=>n.toggleNameEdit&&n.toggleNameEdit(...t)),onKeypress:e[3]||(e[3]=(...t)=>n.handleNameKeyPress&&n.handleNameKeyPress(...t)),class:"ait-text-base ait-font-medium ait-bg-transparent ait-border-b ait-border-[var(--ait-link-color)] ait-outline-none ait-w-full",placeholder:a.__("Enter agent name")},null,40,Y)),[[j,a.selected_agent.title]]):(d(),c(_,{key:1},[t("h1",Z,o((null==(g=a.selected_agent)?void 0:g.title)||"Example Agent"),1),l(F,{"popover-text":a.__("Edit agent name")},{default:b((()=>[l(k,{icon:"fa-solid fa-pen",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-500 hover:ait-text-[var(--ait-link-color)] ait-cursor-pointer",onClick:n.toggleNameEdit},null,8,["onClick"])])),_:1},8,["popover-text"])],64))])])]),t("div",J,["Active"===(null==(x=a.selected_agent)?void 0:x.status)||r.isCreateMode?u("",!0):(d(),c("div",Q,o(a.__("Changes are not published")),1)),t("div",X,[t("button",{onClick:e[4]||(e[4]=(...t)=>n.togglePublishDropdown&&n.togglePublishDropdown(...t)),class:"ait-flex ait-items-center ait-gap-2 ait-px-3 ait-py-1.5 ait-rounded-md ait-border ait-border-neutral-300 dark:ait-border-neutral-600 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700 ait-transition-colors"},[t("span",$,o(a.__(r.publishStatus.charAt(0).toUpperCase()+r.publishStatus.slice(1))),1),l(k,{icon:r.isPublishDropdownOpen?"fa-solid fa-chevron-up":"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3 ait-text-neutral-500"},null,8,["icon"])]),r.isPublishDropdownOpen?(d(),c("div",tt,[t("div",et,[t("a",{href:"#",class:m(["ait-block ait-px-4 ait-py-2 ait-text-sm hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700","private"===r.publishStatus?"ait-font-semibold ait-text-[var(--ait-link-color)]":"ait-text-neutral-700 dark:ait-text-neutral-300"]),onClick:e[5]||(e[5]=h((t=>n.selectPublishStatus("private")),["prevent"]))},o(a.__("Private")),3),t("a",{href:"#",class:m(["ait-block ait-px-4 ait-py-2 ait-text-sm hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700","public"===r.publishStatus?"ait-font-semibold ait-text-[var(--ait-link-color)]":"ait-text-neutral-700 dark:ait-text-neutral-300"]),onClick:e[6]||(e[6]=h((t=>n.selectPublishStatus("public")),["prevent"]))},o(a.__("Public")),3)])])):u("",!0)],512),t("div",it,[t("button",{onClick:e[7]||(e[7]=(...t)=>n.publishToMarketplace&&n.publishToMarketplace(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-px-3.5 ait-py-1.5 ait-rounded-md ait-bg-[var(--ait-link-color)] hover:ait-bg-opacity-90 ait-text-white ait-transition-colors"},[t("span",at,o(a.__("Publish in Marketplace")),1)]),t("button",{onClick:e[8]||(e[8]=(...t)=>n.uploadCode&&n.uploadCode(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-px-3.5 ait-py-1.5 ait-rounded-md ait-bg-[var(--ait-link-color)] hover:ait-bg-opacity-90 ait-text-white ait-transition-colors"},[t("span",st,o(a.__("Upload Your Code")),1)]),t("button",{onClick:e[9]||(e[9]=(...t)=>n.publishAgent&&n.publishAgent(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-px-3.5 ait-py-1.5 ait-rounded-md ait-bg-[var(--ait-link-color)] hover:ait-bg-opacity-90 ait-text-white ait-transition-colors"},[t("span",ot,o(r.isCreateMode?a.__("Create Agent"):a.__("Publish")),1)])])])]),t("div",lt,[t("div",rt,[t("div",nt,[t("div",dt,[t("div",ct,[t("div",ut,[t("div",ht,[t("h2",pt,o(a.__("Personalization")),1),l(F,{"popover-text":a.__("Configure how your assistant behaves and responds")},{default:b((()=>[l(k,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help"})])),_:1},8,["popover-text"])]),t("div",gt,o(a.__("Describe your bot's personality and behavior...")),1),U(t("textarea",{ref:"personalizationTextarea",class:"ait-w-full ait-flex-grow ait-min-h-[200px] ait-p-3 ait-text-sm ait-rounded-md ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)]","onUpdate:modelValue":e[10]||(e[10]=t=>r.personalization=t),onInput:e[11]||(e[11]=t=>{a.Helpers.autoResizeTextarea(t),n.updatePersonalization()}),onFocus:e[12]||(e[12]=t=>a.Helpers.autoResizeTextarea(t)),placeholder:a.__("Describe your bot's personality and behavior...")},null,40,ft),[[j,r.personalization]])])])]),t("div",bt,[t("div",_t,[t("div",mt,[t("h2",vt,o(a.__("Capabilities")),1),t("div",xt,[a.selected_agent?(d(),w(C,{key:0,modelValue:a.selected_agent.base_model_id,"onUpdate:modelValue":e[13]||(e[13]=t=>a.selected_agent.base_model_id=t),type:"text"},null,8,["modelValue"])):u("",!0)])]),t("div",kt,[t("div",wt,[l(k,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3 ait-text-neutral-500 group-hover:ait-text-[var(--ait-link-color)]"}),t("h3",yt,o(a.__("Skills")),1)]),t("div",Ft,[t("div",Ct,o(a.__("Built-in skills")),1),t("div",Mt,[e[31]||(e[31]=t("input",{type:"checkbox",disabled:"",checked:"",class:"ait-mt-0.5 ait-accent-[var(--ait-link-color)] ait-h-4 ait-w-4"},null,-1)),t("div",St,[t("div",Pt,[t("span",At,[l(k,{icon:"fa-solid fa-brain",class:"ait-w-3 ait-h-3 ait-text-purple-600 dark:ait-text-purple-400"})]),t("span",Ut,o(a.__("General Intelligence")),1),l(F,{"popover-text":a.__("Basic reasoning capabilities for conversation and problem-solving")},{default:b((()=>[l(k,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help hover:ait-text-neutral-600 dark:hover:ait-text-neutral-300"})])),_:1},8,["popover-text"])])])])]),t("div",jt,[t("div",zt,o(a.__("Custom skills")),1),(d(!0),c(_,null,y(this.skills,((e,i)=>(d(),c("div",{class:"ait-flex ait-flex-col ait-gap-2 ait-border-b ait-border-neutral-200 dark:ait-border-neutral-700 ait-pb-3.5",key:i},[t("div",Dt,[t("div",{class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer",onClick:t=>n.toggleSkill(e.__listkey||i)},[t("span",Nt,[t("input",{type:"checkbox",checked:n.isSkillSelected(e._listkey||i),class:"ait-mt-0.5 ait-accent-[var(--ait-link-color)] ait-h-4 ait-w-4"},null,8,Tt)]),t("span",Bt,o(a.__(e.title)),1)],8,Et),t("div",It,[l(F,{"popover-text":a.__("Delete this skill")},{default:b((()=>[l(k,{icon:"fa-solid fa-trash",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-pointer hover:ait-text-red-500"})])),_:1},8,["popover-text"])])])])))),128)),t("div",Lt,[t("button",{onClick:e[14]||(e[14]=(...t)=>n.toggleAddSkillModal&&n.toggleAddSkillModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[l(k,{icon:"fa-solid fa-plus",class:"ait-w-3 ait-h-3"}),t("span",Ot,o(a.__("Add Skill")),1)])])])]),t("div",Kt,[t("div",Gt,[l(k,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3 ait-text-neutral-500 group-hover:ait-text-[var(--ait-link-color)]"}),t("h3",Vt,o(a.__("Knowledge")),1),l(F,{"popover-text":a.__("Add documents and websites for your assistant to reference")},{default:b((()=>[l(k,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help hover:ait-text-neutral-600 dark:hover:ait-text-neutral-300"})])),_:1},8,["popover-text"])]),t("div",Ht,[t("div",qt,[0===r.knowledge.length?(d(),c("div",Rt,o(a.__("No knowledge files added yet")),1)):u("",!0),(d(!0),c(_,null,y(r.knowledge,(a=>(d(),c("div",{key:a,class:"ait-flex ait-items-center ait-justify-between ait-p-2 ait-rounded-md ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-group"},[t("div",Wt,[t("span",Yt,[l(k,{icon:"fa-solid fa-file",class:"ait-w-3 ait-h-3 ait-text-blue-600 dark:ait-text-blue-400"})]),t("span",Zt,o(n.getFileName(a)),1)]),t("button",{onClick:t=>n.removeKnowledgeFile(a),class:"ait-text-neutral-400 hover:ait-text-red-500 ait-transition-colors"},[l(k,{icon:"fa-solid fa-trash",class:"ait-w-3.5 ait-h-3.5"})],8,Jt)])))),128))]),t("div",Qt,[t("button",{onClick:e[15]||(e[15]=(...t)=>n.toggleUploadModal&&n.toggleUploadModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[l(k,{icon:"fa-solid fa-plus",class:"ait-w-3 ait-h-3"}),t("span",Xt,o(a.__("Add Knowledge")),1)]),t("button",{onClick:e[16]||(e[16]=(...t)=>n.toggleFilesModal&&n.toggleFilesModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-ml-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[l(k,{icon:"fa-solid fa-folder-open",class:"ait-w-3 ait-h-3"}),t("span",$t,o(a.__("Select From Your Files")),1)])])])])])]),t("div",te,[l(M,{selected_agent:a.selected_agent},null,8,["selected_agent"])]),this.show_history_sidebar?(d(),w(S,{key:0,id:"full-screen-history-sidebar"})):u("",!0)])]),r.showUploadModal?(d(),c("div",ee,[t("div",ie,[t("div",ae,[t("h3",se,o(a.__("Upload Knowledge File")),1),t("button",{onClick:e[17]||(e[17]=(...t)=>n.toggleUploadModal&&n.toggleUploadModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[l(k,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),t("div",oe,[t("div",{class:"ait-border-2 ait-border-dashed ait-rounded-lg ait-p-10 ait-text-center ait-border-neutral-300 dark:ait-border-neutral-700",onDragover:e[19]||(e[19]=h((()=>{}),["prevent"])),onDrop:e[20]||(e[20]=h((t=>{n.uploadFile(t.dataTransfer.files[0]),n.toggleUploadModal()}),["prevent"]))},[l(k,{icon:"fa-solid fa-cloud-upload-alt",class:"ait-w-10 ait-h-10 ait-mb-4 ait-text-neutral-400 ait-mx-auto"}),t("p",le,o(a.__("Drag and drop your file here")),1),t("p",re,o(a.__("or")),1),t("label",ne,[v(o(a.__("Choose File"))+" ",1),t("input",{type:"file",accept:".pdf,.doc,.docx,.xlsx,.xls,.ppt,.pptx",class:"ait-hidden",onChange:e[18]||(e[18]=(...t)=>n.handleFileUpload&&n.handleFileUpload(...t))},null,32)]),t("p",de,o(a.__("Supported formats: PDF, Word, Excel, PowerPoint")),1)],32)])])])):u("",!0),r.showFilesModal?(d(),c("div",ce,[t("div",ue,[t("div",he,[t("h3",pe,o(a.__("Select Knowledge Files")),1),t("button",{onClick:e[21]||(e[21]=(...t)=>n.toggleFilesModal&&n.toggleFilesModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[l(k,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),t("div",ge,[t("div",fe,[r.isLoadingFiles&&0===r.userFiles.length?(d(),c("div",be,e[32]||(e[32]=[t("div",{class:"ait-animate-spin ait-rounded-full ait-h-10 ait-w-10 ait-border-t-2 ait-border-b-2 ait-border-[var(--ait-link-color)]"},null,-1)]))):0===r.userFiles.length?(d(),c("div",_e,[l(k,{icon:"fa-solid fa-folder-open",class:"ait-w-16 ait-h-16 ait-text-neutral-300 ait-mb-4"}),t("p",me,o(a.__("No files found")),1)])):(d(),c("div",ve,[(d(!0),c(_,null,y(r.userFiles,(a=>(d(),c("div",{key:a.id,class:m(["ait-flex ait-items-center ait-justify-between ait-p-3 ait-rounded-md ait-cursor-pointer ait-transition-colors",n.isFileSelected(a._listkey)?"ait-bg-blue-50 dark:ait-bg-blue-900":"ait-bg-neutral-50 dark:ait-bg-neutral-800 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700"])},[t("div",{class:"ait-flex ait-items-center ait-gap-3 ait-flex-1",onClick:t=>n.toggleFileSelection(a)},[t("div",ke,[l(k,{icon:"fa-solid fa-file",class:"ait-w-5 ait-h-5 ait-text-blue-600 dark:ait-text-blue-300"})]),t("div",we,[t("span",ye,o(a.title||a._listkey),1),t("span",Fe,o(a.size?(a.size/1024).toFixed(1)+" KB":""),1)])],8,xe),t("div",{class:"ait-flex-shrink-0",onClick:t=>n.toggleFileSelection(a)},[t("div",{class:m(["ait-w-6 ait-h-6 ait-rounded-full ait-border-2 ait-flex ait-items-center ait-justify-center",n.isFileSelected(a._listkey)?"ait-border-blue-500 ait-bg-blue-500":"ait-border-neutral-300 dark:ait-border-neutral-600"])},[n.isFileSelected(a._listkey)?(d(),w(k,{key:0,icon:"fa-solid fa-check",class:"ait-w-3 ait-h-3 ait-text-white"})):u("",!0)],2)],8,Ce)],2)))),128)),r.hasMoreFiles?(d(),c("div",Me,[t("button",{onClick:e[22]||(e[22]=h(((...t)=>n.loadMoreFiles&&n.loadMoreFiles(...t)),["stop"])),class:"ait-px-4 ait-py-2 ait-text-sm ait-bg-neutral-100 dark:ait-bg-neutral-800 ait-rounded-md hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors",disabled:r.isLoadingFiles},[r.isLoadingFiles?(d(),c("span",Pe,o(a.__("Loading...")),1)):(d(),c("span",Ae,o(a.__("Load More")),1))],8,Se)])):u("",!0)]))])]),t("div",Ue,[t("button",{onClick:e[23]||(e[23]=(...t)=>n.toggleFilesModal&&n.toggleFilesModal(...t)),class:"ait-bg-neutral-100 dark:ait-bg-neutral-800 ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors"},o(a.__("Cancel")),1),t("button",{onClick:e[24]||(e[24]=(...t)=>n.saveSelectedFiles&&n.saveSelectedFiles(...t)),type:"button",class:m(["ait-bg-[var(--ait-link-color)] ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm ait-text-white hover:ait-opacity-90 ait-transition-opacity",0===r.selectedFiles.length?"ait-opacity-50 ait-cursor-not-allowed":""]),disabled:0===r.selectedFiles.length},o(a.__("Add Selected Files")),11,je)])])])):u("",!0),r.showCodeUploadModal?(d(),c("div",ze,[t("div",De,[t("div",Ee,[t("h3",Ne,o(a.__("Upload Your Agent Code")),1),t("button",{onClick:e[25]||(e[25]=(...t)=>n.uploadCode&&n.uploadCode(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[l(k,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),t("div",Te,[t("div",{class:"ait-border-2 ait-border-dashed ait-rounded-lg ait-p-10 ait-text-center ait-border-neutral-300 dark:ait-border-neutral-700",onDragover:e[27]||(e[27]=h((()=>{}),["prevent"])),onDrop:e[28]||(e[28]=h((t=>{r.showCodeUploadModal=!1}),["prevent"]))},[l(k,{icon:"fa-solid fa-code",class:"ait-w-10 ait-h-10 ait-mb-4 ait-text-neutral-400 ait-mx-auto"}),t("p",Be,o(a.__("Drag and drop your code file here")),1),t("p",Ie,o(a.__("or")),1),t("label",Le,[v(o(a.__("Choose File"))+" ",1),t("input",{type:"file",accept:".js,.ts,.py,.html,.css,.php,.java,.c,.cpp,.json",class:"ait-hidden",onChange:e[26]||(e[26]=(...t)=>n.handleCodeFileUpload&&n.handleCodeFileUpload(...t))},null,32)]),t("p",Oe,o(a.__("Supported formats: ZIP, TAR, GZ")),1)],32)])])])):u("",!0),r.showAddSkillModal?(d(),c("div",Ke,[t("div",Ge,[t("div",Ve,[t("div",He,[t("button",qe,[l(k,{icon:"fa-solid fa-arrow-left",class:"ait-w-5 ait-h-5"})]),t("h3",Re,o(a.__("Create Skill")),1)]),t("div",We,[t("button",Ye,[l(k,{icon:"fa-solid fa-circle-question",class:"ait-w-5 ait-h-5"})]),t("button",{onClick:e[29]||(e[29]=(...t)=>n.toggleAddSkillModal&&n.toggleAddSkillModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[l(k,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])])]),t("div",Ze,[t("div",null,[t("label",Je,o(a.__("Skill name")),1),t("input",{type:"text",class:"ait-w-full ait-p-3 ait-text-sm ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)]",placeholder:a.__("Skill name")},null,8,Qe)]),t("div",null,[t("label",Xe,[v(o(a.__("Description"))+" ",1),e[33]||(e[33]=t("span",{class:"ait-text-red-500"},"*",-1))]),t("textarea",{class:"ait-w-full ait-p-3 ait-text-sm ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)] ait-min-h-[100px]",placeholder:a.__("Describe the skill's functions and purpose")},null,8,$e)]),t("div",null,[t("label",ti,o(a.__("Auth")),1),t("div",ei,[e[34]||(e[34]=t("span",null,"None",-1)),l(k,{icon:"fa-solid fa-sliders-h",class:"ait-w-5 ait-h-5 ait-text-neutral-400"})])]),t("div",null,[t("div",ii,[t("label",ai,[v(o(a.__("Schema"))+" ",1),l(k,{icon:"fa-solid fa-circle-info",class:"ait-w-4 ait-h-4 ait-text-neutral-400"})]),t("button",si,[v(o(a.__("Example"))+" ",1),l(k,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3"})])]),e[35]||(e[35]=t("textarea",{class:"ait-w-full ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-lg ait-p-3 ait-font-mono ait-text-sm ait-whitespace-pre ait-overflow-auto ait-max-h-[200px]",rows:"6"},'            {\n            "openapi": "3.1.0",\n            "info": {\n            "title": "GetWeather",\n            "description": "Retrieve current weather information based on location name, postal code, coordinates, or IP\n            address",\n            "version": "v1.0.0"\n            },\n            "servers": [\n            {\n            "url": "https://a.gapier.com"\n            }\n            ],\n            "paths": {\n            "/api/v1/weather": {\n            "get": {\n            "operationId": "GetWeather",\n            "description": "GetWeather",\n            "deprecated": false,\n            "parameters": [\n            {\n            "name": "query",\n            "in": "query",\n            "required": true,\n            "description": "The query parameter. Can be a location name (e.g., \'New York\'), UK/Canada/US ZIP code (e.g.,\n            \'99501\'), coordinates (latitude/longitude, e.g., \'40.7831,-73.9712\').",\n            "schema": {\n            "type": "string"\n            }\n            }\n            ]\n            }\n            }\n            }\n            }',-1))]),t("div",null,[t("label",oi,o(a.__("Available Actions")),1),t("div",li,[t("div",ri,[t("div",null,o(a.__("Name")),1),t("div",null,o(a.__("Method")),1),t("div",null,o(a.__("Path")),1)]),e[36]||(e[36]=t("div",{class:"ait-grid ait-grid-cols-3 ait-p-2 ait-text-sm ait-border-t ait-border-neutral-200 dark:ait-border-neutral-700"},[t("div",null,"GetWeather"),t("div",null,"GET"),t("div",null,"/api/v1/weather")],-1))])])]),t("div",ni,[t("button",{class:"ait-bg-[var(--ait-link-color)] ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm ait-text-white hover:ait-opacity-90 ait-transition-opacity ait-ml-auto",onClick:e[30]||(e[30]=(...t)=>n.toggleAddSkillModal&&n.toggleAddSkillModal(...t))},o(a.__("Create")),1)])])])):u("",!0),e[37]||(e[37]=t("textarea",{id:"ait_clipboard",style:{position:"fixed",bottom:"-10px","z-index":"-1",height:"1px",width:"1px","font-size":"0.1px"}},null,-1)),l(P)])])],64)}const ci=O(K,[["render",di]]);M.setSidebar(),M.addLoading();const k=B(ci,{type:"FullScreen"});if(Object.keys(z).forEach((t=>{k.component(t,z[t])})),window.aiVueApp=k,k.mount("#aitopia-full"),C){let t=Object.keys(C);t&&t.forEach((t=>{k.component(t,C[t])}))}let ui=null==document?void 0:document.querySelector("#aitopia-sidebar");M.resizeBorder(ui,440);