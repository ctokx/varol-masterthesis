import{O as _,g as h,j as d,v as a,q as l,G as y,n as m,K as g,s as F,F as z,B as L,W as R,ak as A}from"./71531b053591a96d81db2519a82aa248.js";import{H as b}from"./0f34bc84b746331fb6e6d1a17e2be5f1.js";import{A as C,F as N,_ as U,m as D,C as M}from"./f1cb0a108b35713614332c7c219352b8.js";import{F as Z}from"./73621e66aaefef21fc49c7b09fcb8ca2.js";import"./17e6f969c69a33c57a5b808c30e97817.js";import{A as T}from"./f2694457f4424ded7029976ed34eac38.js";import"./d541e75e0d3013fe2efd3bb1a31c4a6b.js";import"./3f2064fa9a9acc842de50ad820610f4b.js";import"./7e56edcc34c4dfd4bce3410bed0529e6.js";import"./aca89d4ca34e8fbbc6f322cb34935489.js";import"./c12fd3596e1e986fac56d091ec67c779.js";import"./0db5daaf91bdd56249e9ae30e1c0fad3.js";import"./4bf0dc39263bec45ac08f22b6445195f.js";import"./bd5159ed1face2f59751ceb1d07e31f3.js";import"./9f935c62533cde17533373075512c98b.js";import"./22aa1f89111f8237764a195a86dc6791.js";import"./1c66977a9e497032052fc88de8dc0025.js";import"./2eb62d616ebc70b625c1907fb9b56bcb.js";import"./167eb5fb14130edc55e0208b299eb738.js";import"./e43206e4b2ef10bccecb7d9deb74b927.js";import"./39c3d8a964c661ab72f6d2e5dcdb0e9a.js";import"./0a9beade9558a5b904150914951edb50.js";import"./7694ab0a99e001fc6c4a0dff919c3a14.js";import"./c2c13b7def76f5768e17bc73b900b28e.js";import"./9cb1ced478fdea687c5b1bf07fa2b7a3.js";import"./83c6672847a35da18c7c6cd5f39ddc2c.js";import"./8f849a317394192d6541e23f7f7dff92.js";import"./f034a69a89413642eeb358901abf7dcf.js";import"./20a792c886a1e97f2e0afd17d252e1f4.js";import"./f54e67aceb61bff7ffa40ea09bc1d32b.js";import"./213f32d162da0b49b503a8a6bbbc48c5.js";import"./3bba0132cadb8367ad0a83c5b642cc05.js";import"./a7f3568b8a3b9ed5f4c7071a6647ff03.js";import"./85f9b9aa825fd52abbb9d9abb51bcccc.js";import"./845116a858117a73133ec07f5fc03fd7.js";import"./47c00f65ef7725e7b9291a5d4e878b12.js";import"./3aa3bad61540a8235df7f238b2b2bef2.js";import"./d689743b45b83766b445f5e3a7f83067.js";import"./d90a1dadfd9d56c6157b026a43a3acf9.js";import"./be62c323ef7199eed02717bc155004ba.js";import"./dcbabf58cd14346bf8b00e4313a9ce1e.js";import"./1c9c6c0e4e61684cbb170ab72d0e89e2.js";import"./8fd9dd871ac56148ba64599be5846cf8.js";const B={extends:C,async beforeMount(){this.fileProcessor=Z.getInstance()},data:()=>({fileUploaded:!1,selectedFile:null,currentPage:1,totalPages:1,pages:[],isLoading:!1,fileName:"",error:null,fileProcessor:null,pdfContainer:null,canvasContainer:null,containerMounted:!1,isConverting:!1,thumbnails:[],thumbnailsLoading:!1,currentZoom:1,showThumbnails:!0,showRightPanel:!0,pdfContent:"",resultCustomKeyReply:"",isGettingSuggestions:!1,isGettingSummary:!1,aiReplyPrompt:"",intentKey:"",keyPointsKey:"",suggestionsKey:"",lastGeneratedReply:"",continueImproving:!1,settingModal:!1,running:!1,emailContent:"",emailData:{},uploadedFileId:null}),computed:{acceptedFileTypes:()=>".pdf,.doc,.docx,.xlsx,.xls,.ppt,.pptx",loadingMessage(){return this.isConverting?this.__("Converting document to PDF..."):this.__("Loading PDF content...")}},mounted(){null!==this.extra_data&&this.changeStorage("extra_data",null,!1),null!==this.context_data&&this.changeStorage("context_data",null,!1),this.initializeContainer()},methods:{resetState:async()=>window.location.reload(),async cleanupResources(){try{if(this.fileUploaded=!1,this.selectedFile=null,this.currentPage=1,this.totalPages=1,this.pages=[],this.fileName="",this.pdfContent="",this.isLoading=!1,this.error=null,this.thumbnails.forEach((t=>{(t.startsWith("blob:")||t.startsWith("data:"))&&URL.revokeObjectURL(t)})),this.thumbnails=[],this.canvasContainer){const t=this.canvasContainer.getElementsByTagName("canvas");Array.from(t).forEach((t=>{const e=t.getContext("2d");e&&(e.clearRect(0,0,t.width,t.height),e.canvas=null),t.width=1,t.height=1})),this.canvasContainer.innerHTML=""}if(this.pdfContainer){const t=this.pdfContainer.querySelector(".pdf-text-layer");t&&(t.innerHTML=""),this.pdfContainer.innerHTML="",this.pdfContainer=null}this.currentZoom=1,this.showThumbnails=!0,this.showRightPanel=!0,this.fileProcessor&&await this.fileProcessor.cleanup(),this.changeStorage("extra_data",null,!1),this.changeStorage("context_data",null,!1),window.gc&&window.gc()}catch(t){console.error("Error during cleanup:",t),this.fileUploaded=!1,this.isLoading=!1,this.error=t.message||this.__("Error during cleanup")}},async getFileAnalysis(){const t="fileAnalysis";this.suggestionsKey=t;try{const e=await b.Browser().storage.local.get("current_file_name");if(this.ai_single&&this.ai_single[t]&&e&&e.current_file_name===this.fileName)return;this.isGettingSuggestions=this.isGettingSummary=!0;let a=`You are a highly skilled AI assistant for analyzing file content. I need two things:\n\n        1. A summary of the content in maximum 2 very short sentences. Start the summary with ##SUMMARY_START## and end with ##SUMMARY_END##\n\n        2. Three topic-based question suggestions about the content. Each suggestion should focus on different aspects (one positive, one neutral, one negative) to help understand the file content better. Start each suggestion with ##SUGGESTION_START## and end with ##SUGGESTION_END##\n\n        Do not include labels like "positive", "negative", or "neutral" in the output. Keep suggestions concise but informative.\n        Respond in the ${this.settings.language_name} language.\n\n        Content to analyze:\n        """${this.pdfContent}"""`;this.running=!0;let i=Object.assign({},this.emailData);i.mode="fileAnalysis",this.uploadedFileId&&(i.file_ids=[this.uploadedFileId]),console.log("Getting file analysis...");const o=null!=this.uploadedFileId?[this.uploadedFileId]:void 0;await this.aiChat(a,this.settings.ai_model,"ai_single",t,!0,!0,null,!1,i,o),console.log("File analysis completed.")}catch(e){console.error("Error in getFileAnalysis:",e),this.notify.error(this.__("Error happened while analyzing file content"))}finally{this.isGettingSuggestions=this.isGettingSummary=!1,this.running=!1}},initializeContainer(){console.log("Initializing container..."),this.canvasContainer=document.getElementById("pdf-canvas-container"),this.canvasContainer?(console.log("Container found"),this.containerMounted=!0):console.log("Container not found")},async handleFileUpload(t){const e=t.target.files[0];if(e)if(["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"].includes(e.type)){try{const t=await N.set(e,null,null);t&&(t._listkey||t.id||t.file_id)?this.uploadedFileId=t._listkey||t.id||t.file_id:this.uploadedFileId=null}catch(a){console.error("Error uploading file via /files/create",a),this.uploadedFileId=null}await this.cleanupResources(),this.newChat(null,"ai_single",b.SHA1("chat_with_file")),this.isLoading=!0,this.error=null,this.fileName=e.name;try{console.log("Loading document file..."),this.isConverting=!e.type.includes("pdf");const t=10485760;if(e.size>t)return void this.notify.error(this.__("File is too large. Please upload a smaller file."));await this.fileProcessor.loadPDF(e),this.isConverting=!1,console.log("Document loaded successfully");const a=this.fileProcessor.getPdfDoc();if(a){let t="";const e=a.numPages,i=Math.ceil(e/5);for(let o=0;o<i;o++){const i=5*o+1,n=Math.min(5*(o+1),e);for(let e=i;e<=n;e++){const i=await a.getPage(e),o=await i.getTextContent(),n=undefined;t+=o.items.map((t=>t.str)).join(" ")+"\n\n",await i.cleanup(),o.items.length=0,Object.keys(o).forEach((t=>{o[t]=null}))}await new Promise((t=>setTimeout(t,0)))}this.pdfContent=t,this.context_data={mode:"chatwithfile",fileName:`${this.fileName} - Chat with File`,contextData:{context:this.pdfContent}}}if(this.totalPages=this.fileProcessor.numPages,console.log("Total pages:",this.totalPages),0===this.totalPages)throw new Error("No pages found in document");this.currentPage=1,this.fileUploaded=!0,await this.renderThumbnailsWithMemoryManagement(),await this.$nextTick(),await this.initializeContainerWithRetry(),await this.getFileAnalysis(),await b.Browser().storage.local.set({current_file_name:e.name}),console.log("Starting page render..."),await this.renderCurrentPage(),console.log("Page rendered successfully")}catch(a){console.error("Error processing file:",a),this.error=a.message||this.__("Error processing file"),await this.cleanupResources()}finally{console.log("Setting isLoading to false"),this.isLoading=!1,this.isConverting=!1;const e=undefined;t.target.value=""}}else this.notify.error(this.__("Please upload a PDF, Word, Excel, or PowerPoint file"))},async renderThumbnailsWithMemoryManagement(){this.thumbnailsLoading=!0,this.thumbnails=[];try{for(let t=1;t<=this.totalPages;t+=5){const e=Math.min(t+5-1,this.totalPages),a=[];for(let i=t;i<=e;i++)a.push(this.fileProcessor.renderPage(i,1,!0).then((t=>{if(t&&t.container){const e=t.container.querySelector("img");e&&(this.thumbnails[i-1]=e.src),t.container.remove()}})));await Promise.all(a),await new Promise((t=>setTimeout(t,0)))}}catch(t){console.error("Error generating thumbnails:",t)}finally{this.thumbnailsLoading=!1}},async initializeContainerWithRetry(t=5,e=100){let a=0;for(;!this.containerMounted&&a<t;)console.log(`Attempt ${a+1} to find container`),this.initializeContainer(),this.containerMounted||await new Promise((t=>setTimeout(t,e))),a++;if(!this.canvasContainer)throw new Error(this.__("PDF viewer container not found after multiple attempts"))},async renderCurrentPage(){if(this.containerMounted||this.initializeContainer(),this.canvasContainer)try{console.log("Rendering page",this.currentPage),this.canvasContainer.innerHTML="";const t=await this.fileProcessor.renderPage(this.currentPage);if(!t||!t.container)throw new Error(this.__("Failed to render PDF page"));this.pdfContainer=t.container;const e=document.createElement("div");e.className="ait-inline-block",e.style.position="relative",e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,t.container.style.width=`${t.width}px`,t.container.style.height=`${t.height}px`,e.appendChild(t.container),this.canvasContainer.appendChild(e);const a=t.container.querySelector(".pdf-text-layer");if(a){a.style.width=`${t.width}px`,a.style.height=`${t.height}px`;const e=this.currentZoom;a.style.transform=`scale(${e})`,a.querySelectorAll("span").forEach((t=>{const a=window.getComputedStyle(t),i=parseFloat(a.fontSize),o=Math.round(i*e*100)/100;t.style.fontSize=`${o}px`;const n=t.textContent||"",s=document.createElement("canvas").getContext("2d");if(s){s.font=`${o}px ${a.fontFamily}`;const e=s.measureText(n);t.style.width=`${e.width}px`;const i=Math.ceil(e.actualBoundingBoxAscent+e.actualBoundingBoxDescent);t.style.height=`${i}px`}}))}console.log("Page rendered successfully")}catch(t){console.error("Error rendering page:",t),this.error=t.message||this.__("Error rendering page"),this.isLoading=!1}else this.error=this.__("PDF viewer container not found")},async nextPage(){this.currentPage<this.totalPages&&(this.currentPage=Math.min(this.totalPages,Number(this.currentPage)+1),await this.renderCurrentPage())},async previousPage(){this.currentPage>1&&(this.currentPage=Math.max(1,Number(this.currentPage)-1),await this.renderCurrentPage())},async setPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=Number(t),await this.renderCurrentPage())},zoomIn(){this.currentZoom=Math.min(3,this.currentZoom+.25),document.documentElement.style.setProperty("--pdf-zoom-level",this.currentZoom)},zoomOut(){this.currentZoom=Math.max(.5,this.currentZoom-.25),document.documentElement.style.setProperty("--pdf-zoom-level",this.currentZoom)},handlePageInput(t){const e=t.target,a=parseInt(e.value);isNaN(a)||(a<1?(e.value="1",this.setPage(1)):a>this.totalPages?(e.value=this.totalPages.toString(),this.setPage(this.totalPages)):this.setPage(a))},handlePageInputChange(t){const e=t.target;e.value||(e.value=this.currentPage.toString()),this.handlePageInput(t)},toggleThumbnails(){this.showThumbnails=!this.showThumbnails,this.canvasContainer&&(this.canvasContainer.className=this.canvasContainer.className.replace(/ait-pl-\d+/,""),this.canvasContainer.classList.add(this.showThumbnails?"ait-pl-28":"ait-pl-4"))},toggleRightPanel(){this.showRightPanel=!this.showRightPanel;const t=this.$el.querySelector(".ait-flex-col");t&&(t.className=t.className.replace(/ait-w-\d+\/\d+/,""),t.classList.add(this.showRightPanel?"ait-w-3/4":"ait-w-full"))}},watch:{currentPage(t,e){console.log("Page changed from",e,"to",t)},fileUploaded(t){t&&this.$nextTick((()=>{this.initializeContainer()}))},isLoading(t){console.log("Loading state changed:",t)}},beforeUnmount(){this.fileProcessor.cleanup()}},W={id:"aitopia-container",class:"full-screen ait-block ait-overflow-y-hidden"},G={class:"ait-h-[var(--ait-height-100)] ait-w-full ait-h-dvh"},O={class:"ait-container ait-align-top ait-container-md lg:ait-p-2 ait-w-full ait-max-w-full ait-h-full"},j={class:"ait-flex ait-flex-row-reverse lg:ait-flex-row ait-h-full"},H={key:0,class:"ait-top-0 ait-left-0 ait-right-0 ait-bg-[var(--ait-option-card-bg-color)] ait-border-b ait-border-[var(--ait-border-color)] ait-rounded-r-none lg:ait-rounded-r-lg ait-rounded-l-lg"},q={class:"ait-flex ait-items-center ait-gap-2 ait-p-4"},K={class:"ait-flex ait-items-center ait-gap-2 ait-ml-auto"},V=["disabled"],Y={class:"ait-text-sm ait-text-gray-600"},X=["disabled"],J={class:"ait-flex ait-items-center ait-gap-2"},Q=["disabled"],$={class:"ait-flex ait-items-center ait-gap-1"},tt=["value","max"],et={class:"ait-text-sm ait-text-gray-600"},it=["disabled"],at={key:1,class:"ait-absolute ait-left-2 ait-top-[76px] ait-bottom-0 ait-w-24 ait-overflow-y-auto ait-border-r ait-border-[var(--ait-border-color)] ait-z-10 ait-bg-[var(--ait-option-card-bg-color)] ait-thumbnail-container ait-hidden lg:ait-block"},ot={key:0,class:"ait-p-4 ait-text-center"},nt={key:1,class:"ait-p-2 ait-space-y-2 ait-bg-[var(--ait-option-card-bg-color)] ait-h-full"},st=["onClick"],rt={class:"ait-bg-white ait-p-1 ait-rounded ait-shadow-sm"},lt={class:"ait-text-xs ait-text-gray-700 ait-font-medium ait-mb-1"},ct={class:"thumbnail-container ait-overflow-hidden ait-rounded"},ht=["src"],dt={key:2,class:"ait-absolute ait-inset-0 ait-flex ait-flex-col ait-items-center ait-justify-center ait-bg-[var(--ait-option-card-bg-color)] ait-z-50"},ut={class:"ait-flex ait-flex-col ait-items-center ait-gap-4"},gt={class:"ait-relative"},pt={class:"ait-absolute ait-inset-0 ait-flex ait-items-center ait-justify-center ait-animate-spin"},mt={class:"ait-text-center"},ft={class:"ait-text-lg ait-font-semibold ait-text-white"},_t={class:"ait-text-sm ait-text-gray-500 ait-mt-2"},wt={key:3,class:"ait-inset-0 ait-flex ait-flex-col ait-items-center ait-justify-center ait-p-8"},vt={class:"ait-text-center ait-mb-6"},yt={class:"ait-text-2xl ait-font-semibold ait-mb-2"},Pt={class:"ait-text-gray-600"},xt={key:0,class:"ait-text-red-500 ait-mt-2"},bt={class:"ait-cursor-pointer ait-text-white ait-px-6 ait-py-3 ait-rounded-lg ait-bg-[var(--ait-link-color)] hover:ait-opacity-80 ait-transition-colors"},Ct=["accept"],kt={key:0,class:"ait-w-[1px] ait-h-full ait-bg-[var(--ait-border-color)]"},St={key:1,class:"ait-w-1/4 ait-bg-[var(--ait-option-card-bg-color)] ait-p-1 lg:ait-p-3 ait-rounded-l-none lg:ait-rounded-r-lg ait-rounded-r-lg"};function Ft(t,e,i,o,n,s){const r=_("font-awesome-icon"),c=_("HoverPopover"),u=_("svg-logo"),f=_("AppLogo"),p=_("ChatWithFileChatSection"),b=_("make-a-review"),v=_("InviteFriends"),w=_("MakeAReviewModal");return d(),h(z,null,[e[14]||(e[14]=a("link",{href:"https://fonts.googleapis.com/css2?family=Changa:wght@200..800&display=swap",rel:"stylesheet"},null,-1)),a("div",W,[a("div",G,[a("div",O,[a("div",j,[a("div",{class:m(["ait-flex ait-flex-col",[n.showRightPanel&&n.fileUploaded?"ait-w-3/4":"ait-w-full","ait-bg-[var(--ait-option-card-bg-color)]","ait-rounded-l-lg ait-justify-center"]])},[n.fileUploaded&&!n.isLoading?(d(),h("div",H,[a("div",q,[a("button",{onClick:e[0]||(e[0]=(...t)=>s.resetState&&s.resetState(...t)),class:"ait-flex ait-items-center ait-gap-1 ait-text-gray-600 hover:ait-text-gray-800"},[l(r,{icon:"fa-solid fa-arrow-left",class:"ait-w-5 ait-h-5"}),a("span",null,g(n.fileName),1)]),a("div",K,[l(c,{"popover-text":t.__("Hide/Show Thumbnails")},{default:F((()=>[a("button",{onClick:e[1]||(e[1]=(...t)=>s.toggleThumbnails&&s.toggleThumbnails(...t)),class:m(["ait-p-2 ait-rounded hover:ait-bg-[var(--ait-link-color)] ait-text-gray-600",{"ait-bg-[var(--ait-link-color)]":n.showThumbnails}])},[l(r,{icon:"fa-solid fa-align-left",class:"ait-w-5 ait-h-5"})],2)])),_:1},8,["popover-text"]),l(c,{"popover-text":t.__("Hide/Show Sidebar")},{default:F((()=>[a("button",{onClick:e[2]||(e[2]=(...t)=>s.toggleRightPanel&&s.toggleRightPanel(...t)),class:m(["ait-p-2 ait-rounded hover:ait-bg-[var(--ait-link-color)] ait-text-gray-600",{"ait-bg-[var(--ait-link-color)]":n.showRightPanel}])},[l(r,{icon:"fa-solid fa-align-right",class:"ait-w-5 ait-h-5"})],2)])),_:1},8,["popover-text"]),l(c,{"popover-text":t.__("Zoom Out")},{default:F((()=>[a("button",{onClick:e[3]||(e[3]=(...t)=>s.zoomOut&&s.zoomOut(...t)),class:m(["ait-p-2 ait-rounded hover:ait-bg-[var(--ait-link-color)] ait-text-gray-600",{"ait-opacity-50":n.currentZoom<=.5}]),disabled:n.currentZoom<=.5},[l(u,{name:"zoom_out",class:"ait-w-20 ait-h-20"})],10,V)])),_:1},8,["popover-text"]),a("span",Y,g(Math.round(100*n.currentZoom))+"%",1),l(c,{"popover-text":t.__("Zoom In")},{default:F((()=>[a("button",{onClick:e[4]||(e[4]=(...t)=>s.zoomIn&&s.zoomIn(...t)),class:m(["ait-p-2 ait-rounded hover:ait-bg-[var(--ait-link-color)] ait-text-gray-600",{"ait-opacity-50":n.currentZoom>=3}]),disabled:n.currentZoom>=3},[l(u,{name:"zoom_in",class:"ait-w-5 ait-h-5"})],10,X)])),_:1},8,["popover-text"])]),a("div",J,[a("span",{onClick:e[5]||(e[5]=(...t)=>s.previousPage&&s.previousPage(...t)),disabled:1===n.currentPage,class:m(["ait-p-2 hover:ait-bg-[var(--ait-link-color)] ait-rounded ait-cursor-pointer",{"ait-opacity-50 ait-cursor-not-allowed":1===n.currentPage}])},[l(r,{icon:"fa-solid fa-arrow-left",class:"ait-w-5 ait-h-5"})],10,Q),a("div",$,[a("input",{type:"number",value:n.currentPage,onInput:e[6]||(e[6]=(...t)=>s.handlePageInput&&s.handlePageInput(...t)),onChange:e[7]||(e[7]=(...t)=>s.handlePageInputChange&&s.handlePageInputChange(...t)),onBlur:e[8]||(e[8]=(...t)=>s.handlePageInputChange&&s.handlePageInputChange(...t)),class:"ait-w-16 ait-text-center ait-border ait-border-gray-300 ait-rounded ait-px-2 ait-py-1 ait-text-sm focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-tab-menu-active-bg-color)] input-without-arrows",min:1,max:n.totalPages},null,40,tt),a("span",et,g(t.__("of"))+" "+g(n.totalPages),1)]),a("span",{onClick:e[9]||(e[9]=(...t)=>s.nextPage&&s.nextPage(...t)),disabled:n.currentPage===n.totalPages,class:m(["ait-p-2 hover:ait-bg-[var(--ait-link-color)] ait-rounded ait-cursor-pointer",{"ait-opacity-50 ait-cursor-not-allowed":n.currentPage===n.totalPages}])},[l(r,{icon:"fa-solid fa-arrow-right",class:"ait-w-5 ait-h-5"})],10,it)])])])):y("",!0),n.fileUploaded&&!n.isLoading&&n.showThumbnails?(d(),h("div",at,[n.thumbnailsLoading?(d(),h("div",ot,e[11]||(e[11]=[a("div",{class:"ait-animate-spin ait-h-6 ait-w-6 ait-border-2 ait-border-t-transparent ait-rounded-full ait-mx-auto"},null,-1)]))):(d(),h("div",nt,[(d(!0),h(z,null,L(n.thumbnails,((t,e)=>(d(),h("div",{key:e,class:m(["ait-cursor-pointer ait-transition-all ait-duration-200 hover:ait-transform hover:ait-scale-105 ait-rounded-lg",{"ait-ring-4 ait-ring-[var(--ait-tab-menu-active-bg-color)]":n.currentPage===e+1}]),onClick:t=>s.setPage(e+1)},[a("div",rt,[a("div",lt,g(e+1),1),a("div",ct,[a("img",{src:t,class:"ait-w-full ait-h-full ait-object-contain",alt:"Page thumbnail"},null,8,ht)])])],10,st)))),128))]))])):y("",!0),n.isLoading?(d(),h("div",dt,[a("div",ut,[a("div",gt,[e[12]||(e[12]=a("div",{class:"ait-w-16 ait-h-16 ait-border-4 ait-rounded-full"},null,-1)),a("div",pt,[l(f,{class:"ait-w-16 ait-h-16"})])]),a("div",mt,[a("p",ft,g(s.loadingMessage),1),a("p",_t,g(t.__("Please wait while we process your file...")),1)])])])):y("",!0),a("div",{id:"pdf-canvas-container",class:m(["ait-flex-1 ait-overflow-auto ait-p-4 ait-flex ait-justify-center ait-bg-gray-50 ait-pl-28",{"ait-hidden":!n.fileUploaded||n.isLoading}])},null,2),n.fileUploaded||n.isLoading?y("",!0):(d(),h("div",wt,[a("div",vt,[a("h2",yt,g(t.__("Upload Your File")),1),a("p",Pt,g(t.__("Select a PDF, Word, Presentation, or Excel file to get started")),1),n.error?(d(),h("p",xt,g(t.__("Error Occurred While Uploading File")),1)):y("",!0)]),a("label",bt,[R(g(t.__("Choose File"))+" ",1),a("input",{type:"file",accept:s.acceptedFileTypes,class:"ait-hidden",onChange:e[10]||(e[10]=(...t)=>s.handleFileUpload&&s.handleFileUpload(...t))},null,40,Ct)])]))],2),n.showRightPanel&&n.fileUploaded?(d(),h("div",kt)):y("",!0),n.showRightPanel&&n.fileUploaded?(d(),h("div",St,[l(p,{showUploadAPdf:!1,showReadPage:!1,uploadAnImage:!1,showSuggestions:!1}),l(b),l(v)])):y("",!0)])]),e[13]||(e[13]=a("textarea",{id:"ait_clipboard",style:{position:"fixed",bottom:"-10px","z-index":"-1",height:"1px",width:"1px","font-size":"0.1px"}},null,-1)),l(w)])])],64)}const I=U(B,[["render",Ft]]);b.setSidebar("#aitopia-chat-with-file-full-screen","aitopia-chat-with-file"),b.addLoading(),C.template=I,C.methods=D,typeof C.components>"u"&&(C.components=M),C.components=M;var E=window.aiVueApp=A(I,{type:"ChatWithFile"});if(E.mount("#aitopia-chat-with-file"),T){let t=Object.keys(T);t&&t.forEach((t=>{E.component(t,T[t])}))}let Tt=null==document?void 0:document.querySelector("#aitopia-sidebar");b.resizeBorder(Tt,440);